/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		var threw = true;
/******/ 		try {
/******/ 			modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/ 			threw = false;
/******/ 		} finally {
/******/ 			if(threw) delete installedModules[moduleId];
/******/ 		}
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = "./src/index.js");
/******/ })
/************************************************************************/
/******/ ({

/***/ "./node_modules/eventemitter3/index.js":
/*!*********************************************!*\
  !*** ./node_modules/eventemitter3/index.js ***!
  \*********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nvar has = Object.prototype.hasOwnProperty\n  , prefix = '~';\n\n/**\n * Constructor to create a storage for our `EE` objects.\n * An `Events` instance is a plain object whose properties are event names.\n *\n * @constructor\n * @private\n */\nfunction Events() {}\n\n//\n// We try to not inherit from `Object.prototype`. In some engines creating an\n// instance in this way is faster than calling `Object.create(null)` directly.\n// If `Object.create(null)` is not supported we prefix the event names with a\n// character to make sure that the built-in object properties are not\n// overridden or used as an attack vector.\n//\nif (Object.create) {\n  Events.prototype = Object.create(null);\n\n  //\n  // This hack is needed because the `__proto__` property is still inherited in\n  // some old browsers like Android 4, iPhone 5.1, Opera 11 and Safari 5.\n  //\n  if (!new Events().__proto__) prefix = false;\n}\n\n/**\n * Representation of a single event listener.\n *\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} [once=false] Specify if the listener is a one-time listener.\n * @constructor\n * @private\n */\nfunction EE(fn, context, once) {\n  this.fn = fn;\n  this.context = context;\n  this.once = once || false;\n}\n\n/**\n * Add a listener for a given event.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} once Specify if the listener is a one-time listener.\n * @returns {EventEmitter}\n * @private\n */\nfunction addListener(emitter, event, fn, context, once) {\n  if (typeof fn !== 'function') {\n    throw new TypeError('The listener must be a function');\n  }\n\n  var listener = new EE(fn, context || emitter, once)\n    , evt = prefix ? prefix + event : event;\n\n  if (!emitter._events[evt]) emitter._events[evt] = listener, emitter._eventsCount++;\n  else if (!emitter._events[evt].fn) emitter._events[evt].push(listener);\n  else emitter._events[evt] = [emitter._events[evt], listener];\n\n  return emitter;\n}\n\n/**\n * Clear event by name.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} evt The Event name.\n * @private\n */\nfunction clearEvent(emitter, evt) {\n  if (--emitter._eventsCount === 0) emitter._events = new Events();\n  else delete emitter._events[evt];\n}\n\n/**\n * Minimal `EventEmitter` interface that is molded against the Node.js\n * `EventEmitter` interface.\n *\n * @constructor\n * @public\n */\nfunction EventEmitter() {\n  this._events = new Events();\n  this._eventsCount = 0;\n}\n\n/**\n * Return an array listing the events for which the emitter has registered\n * listeners.\n *\n * @returns {Array}\n * @public\n */\nEventEmitter.prototype.eventNames = function eventNames() {\n  var names = []\n    , events\n    , name;\n\n  if (this._eventsCount === 0) return names;\n\n  for (name in (events = this._events)) {\n    if (has.call(events, name)) names.push(prefix ? name.slice(1) : name);\n  }\n\n  if (Object.getOwnPropertySymbols) {\n    return names.concat(Object.getOwnPropertySymbols(events));\n  }\n\n  return names;\n};\n\n/**\n * Return the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Array} The registered listeners.\n * @public\n */\nEventEmitter.prototype.listeners = function listeners(event) {\n  var evt = prefix ? prefix + event : event\n    , handlers = this._events[evt];\n\n  if (!handlers) return [];\n  if (handlers.fn) return [handlers.fn];\n\n  for (var i = 0, l = handlers.length, ee = new Array(l); i < l; i++) {\n    ee[i] = handlers[i].fn;\n  }\n\n  return ee;\n};\n\n/**\n * Return the number of listeners listening to a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Number} The number of listeners.\n * @public\n */\nEventEmitter.prototype.listenerCount = function listenerCount(event) {\n  var evt = prefix ? prefix + event : event\n    , listeners = this._events[evt];\n\n  if (!listeners) return 0;\n  if (listeners.fn) return 1;\n  return listeners.length;\n};\n\n/**\n * Calls each of the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Boolean} `true` if the event had listeners, else `false`.\n * @public\n */\nEventEmitter.prototype.emit = function emit(event, a1, a2, a3, a4, a5) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return false;\n\n  var listeners = this._events[evt]\n    , len = arguments.length\n    , args\n    , i;\n\n  if (listeners.fn) {\n    if (listeners.once) this.removeListener(event, listeners.fn, undefined, true);\n\n    switch (len) {\n      case 1: return listeners.fn.call(listeners.context), true;\n      case 2: return listeners.fn.call(listeners.context, a1), true;\n      case 3: return listeners.fn.call(listeners.context, a1, a2), true;\n      case 4: return listeners.fn.call(listeners.context, a1, a2, a3), true;\n      case 5: return listeners.fn.call(listeners.context, a1, a2, a3, a4), true;\n      case 6: return listeners.fn.call(listeners.context, a1, a2, a3, a4, a5), true;\n    }\n\n    for (i = 1, args = new Array(len -1); i < len; i++) {\n      args[i - 1] = arguments[i];\n    }\n\n    listeners.fn.apply(listeners.context, args);\n  } else {\n    var length = listeners.length\n      , j;\n\n    for (i = 0; i < length; i++) {\n      if (listeners[i].once) this.removeListener(event, listeners[i].fn, undefined, true);\n\n      switch (len) {\n        case 1: listeners[i].fn.call(listeners[i].context); break;\n        case 2: listeners[i].fn.call(listeners[i].context, a1); break;\n        case 3: listeners[i].fn.call(listeners[i].context, a1, a2); break;\n        case 4: listeners[i].fn.call(listeners[i].context, a1, a2, a3); break;\n        default:\n          if (!args) for (j = 1, args = new Array(len -1); j < len; j++) {\n            args[j - 1] = arguments[j];\n          }\n\n          listeners[i].fn.apply(listeners[i].context, args);\n      }\n    }\n  }\n\n  return true;\n};\n\n/**\n * Add a listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.on = function on(event, fn, context) {\n  return addListener(this, event, fn, context, false);\n};\n\n/**\n * Add a one-time listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.once = function once(event, fn, context) {\n  return addListener(this, event, fn, context, true);\n};\n\n/**\n * Remove the listeners of a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn Only remove the listeners that match this function.\n * @param {*} context Only remove the listeners that have this context.\n * @param {Boolean} once Only remove one-time listeners.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeListener = function removeListener(event, fn, context, once) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return this;\n  if (!fn) {\n    clearEvent(this, evt);\n    return this;\n  }\n\n  var listeners = this._events[evt];\n\n  if (listeners.fn) {\n    if (\n      listeners.fn === fn &&\n      (!once || listeners.once) &&\n      (!context || listeners.context === context)\n    ) {\n      clearEvent(this, evt);\n    }\n  } else {\n    for (var i = 0, events = [], length = listeners.length; i < length; i++) {\n      if (\n        listeners[i].fn !== fn ||\n        (once && !listeners[i].once) ||\n        (context && listeners[i].context !== context)\n      ) {\n        events.push(listeners[i]);\n      }\n    }\n\n    //\n    // Reset the array, or remove it completely if we have no more listeners.\n    //\n    if (events.length) this._events[evt] = events.length === 1 ? events[0] : events;\n    else clearEvent(this, evt);\n  }\n\n  return this;\n};\n\n/**\n * Remove all listeners, or those of the specified event.\n *\n * @param {(String|Symbol)} [event] The event name.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeAllListeners = function removeAllListeners(event) {\n  var evt;\n\n  if (event) {\n    evt = prefix ? prefix + event : event;\n    if (this._events[evt]) clearEvent(this, evt);\n  } else {\n    this._events = new Events();\n    this._eventsCount = 0;\n  }\n\n  return this;\n};\n\n//\n// Alias methods names because people roll like that.\n//\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\nEventEmitter.prototype.addListener = EventEmitter.prototype.on;\n\n//\n// Expose the prefix.\n//\nEventEmitter.prefixed = prefix;\n\n//\n// Allow `EventEmitter` to be imported as module namespace.\n//\nEventEmitter.EventEmitter = EventEmitter;\n\n//\n// Expose the module.\n//\nif (true) {\n  module.exports = EventEmitter;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvZXZlbnRlbWl0dGVyMy9pbmRleC5qcz9iYTEwIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFhOztBQUViO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsU0FBUztBQUNwQixXQUFXLEVBQUU7QUFDYixXQUFXLFFBQVE7QUFDbkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLGFBQWE7QUFDeEIsV0FBVyxnQkFBZ0I7QUFDM0IsV0FBVyxTQUFTO0FBQ3BCLFdBQVcsRUFBRTtBQUNiLFdBQVcsUUFBUTtBQUNuQixhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsV0FBVyxhQUFhO0FBQ3hCLFdBQVcsZ0JBQWdCO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsV0FBVyxnQkFBZ0I7QUFDM0IsYUFBYSxNQUFNO0FBQ25CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQSx5REFBeUQsT0FBTztBQUNoRTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsV0FBVyxnQkFBZ0I7QUFDM0IsYUFBYSxPQUFPO0FBQ3BCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsV0FBVyxnQkFBZ0I7QUFDM0IsYUFBYSxRQUFRO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSx5Q0FBeUMsU0FBUztBQUNsRDtBQUNBOztBQUVBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUEsZUFBZSxZQUFZO0FBQzNCOztBQUVBO0FBQ0EsMkRBQTJEO0FBQzNELCtEQUErRDtBQUMvRCxtRUFBbUU7QUFDbkUsdUVBQXVFO0FBQ3ZFO0FBQ0EsMERBQTBELFNBQVM7QUFDbkU7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsZ0JBQWdCO0FBQzNCLFdBQVcsU0FBUztBQUNwQixXQUFXLEVBQUU7QUFDYixhQUFhLGFBQWE7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLGdCQUFnQjtBQUMzQixXQUFXLFNBQVM7QUFDcEIsV0FBVyxFQUFFO0FBQ2IsYUFBYSxhQUFhO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsV0FBVyxnQkFBZ0I7QUFDM0IsV0FBVyxTQUFTO0FBQ3BCLFdBQVcsRUFBRTtBQUNiLFdBQVcsUUFBUTtBQUNuQixhQUFhLGFBQWE7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILDJEQUEyRCxZQUFZO0FBQ3ZFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsV0FBVyxnQkFBZ0I7QUFDM0IsYUFBYSxhQUFhO0FBQzFCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLElBQUksSUFBNkI7QUFDakM7QUFDQSIsImZpbGUiOiIuL25vZGVfbW9kdWxlcy9ldmVudGVtaXR0ZXIzL2luZGV4LmpzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG52YXIgaGFzID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eVxuICAsIHByZWZpeCA9ICd+JztcblxuLyoqXG4gKiBDb25zdHJ1Y3RvciB0byBjcmVhdGUgYSBzdG9yYWdlIGZvciBvdXIgYEVFYCBvYmplY3RzLlxuICogQW4gYEV2ZW50c2AgaW5zdGFuY2UgaXMgYSBwbGFpbiBvYmplY3Qgd2hvc2UgcHJvcGVydGllcyBhcmUgZXZlbnQgbmFtZXMuXG4gKlxuICogQGNvbnN0cnVjdG9yXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBFdmVudHMoKSB7fVxuXG4vL1xuLy8gV2UgdHJ5IHRvIG5vdCBpbmhlcml0IGZyb20gYE9iamVjdC5wcm90b3R5cGVgLiBJbiBzb21lIGVuZ2luZXMgY3JlYXRpbmcgYW5cbi8vIGluc3RhbmNlIGluIHRoaXMgd2F5IGlzIGZhc3RlciB0aGFuIGNhbGxpbmcgYE9iamVjdC5jcmVhdGUobnVsbClgIGRpcmVjdGx5LlxuLy8gSWYgYE9iamVjdC5jcmVhdGUobnVsbClgIGlzIG5vdCBzdXBwb3J0ZWQgd2UgcHJlZml4IHRoZSBldmVudCBuYW1lcyB3aXRoIGFcbi8vIGNoYXJhY3RlciB0byBtYWtlIHN1cmUgdGhhdCB0aGUgYnVpbHQtaW4gb2JqZWN0IHByb3BlcnRpZXMgYXJlIG5vdFxuLy8gb3ZlcnJpZGRlbiBvciB1c2VkIGFzIGFuIGF0dGFjayB2ZWN0b3IuXG4vL1xuaWYgKE9iamVjdC5jcmVhdGUpIHtcbiAgRXZlbnRzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG5cbiAgLy9cbiAgLy8gVGhpcyBoYWNrIGlzIG5lZWRlZCBiZWNhdXNlIHRoZSBgX19wcm90b19fYCBwcm9wZXJ0eSBpcyBzdGlsbCBpbmhlcml0ZWQgaW5cbiAgLy8gc29tZSBvbGQgYnJvd3NlcnMgbGlrZSBBbmRyb2lkIDQsIGlQaG9uZSA1LjEsIE9wZXJhIDExIGFuZCBTYWZhcmkgNS5cbiAgLy9cbiAgaWYgKCFuZXcgRXZlbnRzKCkuX19wcm90b19fKSBwcmVmaXggPSBmYWxzZTtcbn1cblxuLyoqXG4gKiBSZXByZXNlbnRhdGlvbiBvZiBhIHNpbmdsZSBldmVudCBsaXN0ZW5lci5cbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiBUaGUgbGlzdGVuZXIgZnVuY3Rpb24uXG4gKiBAcGFyYW0geyp9IGNvbnRleHQgVGhlIGNvbnRleHQgdG8gaW52b2tlIHRoZSBsaXN0ZW5lciB3aXRoLlxuICogQHBhcmFtIHtCb29sZWFufSBbb25jZT1mYWxzZV0gU3BlY2lmeSBpZiB0aGUgbGlzdGVuZXIgaXMgYSBvbmUtdGltZSBsaXN0ZW5lci5cbiAqIEBjb25zdHJ1Y3RvclxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gRUUoZm4sIGNvbnRleHQsIG9uY2UpIHtcbiAgdGhpcy5mbiA9IGZuO1xuICB0aGlzLmNvbnRleHQgPSBjb250ZXh0O1xuICB0aGlzLm9uY2UgPSBvbmNlIHx8IGZhbHNlO1xufVxuXG4vKipcbiAqIEFkZCBhIGxpc3RlbmVyIGZvciBhIGdpdmVuIGV2ZW50LlxuICpcbiAqIEBwYXJhbSB7RXZlbnRFbWl0dGVyfSBlbWl0dGVyIFJlZmVyZW5jZSB0byB0aGUgYEV2ZW50RW1pdHRlcmAgaW5zdGFuY2UuXG4gKiBAcGFyYW0geyhTdHJpbmd8U3ltYm9sKX0gZXZlbnQgVGhlIGV2ZW50IG5hbWUuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiBUaGUgbGlzdGVuZXIgZnVuY3Rpb24uXG4gKiBAcGFyYW0geyp9IGNvbnRleHQgVGhlIGNvbnRleHQgdG8gaW52b2tlIHRoZSBsaXN0ZW5lciB3aXRoLlxuICogQHBhcmFtIHtCb29sZWFufSBvbmNlIFNwZWNpZnkgaWYgdGhlIGxpc3RlbmVyIGlzIGEgb25lLXRpbWUgbGlzdGVuZXIuXG4gKiBAcmV0dXJucyB7RXZlbnRFbWl0dGVyfVxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gYWRkTGlzdGVuZXIoZW1pdHRlciwgZXZlbnQsIGZuLCBjb250ZXh0LCBvbmNlKSB7XG4gIGlmICh0eXBlb2YgZm4gIT09ICdmdW5jdGlvbicpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdUaGUgbGlzdGVuZXIgbXVzdCBiZSBhIGZ1bmN0aW9uJyk7XG4gIH1cblxuICB2YXIgbGlzdGVuZXIgPSBuZXcgRUUoZm4sIGNvbnRleHQgfHwgZW1pdHRlciwgb25jZSlcbiAgICAsIGV2dCA9IHByZWZpeCA/IHByZWZpeCArIGV2ZW50IDogZXZlbnQ7XG5cbiAgaWYgKCFlbWl0dGVyLl9ldmVudHNbZXZ0XSkgZW1pdHRlci5fZXZlbnRzW2V2dF0gPSBsaXN0ZW5lciwgZW1pdHRlci5fZXZlbnRzQ291bnQrKztcbiAgZWxzZSBpZiAoIWVtaXR0ZXIuX2V2ZW50c1tldnRdLmZuKSBlbWl0dGVyLl9ldmVudHNbZXZ0XS5wdXNoKGxpc3RlbmVyKTtcbiAgZWxzZSBlbWl0dGVyLl9ldmVudHNbZXZ0XSA9IFtlbWl0dGVyLl9ldmVudHNbZXZ0XSwgbGlzdGVuZXJdO1xuXG4gIHJldHVybiBlbWl0dGVyO1xufVxuXG4vKipcbiAqIENsZWFyIGV2ZW50IGJ5IG5hbWUuXG4gKlxuICogQHBhcmFtIHtFdmVudEVtaXR0ZXJ9IGVtaXR0ZXIgUmVmZXJlbmNlIHRvIHRoZSBgRXZlbnRFbWl0dGVyYCBpbnN0YW5jZS5cbiAqIEBwYXJhbSB7KFN0cmluZ3xTeW1ib2wpfSBldnQgVGhlIEV2ZW50IG5hbWUuXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBjbGVhckV2ZW50KGVtaXR0ZXIsIGV2dCkge1xuICBpZiAoLS1lbWl0dGVyLl9ldmVudHNDb3VudCA9PT0gMCkgZW1pdHRlci5fZXZlbnRzID0gbmV3IEV2ZW50cygpO1xuICBlbHNlIGRlbGV0ZSBlbWl0dGVyLl9ldmVudHNbZXZ0XTtcbn1cblxuLyoqXG4gKiBNaW5pbWFsIGBFdmVudEVtaXR0ZXJgIGludGVyZmFjZSB0aGF0IGlzIG1vbGRlZCBhZ2FpbnN0IHRoZSBOb2RlLmpzXG4gKiBgRXZlbnRFbWl0dGVyYCBpbnRlcmZhY2UuXG4gKlxuICogQGNvbnN0cnVjdG9yXG4gKiBAcHVibGljXG4gKi9cbmZ1bmN0aW9uIEV2ZW50RW1pdHRlcigpIHtcbiAgdGhpcy5fZXZlbnRzID0gbmV3IEV2ZW50cygpO1xuICB0aGlzLl9ldmVudHNDb3VudCA9IDA7XG59XG5cbi8qKlxuICogUmV0dXJuIGFuIGFycmF5IGxpc3RpbmcgdGhlIGV2ZW50cyBmb3Igd2hpY2ggdGhlIGVtaXR0ZXIgaGFzIHJlZ2lzdGVyZWRcbiAqIGxpc3RlbmVycy5cbiAqXG4gKiBAcmV0dXJucyB7QXJyYXl9XG4gKiBAcHVibGljXG4gKi9cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUuZXZlbnROYW1lcyA9IGZ1bmN0aW9uIGV2ZW50TmFtZXMoKSB7XG4gIHZhciBuYW1lcyA9IFtdXG4gICAgLCBldmVudHNcbiAgICAsIG5hbWU7XG5cbiAgaWYgKHRoaXMuX2V2ZW50c0NvdW50ID09PSAwKSByZXR1cm4gbmFtZXM7XG5cbiAgZm9yIChuYW1lIGluIChldmVudHMgPSB0aGlzLl9ldmVudHMpKSB7XG4gICAgaWYgKGhhcy5jYWxsKGV2ZW50cywgbmFtZSkpIG5hbWVzLnB1c2gocHJlZml4ID8gbmFtZS5zbGljZSgxKSA6IG5hbWUpO1xuICB9XG5cbiAgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHtcbiAgICByZXR1cm4gbmFtZXMuY29uY2F0KE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMoZXZlbnRzKSk7XG4gIH1cblxuICByZXR1cm4gbmFtZXM7XG59O1xuXG4vKipcbiAqIFJldHVybiB0aGUgbGlzdGVuZXJzIHJlZ2lzdGVyZWQgZm9yIGEgZ2l2ZW4gZXZlbnQuXG4gKlxuICogQHBhcmFtIHsoU3RyaW5nfFN5bWJvbCl9IGV2ZW50IFRoZSBldmVudCBuYW1lLlxuICogQHJldHVybnMge0FycmF5fSBUaGUgcmVnaXN0ZXJlZCBsaXN0ZW5lcnMuXG4gKiBAcHVibGljXG4gKi9cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUubGlzdGVuZXJzID0gZnVuY3Rpb24gbGlzdGVuZXJzKGV2ZW50KSB7XG4gIHZhciBldnQgPSBwcmVmaXggPyBwcmVmaXggKyBldmVudCA6IGV2ZW50XG4gICAgLCBoYW5kbGVycyA9IHRoaXMuX2V2ZW50c1tldnRdO1xuXG4gIGlmICghaGFuZGxlcnMpIHJldHVybiBbXTtcbiAgaWYgKGhhbmRsZXJzLmZuKSByZXR1cm4gW2hhbmRsZXJzLmZuXTtcblxuICBmb3IgKHZhciBpID0gMCwgbCA9IGhhbmRsZXJzLmxlbmd0aCwgZWUgPSBuZXcgQXJyYXkobCk7IGkgPCBsOyBpKyspIHtcbiAgICBlZVtpXSA9IGhhbmRsZXJzW2ldLmZuO1xuICB9XG5cbiAgcmV0dXJuIGVlO1xufTtcblxuLyoqXG4gKiBSZXR1cm4gdGhlIG51bWJlciBvZiBsaXN0ZW5lcnMgbGlzdGVuaW5nIHRvIGEgZ2l2ZW4gZXZlbnQuXG4gKlxuICogQHBhcmFtIHsoU3RyaW5nfFN5bWJvbCl9IGV2ZW50IFRoZSBldmVudCBuYW1lLlxuICogQHJldHVybnMge051bWJlcn0gVGhlIG51bWJlciBvZiBsaXN0ZW5lcnMuXG4gKiBAcHVibGljXG4gKi9cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUubGlzdGVuZXJDb3VudCA9IGZ1bmN0aW9uIGxpc3RlbmVyQ291bnQoZXZlbnQpIHtcbiAgdmFyIGV2dCA9IHByZWZpeCA/IHByZWZpeCArIGV2ZW50IDogZXZlbnRcbiAgICAsIGxpc3RlbmVycyA9IHRoaXMuX2V2ZW50c1tldnRdO1xuXG4gIGlmICghbGlzdGVuZXJzKSByZXR1cm4gMDtcbiAgaWYgKGxpc3RlbmVycy5mbikgcmV0dXJuIDE7XG4gIHJldHVybiBsaXN0ZW5lcnMubGVuZ3RoO1xufTtcblxuLyoqXG4gKiBDYWxscyBlYWNoIG9mIHRoZSBsaXN0ZW5lcnMgcmVnaXN0ZXJlZCBmb3IgYSBnaXZlbiBldmVudC5cbiAqXG4gKiBAcGFyYW0geyhTdHJpbmd8U3ltYm9sKX0gZXZlbnQgVGhlIGV2ZW50IG5hbWUuXG4gKiBAcmV0dXJucyB7Qm9vbGVhbn0gYHRydWVgIGlmIHRoZSBldmVudCBoYWQgbGlzdGVuZXJzLCBlbHNlIGBmYWxzZWAuXG4gKiBAcHVibGljXG4gKi9cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUuZW1pdCA9IGZ1bmN0aW9uIGVtaXQoZXZlbnQsIGExLCBhMiwgYTMsIGE0LCBhNSkge1xuICB2YXIgZXZ0ID0gcHJlZml4ID8gcHJlZml4ICsgZXZlbnQgOiBldmVudDtcblxuICBpZiAoIXRoaXMuX2V2ZW50c1tldnRdKSByZXR1cm4gZmFsc2U7XG5cbiAgdmFyIGxpc3RlbmVycyA9IHRoaXMuX2V2ZW50c1tldnRdXG4gICAgLCBsZW4gPSBhcmd1bWVudHMubGVuZ3RoXG4gICAgLCBhcmdzXG4gICAgLCBpO1xuXG4gIGlmIChsaXN0ZW5lcnMuZm4pIHtcbiAgICBpZiAobGlzdGVuZXJzLm9uY2UpIHRoaXMucmVtb3ZlTGlzdGVuZXIoZXZlbnQsIGxpc3RlbmVycy5mbiwgdW5kZWZpbmVkLCB0cnVlKTtcblxuICAgIHN3aXRjaCAobGVuKSB7XG4gICAgICBjYXNlIDE6IHJldHVybiBsaXN0ZW5lcnMuZm4uY2FsbChsaXN0ZW5lcnMuY29udGV4dCksIHRydWU7XG4gICAgICBjYXNlIDI6IHJldHVybiBsaXN0ZW5lcnMuZm4uY2FsbChsaXN0ZW5lcnMuY29udGV4dCwgYTEpLCB0cnVlO1xuICAgICAgY2FzZSAzOiByZXR1cm4gbGlzdGVuZXJzLmZuLmNhbGwobGlzdGVuZXJzLmNvbnRleHQsIGExLCBhMiksIHRydWU7XG4gICAgICBjYXNlIDQ6IHJldHVybiBsaXN0ZW5lcnMuZm4uY2FsbChsaXN0ZW5lcnMuY29udGV4dCwgYTEsIGEyLCBhMyksIHRydWU7XG4gICAgICBjYXNlIDU6IHJldHVybiBsaXN0ZW5lcnMuZm4uY2FsbChsaXN0ZW5lcnMuY29udGV4dCwgYTEsIGEyLCBhMywgYTQpLCB0cnVlO1xuICAgICAgY2FzZSA2OiByZXR1cm4gbGlzdGVuZXJzLmZuLmNhbGwobGlzdGVuZXJzLmNvbnRleHQsIGExLCBhMiwgYTMsIGE0LCBhNSksIHRydWU7XG4gICAgfVxuXG4gICAgZm9yIChpID0gMSwgYXJncyA9IG5ldyBBcnJheShsZW4gLTEpOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgIGFyZ3NbaSAtIDFdID0gYXJndW1lbnRzW2ldO1xuICAgIH1cblxuICAgIGxpc3RlbmVycy5mbi5hcHBseShsaXN0ZW5lcnMuY29udGV4dCwgYXJncyk7XG4gIH0gZWxzZSB7XG4gICAgdmFyIGxlbmd0aCA9IGxpc3RlbmVycy5sZW5ndGhcbiAgICAgICwgajtcblxuICAgIGZvciAoaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgaWYgKGxpc3RlbmVyc1tpXS5vbmNlKSB0aGlzLnJlbW92ZUxpc3RlbmVyKGV2ZW50LCBsaXN0ZW5lcnNbaV0uZm4sIHVuZGVmaW5lZCwgdHJ1ZSk7XG5cbiAgICAgIHN3aXRjaCAobGVuKSB7XG4gICAgICAgIGNhc2UgMTogbGlzdGVuZXJzW2ldLmZuLmNhbGwobGlzdGVuZXJzW2ldLmNvbnRleHQpOyBicmVhaztcbiAgICAgICAgY2FzZSAyOiBsaXN0ZW5lcnNbaV0uZm4uY2FsbChsaXN0ZW5lcnNbaV0uY29udGV4dCwgYTEpOyBicmVhaztcbiAgICAgICAgY2FzZSAzOiBsaXN0ZW5lcnNbaV0uZm4uY2FsbChsaXN0ZW5lcnNbaV0uY29udGV4dCwgYTEsIGEyKTsgYnJlYWs7XG4gICAgICAgIGNhc2UgNDogbGlzdGVuZXJzW2ldLmZuLmNhbGwobGlzdGVuZXJzW2ldLmNvbnRleHQsIGExLCBhMiwgYTMpOyBicmVhaztcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICBpZiAoIWFyZ3MpIGZvciAoaiA9IDEsIGFyZ3MgPSBuZXcgQXJyYXkobGVuIC0xKTsgaiA8IGxlbjsgaisrKSB7XG4gICAgICAgICAgICBhcmdzW2ogLSAxXSA9IGFyZ3VtZW50c1tqXTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBsaXN0ZW5lcnNbaV0uZm4uYXBwbHkobGlzdGVuZXJzW2ldLmNvbnRleHQsIGFyZ3MpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiB0cnVlO1xufTtcblxuLyoqXG4gKiBBZGQgYSBsaXN0ZW5lciBmb3IgYSBnaXZlbiBldmVudC5cbiAqXG4gKiBAcGFyYW0geyhTdHJpbmd8U3ltYm9sKX0gZXZlbnQgVGhlIGV2ZW50IG5hbWUuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiBUaGUgbGlzdGVuZXIgZnVuY3Rpb24uXG4gKiBAcGFyYW0geyp9IFtjb250ZXh0PXRoaXNdIFRoZSBjb250ZXh0IHRvIGludm9rZSB0aGUgbGlzdGVuZXIgd2l0aC5cbiAqIEByZXR1cm5zIHtFdmVudEVtaXR0ZXJ9IGB0aGlzYC5cbiAqIEBwdWJsaWNcbiAqL1xuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5vbiA9IGZ1bmN0aW9uIG9uKGV2ZW50LCBmbiwgY29udGV4dCkge1xuICByZXR1cm4gYWRkTGlzdGVuZXIodGhpcywgZXZlbnQsIGZuLCBjb250ZXh0LCBmYWxzZSk7XG59O1xuXG4vKipcbiAqIEFkZCBhIG9uZS10aW1lIGxpc3RlbmVyIGZvciBhIGdpdmVuIGV2ZW50LlxuICpcbiAqIEBwYXJhbSB7KFN0cmluZ3xTeW1ib2wpfSBldmVudCBUaGUgZXZlbnQgbmFtZS5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIFRoZSBsaXN0ZW5lciBmdW5jdGlvbi5cbiAqIEBwYXJhbSB7Kn0gW2NvbnRleHQ9dGhpc10gVGhlIGNvbnRleHQgdG8gaW52b2tlIHRoZSBsaXN0ZW5lciB3aXRoLlxuICogQHJldHVybnMge0V2ZW50RW1pdHRlcn0gYHRoaXNgLlxuICogQHB1YmxpY1xuICovXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLm9uY2UgPSBmdW5jdGlvbiBvbmNlKGV2ZW50LCBmbiwgY29udGV4dCkge1xuICByZXR1cm4gYWRkTGlzdGVuZXIodGhpcywgZXZlbnQsIGZuLCBjb250ZXh0LCB0cnVlKTtcbn07XG5cbi8qKlxuICogUmVtb3ZlIHRoZSBsaXN0ZW5lcnMgb2YgYSBnaXZlbiBldmVudC5cbiAqXG4gKiBAcGFyYW0geyhTdHJpbmd8U3ltYm9sKX0gZXZlbnQgVGhlIGV2ZW50IG5hbWUuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiBPbmx5IHJlbW92ZSB0aGUgbGlzdGVuZXJzIHRoYXQgbWF0Y2ggdGhpcyBmdW5jdGlvbi5cbiAqIEBwYXJhbSB7Kn0gY29udGV4dCBPbmx5IHJlbW92ZSB0aGUgbGlzdGVuZXJzIHRoYXQgaGF2ZSB0aGlzIGNvbnRleHQuXG4gKiBAcGFyYW0ge0Jvb2xlYW59IG9uY2UgT25seSByZW1vdmUgb25lLXRpbWUgbGlzdGVuZXJzLlxuICogQHJldHVybnMge0V2ZW50RW1pdHRlcn0gYHRoaXNgLlxuICogQHB1YmxpY1xuICovXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLnJlbW92ZUxpc3RlbmVyID0gZnVuY3Rpb24gcmVtb3ZlTGlzdGVuZXIoZXZlbnQsIGZuLCBjb250ZXh0LCBvbmNlKSB7XG4gIHZhciBldnQgPSBwcmVmaXggPyBwcmVmaXggKyBldmVudCA6IGV2ZW50O1xuXG4gIGlmICghdGhpcy5fZXZlbnRzW2V2dF0pIHJldHVybiB0aGlzO1xuICBpZiAoIWZuKSB7XG4gICAgY2xlYXJFdmVudCh0aGlzLCBldnQpO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgdmFyIGxpc3RlbmVycyA9IHRoaXMuX2V2ZW50c1tldnRdO1xuXG4gIGlmIChsaXN0ZW5lcnMuZm4pIHtcbiAgICBpZiAoXG4gICAgICBsaXN0ZW5lcnMuZm4gPT09IGZuICYmXG4gICAgICAoIW9uY2UgfHwgbGlzdGVuZXJzLm9uY2UpICYmXG4gICAgICAoIWNvbnRleHQgfHwgbGlzdGVuZXJzLmNvbnRleHQgPT09IGNvbnRleHQpXG4gICAgKSB7XG4gICAgICBjbGVhckV2ZW50KHRoaXMsIGV2dCk7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIGZvciAodmFyIGkgPSAwLCBldmVudHMgPSBbXSwgbGVuZ3RoID0gbGlzdGVuZXJzLmxlbmd0aDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAoXG4gICAgICAgIGxpc3RlbmVyc1tpXS5mbiAhPT0gZm4gfHxcbiAgICAgICAgKG9uY2UgJiYgIWxpc3RlbmVyc1tpXS5vbmNlKSB8fFxuICAgICAgICAoY29udGV4dCAmJiBsaXN0ZW5lcnNbaV0uY29udGV4dCAhPT0gY29udGV4dClcbiAgICAgICkge1xuICAgICAgICBldmVudHMucHVzaChsaXN0ZW5lcnNbaV0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vXG4gICAgLy8gUmVzZXQgdGhlIGFycmF5LCBvciByZW1vdmUgaXQgY29tcGxldGVseSBpZiB3ZSBoYXZlIG5vIG1vcmUgbGlzdGVuZXJzLlxuICAgIC8vXG4gICAgaWYgKGV2ZW50cy5sZW5ndGgpIHRoaXMuX2V2ZW50c1tldnRdID0gZXZlbnRzLmxlbmd0aCA9PT0gMSA/IGV2ZW50c1swXSA6IGV2ZW50cztcbiAgICBlbHNlIGNsZWFyRXZlbnQodGhpcywgZXZ0KTtcbiAgfVxuXG4gIHJldHVybiB0aGlzO1xufTtcblxuLyoqXG4gKiBSZW1vdmUgYWxsIGxpc3RlbmVycywgb3IgdGhvc2Ugb2YgdGhlIHNwZWNpZmllZCBldmVudC5cbiAqXG4gKiBAcGFyYW0geyhTdHJpbmd8U3ltYm9sKX0gW2V2ZW50XSBUaGUgZXZlbnQgbmFtZS5cbiAqIEByZXR1cm5zIHtFdmVudEVtaXR0ZXJ9IGB0aGlzYC5cbiAqIEBwdWJsaWNcbiAqL1xuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5yZW1vdmVBbGxMaXN0ZW5lcnMgPSBmdW5jdGlvbiByZW1vdmVBbGxMaXN0ZW5lcnMoZXZlbnQpIHtcbiAgdmFyIGV2dDtcblxuICBpZiAoZXZlbnQpIHtcbiAgICBldnQgPSBwcmVmaXggPyBwcmVmaXggKyBldmVudCA6IGV2ZW50O1xuICAgIGlmICh0aGlzLl9ldmVudHNbZXZ0XSkgY2xlYXJFdmVudCh0aGlzLCBldnQpO1xuICB9IGVsc2Uge1xuICAgIHRoaXMuX2V2ZW50cyA9IG5ldyBFdmVudHMoKTtcbiAgICB0aGlzLl9ldmVudHNDb3VudCA9IDA7XG4gIH1cblxuICByZXR1cm4gdGhpcztcbn07XG5cbi8vXG4vLyBBbGlhcyBtZXRob2RzIG5hbWVzIGJlY2F1c2UgcGVvcGxlIHJvbGwgbGlrZSB0aGF0LlxuLy9cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUub2ZmID0gRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5yZW1vdmVMaXN0ZW5lcjtcbkV2ZW50RW1pdHRlci5wcm90b3R5cGUuYWRkTGlzdGVuZXIgPSBFdmVudEVtaXR0ZXIucHJvdG90eXBlLm9uO1xuXG4vL1xuLy8gRXhwb3NlIHRoZSBwcmVmaXguXG4vL1xuRXZlbnRFbWl0dGVyLnByZWZpeGVkID0gcHJlZml4O1xuXG4vL1xuLy8gQWxsb3cgYEV2ZW50RW1pdHRlcmAgdG8gYmUgaW1wb3J0ZWQgYXMgbW9kdWxlIG5hbWVzcGFjZS5cbi8vXG5FdmVudEVtaXR0ZXIuRXZlbnRFbWl0dGVyID0gRXZlbnRFbWl0dGVyO1xuXG4vL1xuLy8gRXhwb3NlIHRoZSBtb2R1bGUuXG4vL1xuaWYgKCd1bmRlZmluZWQnICE9PSB0eXBlb2YgbW9kdWxlKSB7XG4gIG1vZHVsZS5leHBvcnRzID0gRXZlbnRFbWl0dGVyO1xufVxuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/eventemitter3/index.js\n");

/***/ }),

/***/ "./node_modules/uuid/index.js":
/*!************************************!*\
  !*** ./node_modules/uuid/index.js ***!
  \************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("var v1 = __webpack_require__(/*! ./v1 */ \"./node_modules/uuid/v1.js\");\nvar v4 = __webpack_require__(/*! ./v4 */ \"./node_modules/uuid/v4.js\");\n\nvar uuid = v4;\nuuid.v1 = v1;\nuuid.v4 = v4;\n\nmodule.exports = uuid;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvdXVpZC9pbmRleC5qcz8xMWMxIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLFNBQVMsbUJBQU8sQ0FBQyx1Q0FBTTtBQUN2QixTQUFTLG1CQUFPLENBQUMsdUNBQU07O0FBRXZCO0FBQ0E7QUFDQTs7QUFFQSIsImZpbGUiOiIuL25vZGVfbW9kdWxlcy91dWlkL2luZGV4LmpzLmpzIiwic291cmNlc0NvbnRlbnQiOlsidmFyIHYxID0gcmVxdWlyZSgnLi92MScpO1xudmFyIHY0ID0gcmVxdWlyZSgnLi92NCcpO1xuXG52YXIgdXVpZCA9IHY0O1xudXVpZC52MSA9IHYxO1xudXVpZC52NCA9IHY0O1xuXG5tb2R1bGUuZXhwb3J0cyA9IHV1aWQ7XG4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/uuid/index.js\n");

/***/ }),

/***/ "./node_modules/uuid/lib/bytesToUuid.js":
/*!**********************************************!*\
  !*** ./node_modules/uuid/lib/bytesToUuid.js ***!
  \**********************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\nvar byteToHex = [];\nfor (var i = 0; i < 256; ++i) {\n  byteToHex[i] = (i + 0x100).toString(16).substr(1);\n}\n\nfunction bytesToUuid(buf, offset) {\n  var i = offset || 0;\n  var bth = byteToHex;\n  // join used to fix memory issue caused by concatenation: https://bugs.chromium.org/p/v8/issues/detail?id=3175#c4\n  return ([\n    bth[buf[i++]], bth[buf[i++]],\n    bth[buf[i++]], bth[buf[i++]], '-',\n    bth[buf[i++]], bth[buf[i++]], '-',\n    bth[buf[i++]], bth[buf[i++]], '-',\n    bth[buf[i++]], bth[buf[i++]], '-',\n    bth[buf[i++]], bth[buf[i++]],\n    bth[buf[i++]], bth[buf[i++]],\n    bth[buf[i++]], bth[buf[i++]]\n  ]).join('');\n}\n\nmodule.exports = bytesToUuid;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvdXVpZC9saWIvYnl0ZXNUb1V1aWQuanM/MjM2NiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxTQUFTO0FBQ3hCO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBIiwiZmlsZSI6Ii4vbm9kZV9tb2R1bGVzL3V1aWQvbGliL2J5dGVzVG9VdWlkLmpzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDb252ZXJ0IGFycmF5IG9mIDE2IGJ5dGUgdmFsdWVzIHRvIFVVSUQgc3RyaW5nIGZvcm1hdCBvZiB0aGUgZm9ybTpcbiAqIFhYWFhYWFhYLVhYWFgtWFhYWC1YWFhYLVhYWFhYWFhYWFhYWFxuICovXG52YXIgYnl0ZVRvSGV4ID0gW107XG5mb3IgKHZhciBpID0gMDsgaSA8IDI1NjsgKytpKSB7XG4gIGJ5dGVUb0hleFtpXSA9IChpICsgMHgxMDApLnRvU3RyaW5nKDE2KS5zdWJzdHIoMSk7XG59XG5cbmZ1bmN0aW9uIGJ5dGVzVG9VdWlkKGJ1Ziwgb2Zmc2V0KSB7XG4gIHZhciBpID0gb2Zmc2V0IHx8IDA7XG4gIHZhciBidGggPSBieXRlVG9IZXg7XG4gIC8vIGpvaW4gdXNlZCB0byBmaXggbWVtb3J5IGlzc3VlIGNhdXNlZCBieSBjb25jYXRlbmF0aW9uOiBodHRwczovL2J1Z3MuY2hyb21pdW0ub3JnL3AvdjgvaXNzdWVzL2RldGFpbD9pZD0zMTc1I2M0XG4gIHJldHVybiAoW1xuICAgIGJ0aFtidWZbaSsrXV0sIGJ0aFtidWZbaSsrXV0sXG4gICAgYnRoW2J1ZltpKytdXSwgYnRoW2J1ZltpKytdXSwgJy0nLFxuICAgIGJ0aFtidWZbaSsrXV0sIGJ0aFtidWZbaSsrXV0sICctJyxcbiAgICBidGhbYnVmW2krK11dLCBidGhbYnVmW2krK11dLCAnLScsXG4gICAgYnRoW2J1ZltpKytdXSwgYnRoW2J1ZltpKytdXSwgJy0nLFxuICAgIGJ0aFtidWZbaSsrXV0sIGJ0aFtidWZbaSsrXV0sXG4gICAgYnRoW2J1ZltpKytdXSwgYnRoW2J1ZltpKytdXSxcbiAgICBidGhbYnVmW2krK11dLCBidGhbYnVmW2krK11dXG4gIF0pLmpvaW4oJycpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGJ5dGVzVG9VdWlkO1xuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/uuid/lib/bytesToUuid.js\n");

/***/ }),

/***/ "./node_modules/uuid/lib/rng-browser.js":
/*!**********************************************!*\
  !*** ./node_modules/uuid/lib/rng-browser.js ***!
  \**********************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("// Unique ID creation requires a high quality random # generator.  In the\n// browser this is a little complicated due to unknown quality of Math.random()\n// and inconsistent support for the `crypto` API.  We do the best we can via\n// feature-detection\n\n// getRandomValues needs to be invoked in a context where \"this\" is a Crypto\n// implementation. Also, find the complete implementation of crypto on IE11.\nvar getRandomValues = (typeof(crypto) != 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto)) ||\n                      (typeof(msCrypto) != 'undefined' && typeof window.msCrypto.getRandomValues == 'function' && msCrypto.getRandomValues.bind(msCrypto));\n\nif (getRandomValues) {\n  // WHATWG crypto RNG - http://wiki.whatwg.org/wiki/Crypto\n  var rnds8 = new Uint8Array(16); // eslint-disable-line no-undef\n\n  module.exports = function whatwgRNG() {\n    getRandomValues(rnds8);\n    return rnds8;\n  };\n} else {\n  // Math.random()-based (RNG)\n  //\n  // If all else fails, use Math.random().  It's fast, but is of unspecified\n  // quality.\n  var rnds = new Array(16);\n\n  module.exports = function mathRNG() {\n    for (var i = 0, r; i < 16; i++) {\n      if ((i & 0x03) === 0) r = Math.random() * 0x100000000;\n      rnds[i] = r >>> ((i & 0x03) << 3) & 0xff;\n    }\n\n    return rnds;\n  };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvdXVpZC9saWIvcm5nLWJyb3dzZXIuanM/ZTFmNCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsaUNBQWlDOztBQUVqQztBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0Esc0JBQXNCLFFBQVE7QUFDOUI7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSIsImZpbGUiOiIuL25vZGVfbW9kdWxlcy91dWlkL2xpYi9ybmctYnJvd3Nlci5qcy5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vIFVuaXF1ZSBJRCBjcmVhdGlvbiByZXF1aXJlcyBhIGhpZ2ggcXVhbGl0eSByYW5kb20gIyBnZW5lcmF0b3IuICBJbiB0aGVcbi8vIGJyb3dzZXIgdGhpcyBpcyBhIGxpdHRsZSBjb21wbGljYXRlZCBkdWUgdG8gdW5rbm93biBxdWFsaXR5IG9mIE1hdGgucmFuZG9tKClcbi8vIGFuZCBpbmNvbnNpc3RlbnQgc3VwcG9ydCBmb3IgdGhlIGBjcnlwdG9gIEFQSS4gIFdlIGRvIHRoZSBiZXN0IHdlIGNhbiB2aWFcbi8vIGZlYXR1cmUtZGV0ZWN0aW9uXG5cbi8vIGdldFJhbmRvbVZhbHVlcyBuZWVkcyB0byBiZSBpbnZva2VkIGluIGEgY29udGV4dCB3aGVyZSBcInRoaXNcIiBpcyBhIENyeXB0b1xuLy8gaW1wbGVtZW50YXRpb24uIEFsc28sIGZpbmQgdGhlIGNvbXBsZXRlIGltcGxlbWVudGF0aW9uIG9mIGNyeXB0byBvbiBJRTExLlxudmFyIGdldFJhbmRvbVZhbHVlcyA9ICh0eXBlb2YoY3J5cHRvKSAhPSAndW5kZWZpbmVkJyAmJiBjcnlwdG8uZ2V0UmFuZG9tVmFsdWVzICYmIGNyeXB0by5nZXRSYW5kb21WYWx1ZXMuYmluZChjcnlwdG8pKSB8fFxuICAgICAgICAgICAgICAgICAgICAgICh0eXBlb2YobXNDcnlwdG8pICE9ICd1bmRlZmluZWQnICYmIHR5cGVvZiB3aW5kb3cubXNDcnlwdG8uZ2V0UmFuZG9tVmFsdWVzID09ICdmdW5jdGlvbicgJiYgbXNDcnlwdG8uZ2V0UmFuZG9tVmFsdWVzLmJpbmQobXNDcnlwdG8pKTtcblxuaWYgKGdldFJhbmRvbVZhbHVlcykge1xuICAvLyBXSEFUV0cgY3J5cHRvIFJORyAtIGh0dHA6Ly93aWtpLndoYXR3Zy5vcmcvd2lraS9DcnlwdG9cbiAgdmFyIHJuZHM4ID0gbmV3IFVpbnQ4QXJyYXkoMTYpOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVuZGVmXG5cbiAgbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiB3aGF0d2dSTkcoKSB7XG4gICAgZ2V0UmFuZG9tVmFsdWVzKHJuZHM4KTtcbiAgICByZXR1cm4gcm5kczg7XG4gIH07XG59IGVsc2Uge1xuICAvLyBNYXRoLnJhbmRvbSgpLWJhc2VkIChSTkcpXG4gIC8vXG4gIC8vIElmIGFsbCBlbHNlIGZhaWxzLCB1c2UgTWF0aC5yYW5kb20oKS4gIEl0J3MgZmFzdCwgYnV0IGlzIG9mIHVuc3BlY2lmaWVkXG4gIC8vIHF1YWxpdHkuXG4gIHZhciBybmRzID0gbmV3IEFycmF5KDE2KTtcblxuICBtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIG1hdGhSTkcoKSB7XG4gICAgZm9yICh2YXIgaSA9IDAsIHI7IGkgPCAxNjsgaSsrKSB7XG4gICAgICBpZiAoKGkgJiAweDAzKSA9PT0gMCkgciA9IE1hdGgucmFuZG9tKCkgKiAweDEwMDAwMDAwMDtcbiAgICAgIHJuZHNbaV0gPSByID4+PiAoKGkgJiAweDAzKSA8PCAzKSAmIDB4ZmY7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJuZHM7XG4gIH07XG59XG4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/uuid/lib/rng-browser.js\n");

/***/ }),

/***/ "./node_modules/uuid/v1.js":
/*!*********************************!*\
  !*** ./node_modules/uuid/v1.js ***!
  \*********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("var rng = __webpack_require__(/*! ./lib/rng */ \"./node_modules/uuid/lib/rng-browser.js\");\nvar bytesToUuid = __webpack_require__(/*! ./lib/bytesToUuid */ \"./node_modules/uuid/lib/bytesToUuid.js\");\n\n// **`v1()` - Generate time-based UUID**\n//\n// Inspired by https://github.com/LiosK/UUID.js\n// and http://docs.python.org/library/uuid.html\n\nvar _nodeId;\nvar _clockseq;\n\n// Previous uuid creation time\nvar _lastMSecs = 0;\nvar _lastNSecs = 0;\n\n// See https://github.com/uuidjs/uuid for API details\nfunction v1(options, buf, offset) {\n  var i = buf && offset || 0;\n  var b = buf || [];\n\n  options = options || {};\n  var node = options.node || _nodeId;\n  var clockseq = options.clockseq !== undefined ? options.clockseq : _clockseq;\n\n  // node and clockseq need to be initialized to random values if they're not\n  // specified.  We do this lazily to minimize issues related to insufficient\n  // system entropy.  See #189\n  if (node == null || clockseq == null) {\n    var seedBytes = rng();\n    if (node == null) {\n      // Per 4.5, create and 48-bit node id, (47 random bits + multicast bit = 1)\n      node = _nodeId = [\n        seedBytes[0] | 0x01,\n        seedBytes[1], seedBytes[2], seedBytes[3], seedBytes[4], seedBytes[5]\n      ];\n    }\n    if (clockseq == null) {\n      // Per 4.2.2, randomize (14 bit) clockseq\n      clockseq = _clockseq = (seedBytes[6] << 8 | seedBytes[7]) & 0x3fff;\n    }\n  }\n\n  // UUID timestamps are 100 nano-second units since the Gregorian epoch,\n  // (1582-10-15 00:00).  JSNumbers aren't precise enough for this, so\n  // time is handled internally as 'msecs' (integer milliseconds) and 'nsecs'\n  // (100-nanoseconds offset from msecs) since unix epoch, 1970-01-01 00:00.\n  var msecs = options.msecs !== undefined ? options.msecs : new Date().getTime();\n\n  // Per 4.2.1.2, use count of uuid's generated during the current clock\n  // cycle to simulate higher resolution clock\n  var nsecs = options.nsecs !== undefined ? options.nsecs : _lastNSecs + 1;\n\n  // Time since last uuid creation (in msecs)\n  var dt = (msecs - _lastMSecs) + (nsecs - _lastNSecs)/10000;\n\n  // Per 4.2.1.2, Bump clockseq on clock regression\n  if (dt < 0 && options.clockseq === undefined) {\n    clockseq = clockseq + 1 & 0x3fff;\n  }\n\n  // Reset nsecs if clock regresses (new clockseq) or we've moved onto a new\n  // time interval\n  if ((dt < 0 || msecs > _lastMSecs) && options.nsecs === undefined) {\n    nsecs = 0;\n  }\n\n  // Per 4.2.1.2 Throw error if too many uuids are requested\n  if (nsecs >= 10000) {\n    throw new Error('uuid.v1(): Can\\'t create more than 10M uuids/sec');\n  }\n\n  _lastMSecs = msecs;\n  _lastNSecs = nsecs;\n  _clockseq = clockseq;\n\n  // Per 4.1.4 - Convert from unix epoch to Gregorian epoch\n  msecs += 12219292800000;\n\n  // `time_low`\n  var tl = ((msecs & 0xfffffff) * 10000 + nsecs) % 0x100000000;\n  b[i++] = tl >>> 24 & 0xff;\n  b[i++] = tl >>> 16 & 0xff;\n  b[i++] = tl >>> 8 & 0xff;\n  b[i++] = tl & 0xff;\n\n  // `time_mid`\n  var tmh = (msecs / 0x100000000 * 10000) & 0xfffffff;\n  b[i++] = tmh >>> 8 & 0xff;\n  b[i++] = tmh & 0xff;\n\n  // `time_high_and_version`\n  b[i++] = tmh >>> 24 & 0xf | 0x10; // include version\n  b[i++] = tmh >>> 16 & 0xff;\n\n  // `clock_seq_hi_and_reserved` (Per 4.2.2 - include variant)\n  b[i++] = clockseq >>> 8 | 0x80;\n\n  // `clock_seq_low`\n  b[i++] = clockseq & 0xff;\n\n  // `node`\n  for (var n = 0; n < 6; ++n) {\n    b[i + n] = node[n];\n  }\n\n  return buf ? buf : bytesToUuid(b);\n}\n\nmodule.exports = v1;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvdXVpZC92MS5qcz9jNDM3Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLFVBQVUsbUJBQU8sQ0FBQyx5REFBVztBQUM3QixrQkFBa0IsbUJBQU8sQ0FBQyxpRUFBbUI7O0FBRTdDO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxtQ0FBbUM7QUFDbkM7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0EsaUJBQWlCLE9BQU87QUFDeEI7QUFDQTs7QUFFQTtBQUNBOztBQUVBIiwiZmlsZSI6Ii4vbm9kZV9tb2R1bGVzL3V1aWQvdjEuanMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgcm5nID0gcmVxdWlyZSgnLi9saWIvcm5nJyk7XG52YXIgYnl0ZXNUb1V1aWQgPSByZXF1aXJlKCcuL2xpYi9ieXRlc1RvVXVpZCcpO1xuXG4vLyAqKmB2MSgpYCAtIEdlbmVyYXRlIHRpbWUtYmFzZWQgVVVJRCoqXG4vL1xuLy8gSW5zcGlyZWQgYnkgaHR0cHM6Ly9naXRodWIuY29tL0xpb3NLL1VVSUQuanNcbi8vIGFuZCBodHRwOi8vZG9jcy5weXRob24ub3JnL2xpYnJhcnkvdXVpZC5odG1sXG5cbnZhciBfbm9kZUlkO1xudmFyIF9jbG9ja3NlcTtcblxuLy8gUHJldmlvdXMgdXVpZCBjcmVhdGlvbiB0aW1lXG52YXIgX2xhc3RNU2VjcyA9IDA7XG52YXIgX2xhc3ROU2VjcyA9IDA7XG5cbi8vIFNlZSBodHRwczovL2dpdGh1Yi5jb20vdXVpZGpzL3V1aWQgZm9yIEFQSSBkZXRhaWxzXG5mdW5jdGlvbiB2MShvcHRpb25zLCBidWYsIG9mZnNldCkge1xuICB2YXIgaSA9IGJ1ZiAmJiBvZmZzZXQgfHwgMDtcbiAgdmFyIGIgPSBidWYgfHwgW107XG5cbiAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gIHZhciBub2RlID0gb3B0aW9ucy5ub2RlIHx8IF9ub2RlSWQ7XG4gIHZhciBjbG9ja3NlcSA9IG9wdGlvbnMuY2xvY2tzZXEgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuY2xvY2tzZXEgOiBfY2xvY2tzZXE7XG5cbiAgLy8gbm9kZSBhbmQgY2xvY2tzZXEgbmVlZCB0byBiZSBpbml0aWFsaXplZCB0byByYW5kb20gdmFsdWVzIGlmIHRoZXkncmUgbm90XG4gIC8vIHNwZWNpZmllZC4gIFdlIGRvIHRoaXMgbGF6aWx5IHRvIG1pbmltaXplIGlzc3VlcyByZWxhdGVkIHRvIGluc3VmZmljaWVudFxuICAvLyBzeXN0ZW0gZW50cm9weS4gIFNlZSAjMTg5XG4gIGlmIChub2RlID09IG51bGwgfHwgY2xvY2tzZXEgPT0gbnVsbCkge1xuICAgIHZhciBzZWVkQnl0ZXMgPSBybmcoKTtcbiAgICBpZiAobm9kZSA9PSBudWxsKSB7XG4gICAgICAvLyBQZXIgNC41LCBjcmVhdGUgYW5kIDQ4LWJpdCBub2RlIGlkLCAoNDcgcmFuZG9tIGJpdHMgKyBtdWx0aWNhc3QgYml0ID0gMSlcbiAgICAgIG5vZGUgPSBfbm9kZUlkID0gW1xuICAgICAgICBzZWVkQnl0ZXNbMF0gfCAweDAxLFxuICAgICAgICBzZWVkQnl0ZXNbMV0sIHNlZWRCeXRlc1syXSwgc2VlZEJ5dGVzWzNdLCBzZWVkQnl0ZXNbNF0sIHNlZWRCeXRlc1s1XVxuICAgICAgXTtcbiAgICB9XG4gICAgaWYgKGNsb2Nrc2VxID09IG51bGwpIHtcbiAgICAgIC8vIFBlciA0LjIuMiwgcmFuZG9taXplICgxNCBiaXQpIGNsb2Nrc2VxXG4gICAgICBjbG9ja3NlcSA9IF9jbG9ja3NlcSA9IChzZWVkQnl0ZXNbNl0gPDwgOCB8IHNlZWRCeXRlc1s3XSkgJiAweDNmZmY7XG4gICAgfVxuICB9XG5cbiAgLy8gVVVJRCB0aW1lc3RhbXBzIGFyZSAxMDAgbmFuby1zZWNvbmQgdW5pdHMgc2luY2UgdGhlIEdyZWdvcmlhbiBlcG9jaCxcbiAgLy8gKDE1ODItMTAtMTUgMDA6MDApLiAgSlNOdW1iZXJzIGFyZW4ndCBwcmVjaXNlIGVub3VnaCBmb3IgdGhpcywgc29cbiAgLy8gdGltZSBpcyBoYW5kbGVkIGludGVybmFsbHkgYXMgJ21zZWNzJyAoaW50ZWdlciBtaWxsaXNlY29uZHMpIGFuZCAnbnNlY3MnXG4gIC8vICgxMDAtbmFub3NlY29uZHMgb2Zmc2V0IGZyb20gbXNlY3MpIHNpbmNlIHVuaXggZXBvY2gsIDE5NzAtMDEtMDEgMDA6MDAuXG4gIHZhciBtc2VjcyA9IG9wdGlvbnMubXNlY3MgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMubXNlY3MgOiBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcblxuICAvLyBQZXIgNC4yLjEuMiwgdXNlIGNvdW50IG9mIHV1aWQncyBnZW5lcmF0ZWQgZHVyaW5nIHRoZSBjdXJyZW50IGNsb2NrXG4gIC8vIGN5Y2xlIHRvIHNpbXVsYXRlIGhpZ2hlciByZXNvbHV0aW9uIGNsb2NrXG4gIHZhciBuc2VjcyA9IG9wdGlvbnMubnNlY3MgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMubnNlY3MgOiBfbGFzdE5TZWNzICsgMTtcblxuICAvLyBUaW1lIHNpbmNlIGxhc3QgdXVpZCBjcmVhdGlvbiAoaW4gbXNlY3MpXG4gIHZhciBkdCA9IChtc2VjcyAtIF9sYXN0TVNlY3MpICsgKG5zZWNzIC0gX2xhc3ROU2VjcykvMTAwMDA7XG5cbiAgLy8gUGVyIDQuMi4xLjIsIEJ1bXAgY2xvY2tzZXEgb24gY2xvY2sgcmVncmVzc2lvblxuICBpZiAoZHQgPCAwICYmIG9wdGlvbnMuY2xvY2tzZXEgPT09IHVuZGVmaW5lZCkge1xuICAgIGNsb2Nrc2VxID0gY2xvY2tzZXEgKyAxICYgMHgzZmZmO1xuICB9XG5cbiAgLy8gUmVzZXQgbnNlY3MgaWYgY2xvY2sgcmVncmVzc2VzIChuZXcgY2xvY2tzZXEpIG9yIHdlJ3ZlIG1vdmVkIG9udG8gYSBuZXdcbiAgLy8gdGltZSBpbnRlcnZhbFxuICBpZiAoKGR0IDwgMCB8fCBtc2VjcyA+IF9sYXN0TVNlY3MpICYmIG9wdGlvbnMubnNlY3MgPT09IHVuZGVmaW5lZCkge1xuICAgIG5zZWNzID0gMDtcbiAgfVxuXG4gIC8vIFBlciA0LjIuMS4yIFRocm93IGVycm9yIGlmIHRvbyBtYW55IHV1aWRzIGFyZSByZXF1ZXN0ZWRcbiAgaWYgKG5zZWNzID49IDEwMDAwKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCd1dWlkLnYxKCk6IENhblxcJ3QgY3JlYXRlIG1vcmUgdGhhbiAxME0gdXVpZHMvc2VjJyk7XG4gIH1cblxuICBfbGFzdE1TZWNzID0gbXNlY3M7XG4gIF9sYXN0TlNlY3MgPSBuc2VjcztcbiAgX2Nsb2Nrc2VxID0gY2xvY2tzZXE7XG5cbiAgLy8gUGVyIDQuMS40IC0gQ29udmVydCBmcm9tIHVuaXggZXBvY2ggdG8gR3JlZ29yaWFuIGVwb2NoXG4gIG1zZWNzICs9IDEyMjE5MjkyODAwMDAwO1xuXG4gIC8vIGB0aW1lX2xvd2BcbiAgdmFyIHRsID0gKChtc2VjcyAmIDB4ZmZmZmZmZikgKiAxMDAwMCArIG5zZWNzKSAlIDB4MTAwMDAwMDAwO1xuICBiW2krK10gPSB0bCA+Pj4gMjQgJiAweGZmO1xuICBiW2krK10gPSB0bCA+Pj4gMTYgJiAweGZmO1xuICBiW2krK10gPSB0bCA+Pj4gOCAmIDB4ZmY7XG4gIGJbaSsrXSA9IHRsICYgMHhmZjtcblxuICAvLyBgdGltZV9taWRgXG4gIHZhciB0bWggPSAobXNlY3MgLyAweDEwMDAwMDAwMCAqIDEwMDAwKSAmIDB4ZmZmZmZmZjtcbiAgYltpKytdID0gdG1oID4+PiA4ICYgMHhmZjtcbiAgYltpKytdID0gdG1oICYgMHhmZjtcblxuICAvLyBgdGltZV9oaWdoX2FuZF92ZXJzaW9uYFxuICBiW2krK10gPSB0bWggPj4+IDI0ICYgMHhmIHwgMHgxMDsgLy8gaW5jbHVkZSB2ZXJzaW9uXG4gIGJbaSsrXSA9IHRtaCA+Pj4gMTYgJiAweGZmO1xuXG4gIC8vIGBjbG9ja19zZXFfaGlfYW5kX3Jlc2VydmVkYCAoUGVyIDQuMi4yIC0gaW5jbHVkZSB2YXJpYW50KVxuICBiW2krK10gPSBjbG9ja3NlcSA+Pj4gOCB8IDB4ODA7XG5cbiAgLy8gYGNsb2NrX3NlcV9sb3dgXG4gIGJbaSsrXSA9IGNsb2Nrc2VxICYgMHhmZjtcblxuICAvLyBgbm9kZWBcbiAgZm9yICh2YXIgbiA9IDA7IG4gPCA2OyArK24pIHtcbiAgICBiW2kgKyBuXSA9IG5vZGVbbl07XG4gIH1cblxuICByZXR1cm4gYnVmID8gYnVmIDogYnl0ZXNUb1V1aWQoYik7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gdjE7XG4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/uuid/v1.js\n");

/***/ }),

/***/ "./node_modules/uuid/v4.js":
/*!*********************************!*\
  !*** ./node_modules/uuid/v4.js ***!
  \*********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("var rng = __webpack_require__(/*! ./lib/rng */ \"./node_modules/uuid/lib/rng-browser.js\");\nvar bytesToUuid = __webpack_require__(/*! ./lib/bytesToUuid */ \"./node_modules/uuid/lib/bytesToUuid.js\");\n\nfunction v4(options, buf, offset) {\n  var i = buf && offset || 0;\n\n  if (typeof(options) == 'string') {\n    buf = options === 'binary' ? new Array(16) : null;\n    options = null;\n  }\n  options = options || {};\n\n  var rnds = options.random || (options.rng || rng)();\n\n  // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n  rnds[6] = (rnds[6] & 0x0f) | 0x40;\n  rnds[8] = (rnds[8] & 0x3f) | 0x80;\n\n  // Copy bytes to buffer, if provided\n  if (buf) {\n    for (var ii = 0; ii < 16; ++ii) {\n      buf[i + ii] = rnds[ii];\n    }\n  }\n\n  return buf || bytesToUuid(rnds);\n}\n\nmodule.exports = v4;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvdXVpZC92NC5qcz9jNjRlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLFVBQVUsbUJBQU8sQ0FBQyx5REFBVztBQUM3QixrQkFBa0IsbUJBQU8sQ0FBQyxpRUFBbUI7O0FBRTdDO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLG9CQUFvQixTQUFTO0FBQzdCO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBIiwiZmlsZSI6Ii4vbm9kZV9tb2R1bGVzL3V1aWQvdjQuanMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgcm5nID0gcmVxdWlyZSgnLi9saWIvcm5nJyk7XG52YXIgYnl0ZXNUb1V1aWQgPSByZXF1aXJlKCcuL2xpYi9ieXRlc1RvVXVpZCcpO1xuXG5mdW5jdGlvbiB2NChvcHRpb25zLCBidWYsIG9mZnNldCkge1xuICB2YXIgaSA9IGJ1ZiAmJiBvZmZzZXQgfHwgMDtcblxuICBpZiAodHlwZW9mKG9wdGlvbnMpID09ICdzdHJpbmcnKSB7XG4gICAgYnVmID0gb3B0aW9ucyA9PT0gJ2JpbmFyeScgPyBuZXcgQXJyYXkoMTYpIDogbnVsbDtcbiAgICBvcHRpb25zID0gbnVsbDtcbiAgfVxuICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcblxuICB2YXIgcm5kcyA9IG9wdGlvbnMucmFuZG9tIHx8IChvcHRpb25zLnJuZyB8fCBybmcpKCk7XG5cbiAgLy8gUGVyIDQuNCwgc2V0IGJpdHMgZm9yIHZlcnNpb24gYW5kIGBjbG9ja19zZXFfaGlfYW5kX3Jlc2VydmVkYFxuICBybmRzWzZdID0gKHJuZHNbNl0gJiAweDBmKSB8IDB4NDA7XG4gIHJuZHNbOF0gPSAocm5kc1s4XSAmIDB4M2YpIHwgMHg4MDtcblxuICAvLyBDb3B5IGJ5dGVzIHRvIGJ1ZmZlciwgaWYgcHJvdmlkZWRcbiAgaWYgKGJ1Zikge1xuICAgIGZvciAodmFyIGlpID0gMDsgaWkgPCAxNjsgKytpaSkge1xuICAgICAgYnVmW2kgKyBpaV0gPSBybmRzW2lpXTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gYnVmIHx8IGJ5dGVzVG9VdWlkKHJuZHMpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHY0O1xuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/uuid/v4.js\n");

/***/ }),

/***/ "./src/css-color-names.json":
/*!**********************************!*\
  !*** ./src/css-color-names.json ***!
  \**********************************/
/*! exports provided: aliceblue, antiquewhite, aqua, aquamarine, azure, beige, bisque, black, blanchedalmond, blue, blueviolet, brown, burlywood, cadetblue, chartreuse, chocolate, coral, cornflowerblue, cornsilk, crimson, cyan, darkblue, darkcyan, darkgoldenrod, darkgray, darkgreen, darkgrey, darkkhaki, darkmagenta, darkolivegreen, darkorange, darkorchid, darkred, darksalmon, darkseagreen, darkslateblue, darkslategray, darkslategrey, darkturquoise, darkviolet, deeppink, deepskyblue, dimgray, dimgrey, dodgerblue, firebrick, floralwhite, forestgreen, fuchsia, gainsboro, ghostwhite, goldenrod, gold, gray, green, greenyellow, grey, honeydew, hotpink, indianred, indigo, ivory, khaki, lavenderblush, lavender, lawngreen, lemonchiffon, lightblue, lightcoral, lightcyan, lightgoldenrodyellow, lightgray, lightgreen, lightgrey, lightpink, lightsalmon, lightseagreen, lightskyblue, lightslategray, lightslategrey, lightsteelblue, lightyellow, lime, limegreen, linen, magenta, maroon, mediumaquamarine, mediumblue, mediumorchid, mediumpurple, mediumseagreen, mediumslateblue, mediumspringgreen, mediumturquoise, mediumvioletred, midnightblue, mintcream, mistyrose, moccasin, navajowhite, navy, oldlace, olive, olivedrab, orange, orangered, orchid, palegoldenrod, palegreen, paleturquoise, palevioletred, papayawhip, peachpuff, peru, pink, plum, powderblue, purple, rebeccapurple, red, rosybrown, royalblue, saddlebrown, salmon, sandybrown, seagreen, seashell, sienna, silver, skyblue, slateblue, slategray, slategrey, snow, springgreen, steelblue, tan, teal, thistle, tomato, turquoise, violet, wheat, white, whitesmoke, yellow, yellowgreen, default */
/***/ (function(module) {

eval("module.exports = JSON.parse(\"{\\\"aliceblue\\\":\\\"#f0f8ff\\\",\\\"antiquewhite\\\":\\\"#faebd7\\\",\\\"aqua\\\":\\\"#00ffff\\\",\\\"aquamarine\\\":\\\"#7fffd4\\\",\\\"azure\\\":\\\"#f0ffff\\\",\\\"beige\\\":\\\"#f5f5dc\\\",\\\"bisque\\\":\\\"#ffe4c4\\\",\\\"black\\\":\\\"#000000\\\",\\\"blanchedalmond\\\":\\\"#ffebcd\\\",\\\"blue\\\":\\\"#0000ff\\\",\\\"blueviolet\\\":\\\"#8a2be2\\\",\\\"brown\\\":\\\"#a52a2a\\\",\\\"burlywood\\\":\\\"#deb887\\\",\\\"cadetblue\\\":\\\"#5f9ea0\\\",\\\"chartreuse\\\":\\\"#7fff00\\\",\\\"chocolate\\\":\\\"#d2691e\\\",\\\"coral\\\":\\\"#ff7f50\\\",\\\"cornflowerblue\\\":\\\"#6495ed\\\",\\\"cornsilk\\\":\\\"#fff8dc\\\",\\\"crimson\\\":\\\"#dc143c\\\",\\\"cyan\\\":\\\"#00ffff\\\",\\\"darkblue\\\":\\\"#00008b\\\",\\\"darkcyan\\\":\\\"#008b8b\\\",\\\"darkgoldenrod\\\":\\\"#b8860b\\\",\\\"darkgray\\\":\\\"#a9a9a9\\\",\\\"darkgreen\\\":\\\"#006400\\\",\\\"darkgrey\\\":\\\"#a9a9a9\\\",\\\"darkkhaki\\\":\\\"#bdb76b\\\",\\\"darkmagenta\\\":\\\"#8b008b\\\",\\\"darkolivegreen\\\":\\\"#556b2f\\\",\\\"darkorange\\\":\\\"#ff8c00\\\",\\\"darkorchid\\\":\\\"#9932cc\\\",\\\"darkred\\\":\\\"#8b0000\\\",\\\"darksalmon\\\":\\\"#e9967a\\\",\\\"darkseagreen\\\":\\\"#8fbc8f\\\",\\\"darkslateblue\\\":\\\"#483d8b\\\",\\\"darkslategray\\\":\\\"#2f4f4f\\\",\\\"darkslategrey\\\":\\\"#2f4f4f\\\",\\\"darkturquoise\\\":\\\"#00ced1\\\",\\\"darkviolet\\\":\\\"#9400d3\\\",\\\"deeppink\\\":\\\"#ff1493\\\",\\\"deepskyblue\\\":\\\"#00bfff\\\",\\\"dimgray\\\":\\\"#696969\\\",\\\"dimgrey\\\":\\\"#696969\\\",\\\"dodgerblue\\\":\\\"#1e90ff\\\",\\\"firebrick\\\":\\\"#b22222\\\",\\\"floralwhite\\\":\\\"#fffaf0\\\",\\\"forestgreen\\\":\\\"#228b22\\\",\\\"fuchsia\\\":\\\"#ff00ff\\\",\\\"gainsboro\\\":\\\"#dcdcdc\\\",\\\"ghostwhite\\\":\\\"#f8f8ff\\\",\\\"goldenrod\\\":\\\"#daa520\\\",\\\"gold\\\":\\\"#ffd700\\\",\\\"gray\\\":\\\"#808080\\\",\\\"green\\\":\\\"#008000\\\",\\\"greenyellow\\\":\\\"#adff2f\\\",\\\"grey\\\":\\\"#808080\\\",\\\"honeydew\\\":\\\"#f0fff0\\\",\\\"hotpink\\\":\\\"#ff69b4\\\",\\\"indianred\\\":\\\"#cd5c5c\\\",\\\"indigo\\\":\\\"#4b0082\\\",\\\"ivory\\\":\\\"#fffff0\\\",\\\"khaki\\\":\\\"#f0e68c\\\",\\\"lavenderblush\\\":\\\"#fff0f5\\\",\\\"lavender\\\":\\\"#e6e6fa\\\",\\\"lawngreen\\\":\\\"#7cfc00\\\",\\\"lemonchiffon\\\":\\\"#fffacd\\\",\\\"lightblue\\\":\\\"#add8e6\\\",\\\"lightcoral\\\":\\\"#f08080\\\",\\\"lightcyan\\\":\\\"#e0ffff\\\",\\\"lightgoldenrodyellow\\\":\\\"#fafad2\\\",\\\"lightgray\\\":\\\"#d3d3d3\\\",\\\"lightgreen\\\":\\\"#90ee90\\\",\\\"lightgrey\\\":\\\"#d3d3d3\\\",\\\"lightpink\\\":\\\"#ffb6c1\\\",\\\"lightsalmon\\\":\\\"#ffa07a\\\",\\\"lightseagreen\\\":\\\"#20b2aa\\\",\\\"lightskyblue\\\":\\\"#87cefa\\\",\\\"lightslategray\\\":\\\"#778899\\\",\\\"lightslategrey\\\":\\\"#778899\\\",\\\"lightsteelblue\\\":\\\"#b0c4de\\\",\\\"lightyellow\\\":\\\"#ffffe0\\\",\\\"lime\\\":\\\"#00ff00\\\",\\\"limegreen\\\":\\\"#32cd32\\\",\\\"linen\\\":\\\"#faf0e6\\\",\\\"magenta\\\":\\\"#ff00ff\\\",\\\"maroon\\\":\\\"#800000\\\",\\\"mediumaquamarine\\\":\\\"#66cdaa\\\",\\\"mediumblue\\\":\\\"#0000cd\\\",\\\"mediumorchid\\\":\\\"#ba55d3\\\",\\\"mediumpurple\\\":\\\"#9370db\\\",\\\"mediumseagreen\\\":\\\"#3cb371\\\",\\\"mediumslateblue\\\":\\\"#7b68ee\\\",\\\"mediumspringgreen\\\":\\\"#00fa9a\\\",\\\"mediumturquoise\\\":\\\"#48d1cc\\\",\\\"mediumvioletred\\\":\\\"#c71585\\\",\\\"midnightblue\\\":\\\"#191970\\\",\\\"mintcream\\\":\\\"#f5fffa\\\",\\\"mistyrose\\\":\\\"#ffe4e1\\\",\\\"moccasin\\\":\\\"#ffe4b5\\\",\\\"navajowhite\\\":\\\"#ffdead\\\",\\\"navy\\\":\\\"#000080\\\",\\\"oldlace\\\":\\\"#fdf5e6\\\",\\\"olive\\\":\\\"#808000\\\",\\\"olivedrab\\\":\\\"#6b8e23\\\",\\\"orange\\\":\\\"#ffa500\\\",\\\"orangered\\\":\\\"#ff4500\\\",\\\"orchid\\\":\\\"#da70d6\\\",\\\"palegoldenrod\\\":\\\"#eee8aa\\\",\\\"palegreen\\\":\\\"#98fb98\\\",\\\"paleturquoise\\\":\\\"#afeeee\\\",\\\"palevioletred\\\":\\\"#db7093\\\",\\\"papayawhip\\\":\\\"#ffefd5\\\",\\\"peachpuff\\\":\\\"#ffdab9\\\",\\\"peru\\\":\\\"#cd853f\\\",\\\"pink\\\":\\\"#ffc0cb\\\",\\\"plum\\\":\\\"#dda0dd\\\",\\\"powderblue\\\":\\\"#b0e0e6\\\",\\\"purple\\\":\\\"#800080\\\",\\\"rebeccapurple\\\":\\\"#663399\\\",\\\"red\\\":\\\"#ff0000\\\",\\\"rosybrown\\\":\\\"#bc8f8f\\\",\\\"royalblue\\\":\\\"#4169e1\\\",\\\"saddlebrown\\\":\\\"#8b4513\\\",\\\"salmon\\\":\\\"#fa8072\\\",\\\"sandybrown\\\":\\\"#f4a460\\\",\\\"seagreen\\\":\\\"#2e8b57\\\",\\\"seashell\\\":\\\"#fff5ee\\\",\\\"sienna\\\":\\\"#a0522d\\\",\\\"silver\\\":\\\"#c0c0c0\\\",\\\"skyblue\\\":\\\"#87ceeb\\\",\\\"slateblue\\\":\\\"#6a5acd\\\",\\\"slategray\\\":\\\"#708090\\\",\\\"slategrey\\\":\\\"#708090\\\",\\\"snow\\\":\\\"#fffafa\\\",\\\"springgreen\\\":\\\"#00ff7f\\\",\\\"steelblue\\\":\\\"#4682b4\\\",\\\"tan\\\":\\\"#d2b48c\\\",\\\"teal\\\":\\\"#008080\\\",\\\"thistle\\\":\\\"#d8bfd8\\\",\\\"tomato\\\":\\\"#ff6347\\\",\\\"turquoise\\\":\\\"#40e0d0\\\",\\\"violet\\\":\\\"#ee82ee\\\",\\\"wheat\\\":\\\"#f5deb3\\\",\\\"white\\\":\\\"#ffffff\\\",\\\"whitesmoke\\\":\\\"#f5f5f5\\\",\\\"yellow\\\":\\\"#ffff00\\\",\\\"yellowgreen\\\":\\\"#9acd32\\\"}\");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiIuL3NyYy9jc3MtY29sb3ItbmFtZXMuanNvbi5qcyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/css-color-names.json\n");

/***/ }),

/***/ "./src/history.js":
/*!************************!*\
  !*** ./src/history.js ***!
  \************************/
/*! exports provided: History */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"History\", function() { return History; });\n/* harmony import */ var _indexedDB__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./indexedDB */ \"./src/indexedDB.js\");\n\r\n\r\nclass History {\r\n    constructor(){ \r\n        this.store = new _indexedDB__WEBPACK_IMPORTED_MODULE_0__[\"IndexedDBStorage\"](\"sseq-repl-history\", 2);\r\n        this.databaseReady = this.openDatabase();\r\n        this.historyStrings = [];\r\n        this.temporaryValues = [];\r\n        this.stringsFromStorage = [];\r\n        this.undoStack = [];\r\n        this.redoStack = [];\r\n        window.addEventListener(\"pagehide\", this.stowHistory.bind(this));;\r\n    }\r\n\r\n    async getItem(key){\r\n        await this.databaseReady;\r\n        if(key in this.temporaryValues){\r\n            return this.temporaryValues[key];\r\n        } \r\n        if(key in this.historyStrings){\r\n            return this.historyStrings[key];\r\n        } \r\n        if(key in this.stringsFromStorage){\r\n            return this.stringsFromStorage[key];\r\n        }\r\n        await this.store.open();\r\n        this.stringsFromStorage[key] = await this.store.readTransaction().getItem(key);\r\n        return this.stringsFromStorage[key];\r\n    }\r\n\r\n    async openDatabase(){\r\n        await this.store.open();\r\n        await this.commitStowedHistories();\r\n        this.storedHistoryLength = (await this.store.readTransaction().getItem(\"length\")) || 0;\r\n        this.idx = this.storedHistoryLength;\r\n    }\r\n\r\n    get length(){\r\n        return this.historyStrings.length || this.storedHistoryLength;\r\n    }\r\n\r\n    async push(value){\r\n        value = value.trim();\r\n        await this.databaseReady;\r\n        let mostRecentValue = await this.getItem(this.length - 1);\r\n        // If we use the same command twice, don't add another to history.\r\n        if(value !== mostRecentValue){\r\n            this.historyStrings[this.length] = value;\r\n        }\r\n        this.idx = this.length;\r\n        this.temporaryValues = [];\r\n        this.undoStack = [];\r\n        this.redoStack = [];        \r\n    }\r\n\r\n    step(didx) {\r\n\t\tlet oldIdx = this.idx;\r\n\t\tthis.idx = Math.min(Math.max(this.idx + didx, 0), this.length);\r\n        if(this.idx === oldIdx){\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tthis.redoStack = [];\r\n        this.undoStack.push(didx);\r\n        return true;\r\n    }\r\n    \r\n    get value(){\r\n        return this.getItem(this.idx);\r\n    }\r\n\r\n    setTemporaryValue(value){\r\n        this.temporaryValues[this.idx] = value;\r\n    }\r\n\r\n    undoStep(){\r\n        let didx = this.undoStack.pop();\r\n        this.idx -= didx;\r\n        this.redoStack.push(didx);\r\n    }\r\n\r\n    redoStep(){\r\n        let didx = this.redoStack.pop();\r\n        this.historyIdx += didx;\r\n        this.undoStack.push(didx);\r\n    }\r\n\r\n    static get stowagePrefix(){\r\n        return \"history-stowage-\";\r\n    }\r\n\r\n    stowHistory(){\r\n        let toStow = [];\r\n        this.historyStrings.forEach((e) => toStow.push(e));\r\n        if(toStow.length === 0){\r\n            return;\r\n        }\r\n        localStorage.setItem(`${History.stowagePrefix}${Date.now()}`, JSON.stringify(toStow));\r\n    }\r\n\r\n    async commitStowedHistories(){\r\n        // Don't await this.databaseReady; we are getting called inside of openDatabase\r\n        // so that would deadlock.\r\n        let keysToStore = [];\r\n        for(let i=0; i < localStorage.length; i++){\r\n            let key = localStorage.key(i);\r\n            if(key.startsWith(History.stowagePrefix)){\r\n                keysToStore.push(Number(key.slice(History.stowagePrefix.length)));\r\n            }\r\n        }\r\n        keysToStore.sort((a,b) => a-b);\r\n        if(keysToStore.length === 0){\r\n            return;\r\n        }\r\n        let transaction = this.store.writeTransaction();\r\n        let lastCommitTime = (await transaction.getItem(\"lastCommitTime\")) || 0;\r\n        let length = (await transaction.getItem(\"length\")) || 0;\r\n        let requests = [];\r\n        keysToStore = keysToStore.filter(v => v > lastCommitTime);\r\n        for(let key of keysToStore){\r\n            let localStorageKey = `${History.stowagePrefix}${key}`;\r\n            let stowedHistory = JSON.parse(localStorage.getItem(localStorageKey));\r\n            // console.log(stowedHistory);\r\n            localStorage.removeItem(localStorageKey);\r\n            for(let histItem of stowedHistory){\r\n                requests.push(transaction.setItem(length, histItem));\r\n                length++;\r\n            }\r\n        }\r\n        let newLastCommitTime = keysToStore[keysToStore.length - 1];\r\n        requests.push(transaction.setItem(\"length\", length));\r\n        requests.push(transaction.setItem(\"lastCommitTime\", newLastCommitTime));\r\n        await Promise.all(requests);\r\n    }\r\n\r\n}\r\n\r\nwindow.History = History;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvaGlzdG9yeS5qcz83Mjc3Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUErQzs7QUFFeEM7QUFDUCxrQjtBQUNBLHlCQUF5QiwyREFBZ0I7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFM7QUFDQTtBQUNBO0FBQ0EsUztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQyxzQkFBc0IsRUFBRSxXQUFXO0FBQ25FOztBQUVBO0FBQ0EsMENBQTBDO0FBQzFDO0FBQ0E7QUFDQSxvQkFBb0IseUJBQXlCO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFDQUFxQyxzQkFBc0IsRUFBRSxJQUFJO0FBQ2pFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBIiwiZmlsZSI6Ii4vc3JjL2hpc3RvcnkuanMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBJbmRleGVkREJTdG9yYWdlIH0gZnJvbSBcIi4vaW5kZXhlZERCXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgSGlzdG9yeSB7XHJcbiAgICBjb25zdHJ1Y3RvcigpeyBcclxuICAgICAgICB0aGlzLnN0b3JlID0gbmV3IEluZGV4ZWREQlN0b3JhZ2UoXCJzc2VxLXJlcGwtaGlzdG9yeVwiLCAyKTtcclxuICAgICAgICB0aGlzLmRhdGFiYXNlUmVhZHkgPSB0aGlzLm9wZW5EYXRhYmFzZSgpO1xyXG4gICAgICAgIHRoaXMuaGlzdG9yeVN0cmluZ3MgPSBbXTtcclxuICAgICAgICB0aGlzLnRlbXBvcmFyeVZhbHVlcyA9IFtdO1xyXG4gICAgICAgIHRoaXMuc3RyaW5nc0Zyb21TdG9yYWdlID0gW107XHJcbiAgICAgICAgdGhpcy51bmRvU3RhY2sgPSBbXTtcclxuICAgICAgICB0aGlzLnJlZG9TdGFjayA9IFtdO1xyXG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicGFnZWhpZGVcIiwgdGhpcy5zdG93SGlzdG9yeS5iaW5kKHRoaXMpKTs7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgZ2V0SXRlbShrZXkpe1xyXG4gICAgICAgIGF3YWl0IHRoaXMuZGF0YWJhc2VSZWFkeTtcclxuICAgICAgICBpZihrZXkgaW4gdGhpcy50ZW1wb3JhcnlWYWx1ZXMpe1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy50ZW1wb3JhcnlWYWx1ZXNba2V5XTtcclxuICAgICAgICB9IFxyXG4gICAgICAgIGlmKGtleSBpbiB0aGlzLmhpc3RvcnlTdHJpbmdzKXtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaGlzdG9yeVN0cmluZ3Nba2V5XTtcclxuICAgICAgICB9IFxyXG4gICAgICAgIGlmKGtleSBpbiB0aGlzLnN0cmluZ3NGcm9tU3RvcmFnZSl7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnN0cmluZ3NGcm9tU3RvcmFnZVtrZXldO1xyXG4gICAgICAgIH1cclxuICAgICAgICBhd2FpdCB0aGlzLnN0b3JlLm9wZW4oKTtcclxuICAgICAgICB0aGlzLnN0cmluZ3NGcm9tU3RvcmFnZVtrZXldID0gYXdhaXQgdGhpcy5zdG9yZS5yZWFkVHJhbnNhY3Rpb24oKS5nZXRJdGVtKGtleSk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RyaW5nc0Zyb21TdG9yYWdlW2tleV07XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgb3BlbkRhdGFiYXNlKCl7XHJcbiAgICAgICAgYXdhaXQgdGhpcy5zdG9yZS5vcGVuKCk7XHJcbiAgICAgICAgYXdhaXQgdGhpcy5jb21taXRTdG93ZWRIaXN0b3JpZXMoKTtcclxuICAgICAgICB0aGlzLnN0b3JlZEhpc3RvcnlMZW5ndGggPSAoYXdhaXQgdGhpcy5zdG9yZS5yZWFkVHJhbnNhY3Rpb24oKS5nZXRJdGVtKFwibGVuZ3RoXCIpKSB8fCAwO1xyXG4gICAgICAgIHRoaXMuaWR4ID0gdGhpcy5zdG9yZWRIaXN0b3J5TGVuZ3RoO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBsZW5ndGgoKXtcclxuICAgICAgICByZXR1cm4gdGhpcy5oaXN0b3J5U3RyaW5ncy5sZW5ndGggfHwgdGhpcy5zdG9yZWRIaXN0b3J5TGVuZ3RoO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIHB1c2godmFsdWUpe1xyXG4gICAgICAgIHZhbHVlID0gdmFsdWUudHJpbSgpO1xyXG4gICAgICAgIGF3YWl0IHRoaXMuZGF0YWJhc2VSZWFkeTtcclxuICAgICAgICBsZXQgbW9zdFJlY2VudFZhbHVlID0gYXdhaXQgdGhpcy5nZXRJdGVtKHRoaXMubGVuZ3RoIC0gMSk7XHJcbiAgICAgICAgLy8gSWYgd2UgdXNlIHRoZSBzYW1lIGNvbW1hbmQgdHdpY2UsIGRvbid0IGFkZCBhbm90aGVyIHRvIGhpc3RvcnkuXHJcbiAgICAgICAgaWYodmFsdWUgIT09IG1vc3RSZWNlbnRWYWx1ZSl7XHJcbiAgICAgICAgICAgIHRoaXMuaGlzdG9yeVN0cmluZ3NbdGhpcy5sZW5ndGhdID0gdmFsdWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuaWR4ID0gdGhpcy5sZW5ndGg7XHJcbiAgICAgICAgdGhpcy50ZW1wb3JhcnlWYWx1ZXMgPSBbXTtcclxuICAgICAgICB0aGlzLnVuZG9TdGFjayA9IFtdO1xyXG4gICAgICAgIHRoaXMucmVkb1N0YWNrID0gW107ICAgICAgICBcclxuICAgIH1cclxuXHJcbiAgICBzdGVwKGRpZHgpIHtcclxuXHRcdGxldCBvbGRJZHggPSB0aGlzLmlkeDtcclxuXHRcdHRoaXMuaWR4ID0gTWF0aC5taW4oTWF0aC5tYXgodGhpcy5pZHggKyBkaWR4LCAwKSwgdGhpcy5sZW5ndGgpO1xyXG4gICAgICAgIGlmKHRoaXMuaWR4ID09PSBvbGRJZHgpe1xyXG5cdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHR9XHJcblx0XHR0aGlzLnJlZG9TdGFjayA9IFtdO1xyXG4gICAgICAgIHRoaXMudW5kb1N0YWNrLnB1c2goZGlkeCk7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGdldCB2YWx1ZSgpe1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldEl0ZW0odGhpcy5pZHgpO1xyXG4gICAgfVxyXG5cclxuICAgIHNldFRlbXBvcmFyeVZhbHVlKHZhbHVlKXtcclxuICAgICAgICB0aGlzLnRlbXBvcmFyeVZhbHVlc1t0aGlzLmlkeF0gPSB2YWx1ZTtcclxuICAgIH1cclxuXHJcbiAgICB1bmRvU3RlcCgpe1xyXG4gICAgICAgIGxldCBkaWR4ID0gdGhpcy51bmRvU3RhY2sucG9wKCk7XHJcbiAgICAgICAgdGhpcy5pZHggLT0gZGlkeDtcclxuICAgICAgICB0aGlzLnJlZG9TdGFjay5wdXNoKGRpZHgpO1xyXG4gICAgfVxyXG5cclxuICAgIHJlZG9TdGVwKCl7XHJcbiAgICAgICAgbGV0IGRpZHggPSB0aGlzLnJlZG9TdGFjay5wb3AoKTtcclxuICAgICAgICB0aGlzLmhpc3RvcnlJZHggKz0gZGlkeDtcclxuICAgICAgICB0aGlzLnVuZG9TdGFjay5wdXNoKGRpZHgpO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBnZXQgc3Rvd2FnZVByZWZpeCgpe1xyXG4gICAgICAgIHJldHVybiBcImhpc3Rvcnktc3Rvd2FnZS1cIjtcclxuICAgIH1cclxuXHJcbiAgICBzdG93SGlzdG9yeSgpe1xyXG4gICAgICAgIGxldCB0b1N0b3cgPSBbXTtcclxuICAgICAgICB0aGlzLmhpc3RvcnlTdHJpbmdzLmZvckVhY2goKGUpID0+IHRvU3Rvdy5wdXNoKGUpKTtcclxuICAgICAgICBpZih0b1N0b3cubGVuZ3RoID09PSAwKXtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShgJHtIaXN0b3J5LnN0b3dhZ2VQcmVmaXh9JHtEYXRlLm5vdygpfWAsIEpTT04uc3RyaW5naWZ5KHRvU3RvdykpO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIGNvbW1pdFN0b3dlZEhpc3Rvcmllcygpe1xyXG4gICAgICAgIC8vIERvbid0IGF3YWl0IHRoaXMuZGF0YWJhc2VSZWFkeTsgd2UgYXJlIGdldHRpbmcgY2FsbGVkIGluc2lkZSBvZiBvcGVuRGF0YWJhc2VcclxuICAgICAgICAvLyBzbyB0aGF0IHdvdWxkIGRlYWRsb2NrLlxyXG4gICAgICAgIGxldCBrZXlzVG9TdG9yZSA9IFtdO1xyXG4gICAgICAgIGZvcihsZXQgaT0wOyBpIDwgbG9jYWxTdG9yYWdlLmxlbmd0aDsgaSsrKXtcclxuICAgICAgICAgICAgbGV0IGtleSA9IGxvY2FsU3RvcmFnZS5rZXkoaSk7XHJcbiAgICAgICAgICAgIGlmKGtleS5zdGFydHNXaXRoKEhpc3Rvcnkuc3Rvd2FnZVByZWZpeCkpe1xyXG4gICAgICAgICAgICAgICAga2V5c1RvU3RvcmUucHVzaChOdW1iZXIoa2V5LnNsaWNlKEhpc3Rvcnkuc3Rvd2FnZVByZWZpeC5sZW5ndGgpKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAga2V5c1RvU3RvcmUuc29ydCgoYSxiKSA9PiBhLWIpO1xyXG4gICAgICAgIGlmKGtleXNUb1N0b3JlLmxlbmd0aCA9PT0gMCl7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IHRyYW5zYWN0aW9uID0gdGhpcy5zdG9yZS53cml0ZVRyYW5zYWN0aW9uKCk7XHJcbiAgICAgICAgbGV0IGxhc3RDb21taXRUaW1lID0gKGF3YWl0IHRyYW5zYWN0aW9uLmdldEl0ZW0oXCJsYXN0Q29tbWl0VGltZVwiKSkgfHwgMDtcclxuICAgICAgICBsZXQgbGVuZ3RoID0gKGF3YWl0IHRyYW5zYWN0aW9uLmdldEl0ZW0oXCJsZW5ndGhcIikpIHx8IDA7XHJcbiAgICAgICAgbGV0IHJlcXVlc3RzID0gW107XHJcbiAgICAgICAga2V5c1RvU3RvcmUgPSBrZXlzVG9TdG9yZS5maWx0ZXIodiA9PiB2ID4gbGFzdENvbW1pdFRpbWUpO1xyXG4gICAgICAgIGZvcihsZXQga2V5IG9mIGtleXNUb1N0b3JlKXtcclxuICAgICAgICAgICAgbGV0IGxvY2FsU3RvcmFnZUtleSA9IGAke0hpc3Rvcnkuc3Rvd2FnZVByZWZpeH0ke2tleX1gO1xyXG4gICAgICAgICAgICBsZXQgc3Rvd2VkSGlzdG9yeSA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0obG9jYWxTdG9yYWdlS2V5KSk7XHJcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHN0b3dlZEhpc3RvcnkpO1xyXG4gICAgICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShsb2NhbFN0b3JhZ2VLZXkpO1xyXG4gICAgICAgICAgICBmb3IobGV0IGhpc3RJdGVtIG9mIHN0b3dlZEhpc3Rvcnkpe1xyXG4gICAgICAgICAgICAgICAgcmVxdWVzdHMucHVzaCh0cmFuc2FjdGlvbi5zZXRJdGVtKGxlbmd0aCwgaGlzdEl0ZW0pKTtcclxuICAgICAgICAgICAgICAgIGxlbmd0aCsrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCBuZXdMYXN0Q29tbWl0VGltZSA9IGtleXNUb1N0b3JlW2tleXNUb1N0b3JlLmxlbmd0aCAtIDFdO1xyXG4gICAgICAgIHJlcXVlc3RzLnB1c2godHJhbnNhY3Rpb24uc2V0SXRlbShcImxlbmd0aFwiLCBsZW5ndGgpKTtcclxuICAgICAgICByZXF1ZXN0cy5wdXNoKHRyYW5zYWN0aW9uLnNldEl0ZW0oXCJsYXN0Q29tbWl0VGltZVwiLCBuZXdMYXN0Q29tbWl0VGltZSkpO1xyXG4gICAgICAgIGF3YWl0IFByb21pc2UuYWxsKHJlcXVlc3RzKTtcclxuICAgIH1cclxuXHJcbn1cclxuXHJcbndpbmRvdy5IaXN0b3J5ID0gSGlzdG9yeTsiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/history.js\n");

/***/ }),

/***/ "./src/index.js":
/*!**********************!*\
  !*** ./src/index.js ***!
  \**********************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _pythonExecutor__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./pythonExecutor */ \"./src/pythonExecutor.js\");\n/* harmony import */ var _repl__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./repl */ \"./src/repl.js\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./utils */ \"./src/utils.js\");\n\r\n\r\n\r\n\r\nasync function main(){\r\n    let registration;\r\n    try {\r\n        registration = await navigator.serviceWorker.register(\"service_worker.bundle.js\", { scope: '.' });\r\n    } catch(e){\r\n        console.error('Error loading service worker!', err);\r\n        return;\r\n    }\r\n\r\n    try {\r\n        console.log('Service worker loaded', registration);\r\n    \r\n        if(navigator.serviceWorker.controller === null){\r\n            window.loadingWidget.addLoadingMessage(\"Waiting for service worker (try refreshing page if it hangs here).\");\r\n            await new Promise(resolve => navigator.serviceWorker.oncontrollerchange = resolve );\r\n            window.loadingWidget.addLoadingMessage(\"Service worker ready.\");\r\n        }\r\n        let executor  = new _pythonExecutor__WEBPACK_IMPORTED_MODULE_0__[\"PythonExecutor\"]();\r\n        await Object(_utils__WEBPACK_IMPORTED_MODULE_2__[\"sleep\"])(100);\r\n        document.querySelector(\"repl-terminal\").start(executor);\r\n    } catch(e) {\r\n        window.loadingWidget.loadingFailed(e);\r\n        throw e;\r\n    }\r\n}\r\nmain();//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvaW5kZXguanM/YjYzNSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFrRDtBQUNiO0FBQ0w7O0FBRWhDO0FBQ0E7QUFDQTtBQUNBLDJGQUEyRixhQUFhO0FBQ3hHLEtBQUs7QUFDTDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLDhEQUFjO0FBQzFDLGNBQWMsb0RBQUs7QUFDbkI7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsImZpbGUiOiIuL3NyYy9pbmRleC5qcy5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFB5dGhvbkV4ZWN1dG9yIH0gZnJvbSBcIi4vcHl0aG9uRXhlY3V0b3JcIjtcclxuaW1wb3J0IHsgUmVwbEVsZW1lbnQgfSBmcm9tIFwiLi9yZXBsXCI7XHJcbmltcG9ydCB7IHNsZWVwIH0gZnJvbSBcIi4vdXRpbHNcIjtcclxuXHJcbmFzeW5jIGZ1bmN0aW9uIG1haW4oKXtcclxuICAgIGxldCByZWdpc3RyYXRpb247XHJcbiAgICB0cnkge1xyXG4gICAgICAgIHJlZ2lzdHJhdGlvbiA9IGF3YWl0IG5hdmlnYXRvci5zZXJ2aWNlV29ya2VyLnJlZ2lzdGVyKFwic2VydmljZV93b3JrZXIuYnVuZGxlLmpzXCIsIHsgc2NvcGU6ICcuJyB9KTtcclxuICAgIH0gY2F0Y2goZSl7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgbG9hZGluZyBzZXJ2aWNlIHdvcmtlciEnLCBlcnIpO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdTZXJ2aWNlIHdvcmtlciBsb2FkZWQnLCByZWdpc3RyYXRpb24pO1xyXG4gICAgXHJcbiAgICAgICAgaWYobmF2aWdhdG9yLnNlcnZpY2VXb3JrZXIuY29udHJvbGxlciA9PT0gbnVsbCl7XHJcbiAgICAgICAgICAgIHdpbmRvdy5sb2FkaW5nV2lkZ2V0LmFkZExvYWRpbmdNZXNzYWdlKFwiV2FpdGluZyBmb3Igc2VydmljZSB3b3JrZXIgKHRyeSByZWZyZXNoaW5nIHBhZ2UgaWYgaXQgaGFuZ3MgaGVyZSkuXCIpO1xyXG4gICAgICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IG5hdmlnYXRvci5zZXJ2aWNlV29ya2VyLm9uY29udHJvbGxlcmNoYW5nZSA9IHJlc29sdmUgKTtcclxuICAgICAgICAgICAgd2luZG93LmxvYWRpbmdXaWRnZXQuYWRkTG9hZGluZ01lc3NhZ2UoXCJTZXJ2aWNlIHdvcmtlciByZWFkeS5cIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCBleGVjdXRvciAgPSBuZXcgUHl0aG9uRXhlY3V0b3IoKTtcclxuICAgICAgICBhd2FpdCBzbGVlcCgxMDApO1xyXG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJyZXBsLXRlcm1pbmFsXCIpLnN0YXJ0KGV4ZWN1dG9yKTtcclxuICAgIH0gY2F0Y2goZSkge1xyXG4gICAgICAgIHdpbmRvdy5sb2FkaW5nV2lkZ2V0LmxvYWRpbmdGYWlsZWQoZSk7XHJcbiAgICAgICAgdGhyb3cgZTtcclxuICAgIH1cclxufVxyXG5tYWluKCk7Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/index.js\n");

/***/ }),

/***/ "./src/indexedDB.js":
/*!**************************!*\
  !*** ./src/indexedDB.js ***!
  \**************************/
/*! exports provided: IndexedDBStorage, IndexedDBTransaction */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"IndexedDBStorage\", function() { return IndexedDBStorage; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"IndexedDBTransaction\", function() { return IndexedDBTransaction; });\nfunction openDatabase(name, version){\r\n    const request = indexedDB.open(name, version);\r\n    request.onupgradeneeded = (e) => {\r\n        const db = e.target.result;\r\n\r\n        // Delete the old datastore.\r\n        if (db.objectStoreNames.contains(name)) {\r\n            db.deleteObjectStore(name);\r\n        }\r\n\r\n        // Create a new datastore.\r\n        const store = db.createObjectStore(name, {\r\n            keyPath: 'key'\r\n        });\r\n\r\n        store.createIndex(\"key\", \"key\",  { unique: true });\r\n    };\r\n    return new Promise((resolve, reject) => {\r\n        request.onsuccess = (e) => resolve(e.target.result);    \r\n        request.onerror = reject;\r\n    });\r\n}\r\n\r\n\r\nclass IndexedDBStorage {\r\n    constructor(name, version){\r\n        this.name = name;\r\n        this.version = version;\r\n    }\r\n\r\n    async open() {\r\n        if(this.datastore){\r\n            return;\r\n        }\r\n        this.datastore = await openDatabase(this.name, this.version);\r\n    }\r\n\r\n    readTransaction(){\r\n        return new IndexedDBTransaction(\r\n            this.datastore.transaction([this.name], 'readonly').objectStore(this.name), \r\n            false\r\n        );\r\n    }\r\n\r\n    writeTransaction(){\r\n        return new IndexedDBTransaction(\r\n            this.datastore.transaction([this.name], 'readwrite').objectStore(this.name), \r\n            true\r\n        );\r\n    }\r\n}\r\n\r\nclass IndexedDBTransaction {\r\n    constructor(objectStore, mutable){\r\n        this.objectStore = objectStore;\r\n        this.mutable = mutable;\r\n    }\r\n    \r\n    getItem(key){\r\n        const objectStoreRequest = this.objectStore.index(\"key\").get(key);\r\n        return new Promise((resolve, reject) => {\r\n            objectStoreRequest.onsuccess = function (e) {\r\n                resolve(objectStoreRequest.result && objectStoreRequest.result.value);\r\n            };\r\n            objectStoreRequest.onerror = reject;\r\n        });\r\n    }\r\n    \r\n    setItem(key, value){\r\n        if(!this.mutable){\r\n            throw new Error(\"Attempted to mutate using immutable database reference.\");\r\n        }\r\n        const timestamp = new Date().getTime();\r\n        const item = { key, value, timestamp };\r\n        const request = this.objectStore.put(item);\r\n        return new Promise((resolve, reject) => {\r\n            request.onsuccess = function (e) {\r\n                resolve(item);\r\n            };    \r\n            request.onerror = reject;\r\n        });\r\n    }\r\n    \r\n    deleteItem(key){\r\n        const request = this.objectStore.delete(key);\r\n            \r\n        return new Promise((resolve, reject) => {\r\n            request.onsuccess = function (e) {\r\n                resolve();\r\n            };\r\n            request.onerror = reject;\r\n        });\r\n    }\r\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvaW5kZXhlZERCLmpzPzQ2YTQiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsU0FBUzs7QUFFVCwwQ0FBMEMsZUFBZTtBQUN6RDtBQUNBO0FBQ0EsNEQ7QUFDQTtBQUNBLEtBQUs7QUFDTDs7O0FBR087QUFDUDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQjtBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGM7QUFDQTtBQUNBLFNBQVM7QUFDVDs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSIsImZpbGUiOiIuL3NyYy9pbmRleGVkREIuanMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJmdW5jdGlvbiBvcGVuRGF0YWJhc2UobmFtZSwgdmVyc2lvbil7XHJcbiAgICBjb25zdCByZXF1ZXN0ID0gaW5kZXhlZERCLm9wZW4obmFtZSwgdmVyc2lvbik7XHJcbiAgICByZXF1ZXN0Lm9udXBncmFkZW5lZWRlZCA9IChlKSA9PiB7XHJcbiAgICAgICAgY29uc3QgZGIgPSBlLnRhcmdldC5yZXN1bHQ7XHJcblxyXG4gICAgICAgIC8vIERlbGV0ZSB0aGUgb2xkIGRhdGFzdG9yZS5cclxuICAgICAgICBpZiAoZGIub2JqZWN0U3RvcmVOYW1lcy5jb250YWlucyhuYW1lKSkge1xyXG4gICAgICAgICAgICBkYi5kZWxldGVPYmplY3RTdG9yZShuYW1lKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIENyZWF0ZSBhIG5ldyBkYXRhc3RvcmUuXHJcbiAgICAgICAgY29uc3Qgc3RvcmUgPSBkYi5jcmVhdGVPYmplY3RTdG9yZShuYW1lLCB7XHJcbiAgICAgICAgICAgIGtleVBhdGg6ICdrZXknXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHN0b3JlLmNyZWF0ZUluZGV4KFwia2V5XCIsIFwia2V5XCIsICB7IHVuaXF1ZTogdHJ1ZSB9KTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgIHJlcXVlc3Qub25zdWNjZXNzID0gKGUpID0+IHJlc29sdmUoZS50YXJnZXQucmVzdWx0KTsgICAgXHJcbiAgICAgICAgcmVxdWVzdC5vbmVycm9yID0gcmVqZWN0O1xyXG4gICAgfSk7XHJcbn1cclxuXHJcblxyXG5leHBvcnQgY2xhc3MgSW5kZXhlZERCU3RvcmFnZSB7XHJcbiAgICBjb25zdHJ1Y3RvcihuYW1lLCB2ZXJzaW9uKXtcclxuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xyXG4gICAgICAgIHRoaXMudmVyc2lvbiA9IHZlcnNpb247XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgb3BlbigpIHtcclxuICAgICAgICBpZih0aGlzLmRhdGFzdG9yZSl7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5kYXRhc3RvcmUgPSBhd2FpdCBvcGVuRGF0YWJhc2UodGhpcy5uYW1lLCB0aGlzLnZlcnNpb24pO1xyXG4gICAgfVxyXG5cclxuICAgIHJlYWRUcmFuc2FjdGlvbigpe1xyXG4gICAgICAgIHJldHVybiBuZXcgSW5kZXhlZERCVHJhbnNhY3Rpb24oXHJcbiAgICAgICAgICAgIHRoaXMuZGF0YXN0b3JlLnRyYW5zYWN0aW9uKFt0aGlzLm5hbWVdLCAncmVhZG9ubHknKS5vYmplY3RTdG9yZSh0aGlzLm5hbWUpLCBcclxuICAgICAgICAgICAgZmFsc2VcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIHdyaXRlVHJhbnNhY3Rpb24oKXtcclxuICAgICAgICByZXR1cm4gbmV3IEluZGV4ZWREQlRyYW5zYWN0aW9uKFxyXG4gICAgICAgICAgICB0aGlzLmRhdGFzdG9yZS50cmFuc2FjdGlvbihbdGhpcy5uYW1lXSwgJ3JlYWR3cml0ZScpLm9iamVjdFN0b3JlKHRoaXMubmFtZSksIFxyXG4gICAgICAgICAgICB0cnVlXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIEluZGV4ZWREQlRyYW5zYWN0aW9uIHtcclxuICAgIGNvbnN0cnVjdG9yKG9iamVjdFN0b3JlLCBtdXRhYmxlKXtcclxuICAgICAgICB0aGlzLm9iamVjdFN0b3JlID0gb2JqZWN0U3RvcmU7XHJcbiAgICAgICAgdGhpcy5tdXRhYmxlID0gbXV0YWJsZTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgZ2V0SXRlbShrZXkpe1xyXG4gICAgICAgIGNvbnN0IG9iamVjdFN0b3JlUmVxdWVzdCA9IHRoaXMub2JqZWN0U3RvcmUuaW5kZXgoXCJrZXlcIikuZ2V0KGtleSk7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICAgICAgb2JqZWN0U3RvcmVSZXF1ZXN0Lm9uc3VjY2VzcyA9IGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgICAgICByZXNvbHZlKG9iamVjdFN0b3JlUmVxdWVzdC5yZXN1bHQgJiYgb2JqZWN0U3RvcmVSZXF1ZXN0LnJlc3VsdC52YWx1ZSk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIG9iamVjdFN0b3JlUmVxdWVzdC5vbmVycm9yID0gcmVqZWN0O1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBzZXRJdGVtKGtleSwgdmFsdWUpe1xyXG4gICAgICAgIGlmKCF0aGlzLm11dGFibGUpe1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJBdHRlbXB0ZWQgdG8gbXV0YXRlIHVzaW5nIGltbXV0YWJsZSBkYXRhYmFzZSByZWZlcmVuY2UuXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCB0aW1lc3RhbXAgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcclxuICAgICAgICBjb25zdCBpdGVtID0geyBrZXksIHZhbHVlLCB0aW1lc3RhbXAgfTtcclxuICAgICAgICBjb25zdCByZXF1ZXN0ID0gdGhpcy5vYmplY3RTdG9yZS5wdXQoaXRlbSk7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICAgICAgcmVxdWVzdC5vbnN1Y2Nlc3MgPSBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZShpdGVtKTtcclxuICAgICAgICAgICAgfTsgICAgXHJcbiAgICAgICAgICAgIHJlcXVlc3Qub25lcnJvciA9IHJlamVjdDtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgZGVsZXRlSXRlbShrZXkpe1xyXG4gICAgICAgIGNvbnN0IHJlcXVlc3QgPSB0aGlzLm9iamVjdFN0b3JlLmRlbGV0ZShrZXkpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgICAgICByZXF1ZXN0Lm9uc3VjY2VzcyA9IGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgICAgICByZXNvbHZlKCk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHJlcXVlc3Qub25lcnJvciA9IHJlamVjdDtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/indexedDB.js\n");

/***/ }),

/***/ "./src/monaco.js":
/*!***********************************************************!*\
  !*** delegated ./src/monaco.js from dll-reference monaco ***!
  \***********************************************************/
/*! exports provided: monaco */
/***/ (function(module, exports, __webpack_require__) {

eval("module.exports = (__webpack_require__(/*! dll-reference monaco */ \"dll-reference monaco\"))(183);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vZGVsZWdhdGVkIC4vc3JjL21vbmFjby5qcyBmcm9tIGRsbC1yZWZlcmVuY2UgbW9uYWNvP2ViNTkiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEiLCJmaWxlIjoiLi9zcmMvbW9uYWNvLmpzLmpzIiwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPSAoX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgZGxsLXJlZmVyZW5jZSBtb25hY28gKi8gXCJkbGwtcmVmZXJlbmNlIG1vbmFjb1wiKSkoMTgzKTsiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/monaco.js\n");

/***/ }),

/***/ "./src/pythonExecutor.js":
/*!*******************************!*\
  !*** ./src/pythonExecutor.js ***!
  \*******************************/
/*! exports provided: PythonExecutor, Execution, Completer */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"PythonExecutor\", function() { return PythonExecutor; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Execution\", function() { return Execution; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Completer\", function() { return Completer; });\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! uuid */ \"./node_modules/uuid/index.js\");\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(uuid__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utils */ \"./src/utils.js\");\n/* harmony import */ var eventemitter3__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! eventemitter3 */ \"./node_modules/eventemitter3/index.js\");\n/* harmony import */ var eventemitter3__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(eventemitter3__WEBPACK_IMPORTED_MODULE_2__);\n// import Worker from './pyodide.worker.js';\r\n\r\n\r\n\r\n\r\nfunction createInterruptBuffer(){\r\n    if(window.SharedArrayBuffer){\r\n        return new Int32Array(new SharedArrayBuffer(4));\r\n    } else {\r\n        return new Int32Array(new ArrayBuffer(4));\r\n    }\r\n}\r\n\r\nclass PythonExecutor {\r\n    constructor(){\r\n        this.executions = {};\r\n        this.completers = {};\r\n        window.loadingWidget.addLoadingMessage(\"Loading Pyodide\");\r\n        this.pyodide_worker = new Worker(\"pyodide_worker.bundle.js\");\r\n        this.pyodide_worker.addEventListener(\"message\", this._handlePyodideMessage.bind(this));\r\n        // The pyodide worker needs to be able to send messages to the service worker, so we make a channel\r\n        // and send one end to the service worker and the other to the pyodide worker.\r\n        navigator.serviceWorker.addEventListener(\"message\", this._handleServiceWorkerMessage.bind(this))\r\n\r\n        let _readyPromise = new Promise((resolve, reject) => this._readyPromise = {resolve, reject});\r\n        this._readyPromise.promise = _readyPromise;\r\n    }\r\n\r\n    async ready(){\r\n        return await this._readyPromise.promise;\r\n    }\r\n\r\n    execute(code){\r\n        const interrupt_buffer = createInterruptBuffer();\r\n        const uuid = Object(uuid__WEBPACK_IMPORTED_MODULE_0__[\"v4\"])();\r\n        const execution = new Execution(interrupt_buffer);\r\n        this.executions[uuid] = execution;\r\n        this._postMessage(\"execute\", uuid, {code, interrupt_buffer});\r\n        return execution;\r\n    }\r\n\r\n    new_completer(){\r\n        const uuid = Object(uuid__WEBPACK_IMPORTED_MODULE_0__[\"v4\"])();\r\n        const completer = new Completer(this, uuid);\r\n        this.completers[uuid] = completer;\r\n        this._postMessage(\"complete\", uuid, {subcmd : \"new_completer\"});\r\n        return completer;\r\n    }    \r\n\r\n    _postMessage(cmd, uuid, msg){\r\n        Object.assign(msg, {cmd, uuid});\r\n        this.pyodide_worker.postMessage(msg);\r\n    }\r\n\r\n    _handleServiceWorkerMessage(event){\r\n        if(event.data.cmd !== \"connect_to_pyodide\"){\r\n            throw Error(\"Unexpected command from service worker!\");\r\n        }\r\n        this._handleServiceWorkerConnection(event);\r\n    }\r\n\r\n    _handleServiceWorkerConnection(event){\r\n        console.log(\"handle service worker connection\");\r\n        let msg = event.data;\r\n        let { port, repl_id } = msg;\r\n        this.pyodide_worker.postMessage({\r\n            cmd : \"service_worker_channel\", \r\n            port,\r\n            repl_id\r\n        }, [port]);\r\n    }\r\n\r\n    _handlePyodideMessage(event){\r\n        let message = event.data;\r\n        let message_cmd = message.cmd;\r\n        let subhandlers = {\r\n            execute : \"_handleExecutionMessage\",\r\n            complete : \"_handleCompletionMessage\",\r\n            ready : \"_handleReadyMessage\",\r\n            file_picker : \"_file_picker\",\r\n            request_handle_permission : \"_handleRequestHandlePermission\",\r\n            loadingMessage : \"_handleLoadingMessage\",\r\n            loadingError : \"_handleLoadingError\",\r\n        };\r\n        let subhandler_name = subhandlers[message_cmd];\r\n        if(!subhandler_name){\r\n            throw new Error(`Unknown command \"${message_cmd}\"`);\r\n        }\r\n        this[subhandler_name](message);\r\n    }\r\n\r\n    async _file_picker(message){\r\n        let pickerFunction = { directory : showDirectoryPicker, read : showOpenFilePicker, readwrite : showSaveFilePicker}[message.type];\r\n        try {\r\n            let handle = await pickerFunction();\r\n            if(message.type !== \"read\"){\r\n                // In case \"read\", it returns a list.\r\n                // In remaining cases, it returns a single handle.\r\n                // Allow more consistent handling by always giving a list.\r\n                handle = [handle]; \r\n            }\r\n            this._postMessage(\"respondToQuery\", message.uuid, { handle });\r\n        } catch(error){\r\n            this._postMessage(\"respondToQuery\", message.uuid, { error });\r\n        }\r\n    }\r\n\r\n    _handleLoadingMessage(message){\r\n        window.loadingWidget.addLoadingMessage(message.text);\r\n    }\r\n\r\n    _handleLoadingError(message){\r\n        console.error(message);\r\n        throw Error(\"TODO: handle me!\");\r\n    }\r\n    \r\n    async _handleRequestHandlePermission(message){\r\n        let { uuid, handle, mode } = message;\r\n        let status = await handle.requestPermission({mode});\r\n        this._postMessage({\r\n            cmd : \"respondToQuery\",\r\n            uuid,\r\n            status,\r\n        });\r\n    }\r\n    \r\n    _handleReadyMessage(message){\r\n        if(message.exception){\r\n            this._readyPromise.reject(message.exception);\r\n            return;\r\n        }\r\n        window.loadingWidget.addLoadingMessage(\"Pyodide is ready!\");\r\n        this._readyPromise.resolve();\r\n    }\r\n\r\n    _handleExecutionMessage(message){\r\n        // execution messages get emitted on the execution object.\r\n        const { uuid, subcmd, last_response } = message;\r\n        const execution = this.executions[uuid];\r\n        if(!execution){\r\n            throw new Error(`Invalid execution uuid \"${uuid}\"`);\r\n        }\r\n        // Check if there is a handler for the given command, otherwise fail.\r\n        // All messages are meant to be handled.\r\n        if(execution.listenerCount(subcmd) === 0) {\r\n            throw new Error(`Unexpected command \"${subcmd}\"`);\r\n        }\r\n        execution.emit(subcmd, message);\r\n        if(last_response){\r\n            execution._close();\r\n            delete this.executions[uuid];\r\n        }\r\n    }\r\n\r\n    _handleCompletionMessage(message){\r\n        const { uuid, subcmd } = message;\r\n        const completer = this.completers[uuid];\r\n        if(!completer){\r\n            throw new Error(`Invalid completer uuid \"${uuid}\"`);\r\n        }\r\n        if(completer.listenerCount(subcmd) === 0) {\r\n            throw new Error(`Unexpected command \"${subcmd}\"`);\r\n        }\r\n        completer.emit(subcmd, message);\r\n    }\r\n}\r\n\r\nclass Execution extends eventemitter3__WEBPACK_IMPORTED_MODULE_2__[\"EventEmitter\"] {\r\n    /* An execution object. This is for attaching handlers / giving out promises for various lifecycle events of the execution.\r\n       The execution object is created and scheduled by PythonExecutor.execute. Other files do not construct these directly.\r\n       The Executor also dispatches messages from the pyodide worker to the appropriate execution.\r\n       See the python file \"execution.py\" for when python generates the messages this is responding to.\r\n    */\r\n    constructor(interrupt_buffer){\r\n        super();\r\n        this.interrupt_buffer = interrupt_buffer;\r\n        // Using \"once\" here helps us throw a useful error if some logic error causes the pyodide worker to send \r\n        // the same event twice.\r\n        this._validate_syntax = new Promise((resolve, reject) => {\r\n            this.once(\"validate_syntax\", resolve);\r\n        });\r\n        this._result = new Promise((resolve, reject) => {\r\n            this.once(\"result\", (message) => resolve(message.result));\r\n            this.once(\"exception\", (message) => reject(message));\r\n            this.once(\"keyboard_interrupt\", (message) => reject(message));\r\n        });\r\n    }\r\n    \r\n    async validate_syntax(){\r\n        return await this._validate_syntax;\r\n    }\r\n\r\n    async result(){\r\n        return await this._result;\r\n    }\r\n\r\n    setInterrupt(i){\r\n        this.interrupt_buffer[0] = i;\r\n        // Atomics.notify(this.interrupt_buffer, 0);\r\n    }\r\n\r\n    keyboardInterrupt(){\r\n        this.setInterrupt(2); // SIGINT\r\n    }\r\n\r\n    onStdout(handler, context){\r\n        this.on(\"stdout\", function(message) { \r\n            handler.call(this, message.data); \r\n        }, context);\r\n    }\r\n\r\n    ignoreStdout(){\r\n        this.on(\"stdout\", () => undefined);\r\n    }\r\n\r\n    onStderr(handler, context){\r\n        this.on(\"stderr\", function(message) { \r\n            handler.call(this, message.data); \r\n        }, context);\r\n    }\r\n\r\n    ignoreStderr(){\r\n        this.on(\"stderr\", () => undefined);\r\n    }\r\n\r\n    _close(){\r\n        \r\n    }    \r\n}\r\n\r\nclass Completer extends eventemitter3__WEBPACK_IMPORTED_MODULE_2__[\"EventEmitter\"] {\r\n    constructor(executor, uuid){\r\n        super();\r\n        this.executor = executor;\r\n        this.uuid = uuid;\r\n        this.responses = {};\r\n        for(let cmd of [\"signatures\", \"completions\", \"completion_detail\"]){\r\n            this._attachResponseHandler(cmd);\r\n        }\r\n    }\r\n\r\n    async getSignatures(code, position, cancellation_token){\r\n        let [subuuid, response_promise] = this._getResponsePromise(\"signatures\");\r\n        let {lineNumber, column} = position;\r\n        let interrupt_buffer = createInterruptBuffer();\r\n        cancellation_token.onCancellationRequested(() => {interrupt_buffer[0] = 2});\r\n        this._postMessage(\"signatures\", { subuuid, interrupt_buffer, code, lineNumber, column });\r\n        return await response_promise;\r\n    }\r\n\r\n    async getCompletions(code, position, cancellation_token){\r\n        let [subuuid, response_promise] = this._getResponsePromise(\"completions\");\r\n        let interrupt_buffer = createInterruptBuffer();\r\n        cancellation_token.onCancellationRequested(() => {interrupt_buffer[0] = 2});\r\n        let {lineNumber, column} = position;\r\n        this._postMessage(\"completions\", { subuuid,  interrupt_buffer, code, lineNumber, column });\r\n        return await response_promise;\r\n    }\r\n\r\n    async getCompletionInfo(state_id, idx, cancellation_token){\r\n        let [subuuid, response_promise] = this._getResponsePromise(\"completion_detail\");\r\n        let interrupt_buffer = createInterruptBuffer();\r\n        cancellation_token.onCancellationRequested(() => {interrupt_buffer[0] = 2});\r\n        this._postMessage(\"completion_detail\", { subuuid, interrupt_buffer, idx, state_id });\r\n        return await response_promise;\r\n    }\r\n\r\n    close(){\r\n        delete this.executor.completers[this.uuid];\r\n        delete this.executor;\r\n    }    \r\n\r\n    _attachResponseHandler(cmd){\r\n        this.on(cmd, (msg) => {\r\n            let promise_obj = this.responses[msg.subuuid];\r\n            if(!promise_obj){\r\n                throw Error(`Unknown subuuid ${subuuid}`);\r\n            }\r\n            if(cmd !== promise_obj.cmd) {\r\n                throw new Error(`Wrong command for response subuuid ${subuuid}. Was expecting command to be \"${cmd}\" but got \"${promise_obj.cmd}\"`);\r\n            }\r\n            promise_obj.resolve(msg);\r\n        });\r\n    }\r\n\r\n    _getResponsePromise(cmd){\r\n        let subuuid = Object(uuid__WEBPACK_IMPORTED_MODULE_0__[\"v4\"])();\r\n        return [subuuid, new Promise((resolve, reject) => \r\n            this.responses[subuuid] = {resolve, reject, cmd }\r\n        )];\r\n    }\r\n\r\n    _postMessage(subcmd, msg){\r\n        Object.assign(msg, {subcmd});\r\n        this.executor._postMessage(\"complete\", this.uuid, msg);\r\n    }\r\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvcHl0aG9uRXhlY3V0b3IuanM/YWYwNiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNtQztBQUNIO0FBQ2E7O0FBRTdDO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7O0FBRU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsbUZBQW1GLGdCQUFnQjtBQUNuRztBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EscUJBQXFCLCtDQUFLO0FBQzFCO0FBQ0E7QUFDQSw0Q0FBNEMsdUJBQXVCO0FBQ25FO0FBQ0E7O0FBRUE7QUFDQSxxQkFBcUIsK0NBQUs7QUFDMUI7QUFDQTtBQUNBLDZDQUE2Qyx5QkFBeUI7QUFDdEU7QUFDQSxLOztBQUVBO0FBQ0EsNEJBQTRCLFVBQVU7QUFDdEM7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsYUFBYSxnQkFBZ0I7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdEQUFnRCxZQUFZO0FBQzVEO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLDhCQUE4Qiw0RkFBNEY7QUFDMUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0M7QUFDQTtBQUNBLCtEQUErRCxTQUFTO0FBQ3hFLFNBQVM7QUFDVCwrREFBK0QsUUFBUTtBQUN2RTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGFBQWEscUJBQXFCO0FBQ2xDLHFEQUFxRCxLQUFLO0FBQzFEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGVBQWUsOEJBQThCO0FBQzdDO0FBQ0E7QUFDQSx1REFBdUQsS0FBSztBQUM1RDtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1EQUFtRCxPQUFPO0FBQzFEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsZUFBZSxlQUFlO0FBQzlCO0FBQ0E7QUFDQSx1REFBdUQsS0FBSztBQUM1RDtBQUNBO0FBQ0EsbURBQW1ELE9BQU87QUFDMUQ7QUFDQTtBQUNBO0FBQ0E7O0FBRU8sd0JBQXdCLDBEQUFZO0FBQzNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsNkJBQTZCO0FBQzdCOztBQUVBO0FBQ0EsNkM7QUFDQSw2QztBQUNBLFNBQVM7QUFDVDs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSw2QztBQUNBLDZDO0FBQ0EsU0FBUztBQUNUOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQSxLO0FBQ0E7O0FBRU8sd0JBQXdCLDBEQUFZO0FBQzNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsYUFBYSxtQkFBbUI7QUFDaEM7QUFDQSwwREFBMEQsd0JBQXdCO0FBQ2xGLHlDQUF5QyxzREFBc0Q7QUFDL0Y7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSwwREFBMEQsd0JBQXdCO0FBQ2xGLGFBQWEsbUJBQW1CO0FBQ2hDLDBDQUEwQyx1REFBdUQ7QUFDakc7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSwwREFBMEQsd0JBQXdCO0FBQ2xGLGdEQUFnRCwyQ0FBMkM7QUFDM0Y7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxLOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0NBQStDLFFBQVE7QUFDdkQ7QUFDQTtBQUNBLHNFQUFzRSxRQUFRLGlDQUFpQyxJQUFJLGFBQWEsZ0JBQWdCO0FBQ2hKO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7O0FBRUE7QUFDQSxzQkFBc0IsK0NBQUs7QUFDM0I7QUFDQSx1Q0FBdUM7QUFDdkM7QUFDQTs7QUFFQTtBQUNBLDRCQUE0QixPQUFPO0FBQ25DO0FBQ0E7QUFDQSIsImZpbGUiOiIuL3NyYy9weXRob25FeGVjdXRvci5qcy5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vIGltcG9ydCBXb3JrZXIgZnJvbSAnLi9weW9kaWRlLndvcmtlci5qcyc7XHJcbmltcG9ydCB7IHY0IGFzIHV1aWQ0IH0gZnJvbSBcInV1aWRcIjtcclxuaW1wb3J0IHsgc2xlZXAgfSBmcm9tIFwiLi91dGlsc1wiO1xyXG5pbXBvcnQgeyBFdmVudEVtaXR0ZXIgfSBmcm9tIFwiZXZlbnRlbWl0dGVyM1wiO1xyXG5cclxuZnVuY3Rpb24gY3JlYXRlSW50ZXJydXB0QnVmZmVyKCl7XHJcbiAgICBpZih3aW5kb3cuU2hhcmVkQXJyYXlCdWZmZXIpe1xyXG4gICAgICAgIHJldHVybiBuZXcgSW50MzJBcnJheShuZXcgU2hhcmVkQXJyYXlCdWZmZXIoNCkpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICByZXR1cm4gbmV3IEludDMyQXJyYXkobmV3IEFycmF5QnVmZmVyKDQpKTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIFB5dGhvbkV4ZWN1dG9yIHtcclxuICAgIGNvbnN0cnVjdG9yKCl7XHJcbiAgICAgICAgdGhpcy5leGVjdXRpb25zID0ge307XHJcbiAgICAgICAgdGhpcy5jb21wbGV0ZXJzID0ge307XHJcbiAgICAgICAgd2luZG93LmxvYWRpbmdXaWRnZXQuYWRkTG9hZGluZ01lc3NhZ2UoXCJMb2FkaW5nIFB5b2RpZGVcIik7XHJcbiAgICAgICAgdGhpcy5weW9kaWRlX3dvcmtlciA9IG5ldyBXb3JrZXIoXCJweW9kaWRlX3dvcmtlci5idW5kbGUuanNcIik7XHJcbiAgICAgICAgdGhpcy5weW9kaWRlX3dvcmtlci5hZGRFdmVudExpc3RlbmVyKFwibWVzc2FnZVwiLCB0aGlzLl9oYW5kbGVQeW9kaWRlTWVzc2FnZS5iaW5kKHRoaXMpKTtcclxuICAgICAgICAvLyBUaGUgcHlvZGlkZSB3b3JrZXIgbmVlZHMgdG8gYmUgYWJsZSB0byBzZW5kIG1lc3NhZ2VzIHRvIHRoZSBzZXJ2aWNlIHdvcmtlciwgc28gd2UgbWFrZSBhIGNoYW5uZWxcclxuICAgICAgICAvLyBhbmQgc2VuZCBvbmUgZW5kIHRvIHRoZSBzZXJ2aWNlIHdvcmtlciBhbmQgdGhlIG90aGVyIHRvIHRoZSBweW9kaWRlIHdvcmtlci5cclxuICAgICAgICBuYXZpZ2F0b3Iuc2VydmljZVdvcmtlci5hZGRFdmVudExpc3RlbmVyKFwibWVzc2FnZVwiLCB0aGlzLl9oYW5kbGVTZXJ2aWNlV29ya2VyTWVzc2FnZS5iaW5kKHRoaXMpKVxyXG5cclxuICAgICAgICBsZXQgX3JlYWR5UHJvbWlzZSA9IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHRoaXMuX3JlYWR5UHJvbWlzZSA9IHtyZXNvbHZlLCByZWplY3R9KTtcclxuICAgICAgICB0aGlzLl9yZWFkeVByb21pc2UucHJvbWlzZSA9IF9yZWFkeVByb21pc2U7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgcmVhZHkoKXtcclxuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5fcmVhZHlQcm9taXNlLnByb21pc2U7XHJcbiAgICB9XHJcblxyXG4gICAgZXhlY3V0ZShjb2RlKXtcclxuICAgICAgICBjb25zdCBpbnRlcnJ1cHRfYnVmZmVyID0gY3JlYXRlSW50ZXJydXB0QnVmZmVyKCk7XHJcbiAgICAgICAgY29uc3QgdXVpZCA9IHV1aWQ0KCk7XHJcbiAgICAgICAgY29uc3QgZXhlY3V0aW9uID0gbmV3IEV4ZWN1dGlvbihpbnRlcnJ1cHRfYnVmZmVyKTtcclxuICAgICAgICB0aGlzLmV4ZWN1dGlvbnNbdXVpZF0gPSBleGVjdXRpb247XHJcbiAgICAgICAgdGhpcy5fcG9zdE1lc3NhZ2UoXCJleGVjdXRlXCIsIHV1aWQsIHtjb2RlLCBpbnRlcnJ1cHRfYnVmZmVyfSk7XHJcbiAgICAgICAgcmV0dXJuIGV4ZWN1dGlvbjtcclxuICAgIH1cclxuXHJcbiAgICBuZXdfY29tcGxldGVyKCl7XHJcbiAgICAgICAgY29uc3QgdXVpZCA9IHV1aWQ0KCk7XHJcbiAgICAgICAgY29uc3QgY29tcGxldGVyID0gbmV3IENvbXBsZXRlcih0aGlzLCB1dWlkKTtcclxuICAgICAgICB0aGlzLmNvbXBsZXRlcnNbdXVpZF0gPSBjb21wbGV0ZXI7XHJcbiAgICAgICAgdGhpcy5fcG9zdE1lc3NhZ2UoXCJjb21wbGV0ZVwiLCB1dWlkLCB7c3ViY21kIDogXCJuZXdfY29tcGxldGVyXCJ9KTtcclxuICAgICAgICByZXR1cm4gY29tcGxldGVyO1xyXG4gICAgfSAgICBcclxuXHJcbiAgICBfcG9zdE1lc3NhZ2UoY21kLCB1dWlkLCBtc2cpe1xyXG4gICAgICAgIE9iamVjdC5hc3NpZ24obXNnLCB7Y21kLCB1dWlkfSk7XHJcbiAgICAgICAgdGhpcy5weW9kaWRlX3dvcmtlci5wb3N0TWVzc2FnZShtc2cpO1xyXG4gICAgfVxyXG5cclxuICAgIF9oYW5kbGVTZXJ2aWNlV29ya2VyTWVzc2FnZShldmVudCl7XHJcbiAgICAgICAgaWYoZXZlbnQuZGF0YS5jbWQgIT09IFwiY29ubmVjdF90b19weW9kaWRlXCIpe1xyXG4gICAgICAgICAgICB0aHJvdyBFcnJvcihcIlVuZXhwZWN0ZWQgY29tbWFuZCBmcm9tIHNlcnZpY2Ugd29ya2VyIVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5faGFuZGxlU2VydmljZVdvcmtlckNvbm5lY3Rpb24oZXZlbnQpO1xyXG4gICAgfVxyXG5cclxuICAgIF9oYW5kbGVTZXJ2aWNlV29ya2VyQ29ubmVjdGlvbihldmVudCl7XHJcbiAgICAgICAgY29uc29sZS5sb2coXCJoYW5kbGUgc2VydmljZSB3b3JrZXIgY29ubmVjdGlvblwiKTtcclxuICAgICAgICBsZXQgbXNnID0gZXZlbnQuZGF0YTtcclxuICAgICAgICBsZXQgeyBwb3J0LCByZXBsX2lkIH0gPSBtc2c7XHJcbiAgICAgICAgdGhpcy5weW9kaWRlX3dvcmtlci5wb3N0TWVzc2FnZSh7XHJcbiAgICAgICAgICAgIGNtZCA6IFwic2VydmljZV93b3JrZXJfY2hhbm5lbFwiLCBcclxuICAgICAgICAgICAgcG9ydCxcclxuICAgICAgICAgICAgcmVwbF9pZFxyXG4gICAgICAgIH0sIFtwb3J0XSk7XHJcbiAgICB9XHJcblxyXG4gICAgX2hhbmRsZVB5b2RpZGVNZXNzYWdlKGV2ZW50KXtcclxuICAgICAgICBsZXQgbWVzc2FnZSA9IGV2ZW50LmRhdGE7XHJcbiAgICAgICAgbGV0IG1lc3NhZ2VfY21kID0gbWVzc2FnZS5jbWQ7XHJcbiAgICAgICAgbGV0IHN1YmhhbmRsZXJzID0ge1xyXG4gICAgICAgICAgICBleGVjdXRlIDogXCJfaGFuZGxlRXhlY3V0aW9uTWVzc2FnZVwiLFxyXG4gICAgICAgICAgICBjb21wbGV0ZSA6IFwiX2hhbmRsZUNvbXBsZXRpb25NZXNzYWdlXCIsXHJcbiAgICAgICAgICAgIHJlYWR5IDogXCJfaGFuZGxlUmVhZHlNZXNzYWdlXCIsXHJcbiAgICAgICAgICAgIGZpbGVfcGlja2VyIDogXCJfZmlsZV9waWNrZXJcIixcclxuICAgICAgICAgICAgcmVxdWVzdF9oYW5kbGVfcGVybWlzc2lvbiA6IFwiX2hhbmRsZVJlcXVlc3RIYW5kbGVQZXJtaXNzaW9uXCIsXHJcbiAgICAgICAgICAgIGxvYWRpbmdNZXNzYWdlIDogXCJfaGFuZGxlTG9hZGluZ01lc3NhZ2VcIixcclxuICAgICAgICAgICAgbG9hZGluZ0Vycm9yIDogXCJfaGFuZGxlTG9hZGluZ0Vycm9yXCIsXHJcbiAgICAgICAgfTtcclxuICAgICAgICBsZXQgc3ViaGFuZGxlcl9uYW1lID0gc3ViaGFuZGxlcnNbbWVzc2FnZV9jbWRdO1xyXG4gICAgICAgIGlmKCFzdWJoYW5kbGVyX25hbWUpe1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFVua25vd24gY29tbWFuZCBcIiR7bWVzc2FnZV9jbWR9XCJgKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpc1tzdWJoYW5kbGVyX25hbWVdKG1lc3NhZ2UpO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIF9maWxlX3BpY2tlcihtZXNzYWdlKXtcclxuICAgICAgICBsZXQgcGlja2VyRnVuY3Rpb24gPSB7IGRpcmVjdG9yeSA6IHNob3dEaXJlY3RvcnlQaWNrZXIsIHJlYWQgOiBzaG93T3BlbkZpbGVQaWNrZXIsIHJlYWR3cml0ZSA6IHNob3dTYXZlRmlsZVBpY2tlcn1bbWVzc2FnZS50eXBlXTtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBsZXQgaGFuZGxlID0gYXdhaXQgcGlja2VyRnVuY3Rpb24oKTtcclxuICAgICAgICAgICAgaWYobWVzc2FnZS50eXBlICE9PSBcInJlYWRcIil7XHJcbiAgICAgICAgICAgICAgICAvLyBJbiBjYXNlIFwicmVhZFwiLCBpdCByZXR1cm5zIGEgbGlzdC5cclxuICAgICAgICAgICAgICAgIC8vIEluIHJlbWFpbmluZyBjYXNlcywgaXQgcmV0dXJucyBhIHNpbmdsZSBoYW5kbGUuXHJcbiAgICAgICAgICAgICAgICAvLyBBbGxvdyBtb3JlIGNvbnNpc3RlbnQgaGFuZGxpbmcgYnkgYWx3YXlzIGdpdmluZyBhIGxpc3QuXHJcbiAgICAgICAgICAgICAgICBoYW5kbGUgPSBbaGFuZGxlXTsgXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5fcG9zdE1lc3NhZ2UoXCJyZXNwb25kVG9RdWVyeVwiLCBtZXNzYWdlLnV1aWQsIHsgaGFuZGxlIH0pO1xyXG4gICAgICAgIH0gY2F0Y2goZXJyb3Ipe1xyXG4gICAgICAgICAgICB0aGlzLl9wb3N0TWVzc2FnZShcInJlc3BvbmRUb1F1ZXJ5XCIsIG1lc3NhZ2UudXVpZCwgeyBlcnJvciB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgX2hhbmRsZUxvYWRpbmdNZXNzYWdlKG1lc3NhZ2Upe1xyXG4gICAgICAgIHdpbmRvdy5sb2FkaW5nV2lkZ2V0LmFkZExvYWRpbmdNZXNzYWdlKG1lc3NhZ2UudGV4dCk7XHJcbiAgICB9XHJcblxyXG4gICAgX2hhbmRsZUxvYWRpbmdFcnJvcihtZXNzYWdlKXtcclxuICAgICAgICBjb25zb2xlLmVycm9yKG1lc3NhZ2UpO1xyXG4gICAgICAgIHRocm93IEVycm9yKFwiVE9ETzogaGFuZGxlIG1lIVwiKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgYXN5bmMgX2hhbmRsZVJlcXVlc3RIYW5kbGVQZXJtaXNzaW9uKG1lc3NhZ2Upe1xyXG4gICAgICAgIGxldCB7IHV1aWQsIGhhbmRsZSwgbW9kZSB9ID0gbWVzc2FnZTtcclxuICAgICAgICBsZXQgc3RhdHVzID0gYXdhaXQgaGFuZGxlLnJlcXVlc3RQZXJtaXNzaW9uKHttb2RlfSk7XHJcbiAgICAgICAgdGhpcy5fcG9zdE1lc3NhZ2Uoe1xyXG4gICAgICAgICAgICBjbWQgOiBcInJlc3BvbmRUb1F1ZXJ5XCIsXHJcbiAgICAgICAgICAgIHV1aWQsXHJcbiAgICAgICAgICAgIHN0YXR1cyxcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgX2hhbmRsZVJlYWR5TWVzc2FnZShtZXNzYWdlKXtcclxuICAgICAgICBpZihtZXNzYWdlLmV4Y2VwdGlvbil7XHJcbiAgICAgICAgICAgIHRoaXMuX3JlYWR5UHJvbWlzZS5yZWplY3QobWVzc2FnZS5leGNlcHRpb24pO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHdpbmRvdy5sb2FkaW5nV2lkZ2V0LmFkZExvYWRpbmdNZXNzYWdlKFwiUHlvZGlkZSBpcyByZWFkeSFcIik7XHJcbiAgICAgICAgdGhpcy5fcmVhZHlQcm9taXNlLnJlc29sdmUoKTtcclxuICAgIH1cclxuXHJcbiAgICBfaGFuZGxlRXhlY3V0aW9uTWVzc2FnZShtZXNzYWdlKXtcclxuICAgICAgICAvLyBleGVjdXRpb24gbWVzc2FnZXMgZ2V0IGVtaXR0ZWQgb24gdGhlIGV4ZWN1dGlvbiBvYmplY3QuXHJcbiAgICAgICAgY29uc3QgeyB1dWlkLCBzdWJjbWQsIGxhc3RfcmVzcG9uc2UgfSA9IG1lc3NhZ2U7XHJcbiAgICAgICAgY29uc3QgZXhlY3V0aW9uID0gdGhpcy5leGVjdXRpb25zW3V1aWRdO1xyXG4gICAgICAgIGlmKCFleGVjdXRpb24pe1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgZXhlY3V0aW9uIHV1aWQgXCIke3V1aWR9XCJgKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gQ2hlY2sgaWYgdGhlcmUgaXMgYSBoYW5kbGVyIGZvciB0aGUgZ2l2ZW4gY29tbWFuZCwgb3RoZXJ3aXNlIGZhaWwuXHJcbiAgICAgICAgLy8gQWxsIG1lc3NhZ2VzIGFyZSBtZWFudCB0byBiZSBoYW5kbGVkLlxyXG4gICAgICAgIGlmKGV4ZWN1dGlvbi5saXN0ZW5lckNvdW50KHN1YmNtZCkgPT09IDApIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBVbmV4cGVjdGVkIGNvbW1hbmQgXCIke3N1YmNtZH1cImApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBleGVjdXRpb24uZW1pdChzdWJjbWQsIG1lc3NhZ2UpO1xyXG4gICAgICAgIGlmKGxhc3RfcmVzcG9uc2Upe1xyXG4gICAgICAgICAgICBleGVjdXRpb24uX2Nsb3NlKCk7XHJcbiAgICAgICAgICAgIGRlbGV0ZSB0aGlzLmV4ZWN1dGlvbnNbdXVpZF07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIF9oYW5kbGVDb21wbGV0aW9uTWVzc2FnZShtZXNzYWdlKXtcclxuICAgICAgICBjb25zdCB7IHV1aWQsIHN1YmNtZCB9ID0gbWVzc2FnZTtcclxuICAgICAgICBjb25zdCBjb21wbGV0ZXIgPSB0aGlzLmNvbXBsZXRlcnNbdXVpZF07XHJcbiAgICAgICAgaWYoIWNvbXBsZXRlcil7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBjb21wbGV0ZXIgdXVpZCBcIiR7dXVpZH1cImApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZihjb21wbGV0ZXIubGlzdGVuZXJDb3VudChzdWJjbWQpID09PSAwKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgVW5leHBlY3RlZCBjb21tYW5kIFwiJHtzdWJjbWR9XCJgKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29tcGxldGVyLmVtaXQoc3ViY21kLCBtZXNzYWdlKTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIEV4ZWN1dGlvbiBleHRlbmRzIEV2ZW50RW1pdHRlciB7XHJcbiAgICAvKiBBbiBleGVjdXRpb24gb2JqZWN0LiBUaGlzIGlzIGZvciBhdHRhY2hpbmcgaGFuZGxlcnMgLyBnaXZpbmcgb3V0IHByb21pc2VzIGZvciB2YXJpb3VzIGxpZmVjeWNsZSBldmVudHMgb2YgdGhlIGV4ZWN1dGlvbi5cclxuICAgICAgIFRoZSBleGVjdXRpb24gb2JqZWN0IGlzIGNyZWF0ZWQgYW5kIHNjaGVkdWxlZCBieSBQeXRob25FeGVjdXRvci5leGVjdXRlLiBPdGhlciBmaWxlcyBkbyBub3QgY29uc3RydWN0IHRoZXNlIGRpcmVjdGx5LlxyXG4gICAgICAgVGhlIEV4ZWN1dG9yIGFsc28gZGlzcGF0Y2hlcyBtZXNzYWdlcyBmcm9tIHRoZSBweW9kaWRlIHdvcmtlciB0byB0aGUgYXBwcm9wcmlhdGUgZXhlY3V0aW9uLlxyXG4gICAgICAgU2VlIHRoZSBweXRob24gZmlsZSBcImV4ZWN1dGlvbi5weVwiIGZvciB3aGVuIHB5dGhvbiBnZW5lcmF0ZXMgdGhlIG1lc3NhZ2VzIHRoaXMgaXMgcmVzcG9uZGluZyB0by5cclxuICAgICovXHJcbiAgICBjb25zdHJ1Y3RvcihpbnRlcnJ1cHRfYnVmZmVyKXtcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgICAgIHRoaXMuaW50ZXJydXB0X2J1ZmZlciA9IGludGVycnVwdF9idWZmZXI7XHJcbiAgICAgICAgLy8gVXNpbmcgXCJvbmNlXCIgaGVyZSBoZWxwcyB1cyB0aHJvdyBhIHVzZWZ1bCBlcnJvciBpZiBzb21lIGxvZ2ljIGVycm9yIGNhdXNlcyB0aGUgcHlvZGlkZSB3b3JrZXIgdG8gc2VuZCBcclxuICAgICAgICAvLyB0aGUgc2FtZSBldmVudCB0d2ljZS5cclxuICAgICAgICB0aGlzLl92YWxpZGF0ZV9zeW50YXggPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMub25jZShcInZhbGlkYXRlX3N5bnRheFwiLCByZXNvbHZlKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLl9yZXN1bHQgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMub25jZShcInJlc3VsdFwiLCAobWVzc2FnZSkgPT4gcmVzb2x2ZShtZXNzYWdlLnJlc3VsdCkpO1xyXG4gICAgICAgICAgICB0aGlzLm9uY2UoXCJleGNlcHRpb25cIiwgKG1lc3NhZ2UpID0+IHJlamVjdChtZXNzYWdlKSk7XHJcbiAgICAgICAgICAgIHRoaXMub25jZShcImtleWJvYXJkX2ludGVycnVwdFwiLCAobWVzc2FnZSkgPT4gcmVqZWN0KG1lc3NhZ2UpKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgYXN5bmMgdmFsaWRhdGVfc3ludGF4KCl7XHJcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuX3ZhbGlkYXRlX3N5bnRheDtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyByZXN1bHQoKXtcclxuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5fcmVzdWx0O1xyXG4gICAgfVxyXG5cclxuICAgIHNldEludGVycnVwdChpKXtcclxuICAgICAgICB0aGlzLmludGVycnVwdF9idWZmZXJbMF0gPSBpO1xyXG4gICAgICAgIC8vIEF0b21pY3Mubm90aWZ5KHRoaXMuaW50ZXJydXB0X2J1ZmZlciwgMCk7XHJcbiAgICB9XHJcblxyXG4gICAga2V5Ym9hcmRJbnRlcnJ1cHQoKXtcclxuICAgICAgICB0aGlzLnNldEludGVycnVwdCgyKTsgLy8gU0lHSU5UXHJcbiAgICB9XHJcblxyXG4gICAgb25TdGRvdXQoaGFuZGxlciwgY29udGV4dCl7XHJcbiAgICAgICAgdGhpcy5vbihcInN0ZG91dFwiLCBmdW5jdGlvbihtZXNzYWdlKSB7IFxyXG4gICAgICAgICAgICBoYW5kbGVyLmNhbGwodGhpcywgbWVzc2FnZS5kYXRhKTsgXHJcbiAgICAgICAgfSwgY29udGV4dCk7XHJcbiAgICB9XHJcblxyXG4gICAgaWdub3JlU3Rkb3V0KCl7XHJcbiAgICAgICAgdGhpcy5vbihcInN0ZG91dFwiLCAoKSA9PiB1bmRlZmluZWQpO1xyXG4gICAgfVxyXG5cclxuICAgIG9uU3RkZXJyKGhhbmRsZXIsIGNvbnRleHQpe1xyXG4gICAgICAgIHRoaXMub24oXCJzdGRlcnJcIiwgZnVuY3Rpb24obWVzc2FnZSkgeyBcclxuICAgICAgICAgICAgaGFuZGxlci5jYWxsKHRoaXMsIG1lc3NhZ2UuZGF0YSk7IFxyXG4gICAgICAgIH0sIGNvbnRleHQpO1xyXG4gICAgfVxyXG5cclxuICAgIGlnbm9yZVN0ZGVycigpe1xyXG4gICAgICAgIHRoaXMub24oXCJzdGRlcnJcIiwgKCkgPT4gdW5kZWZpbmVkKTtcclxuICAgIH1cclxuXHJcbiAgICBfY2xvc2UoKXtcclxuICAgICAgICBcclxuICAgIH0gICAgXHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBDb21wbGV0ZXIgZXh0ZW5kcyBFdmVudEVtaXR0ZXIge1xyXG4gICAgY29uc3RydWN0b3IoZXhlY3V0b3IsIHV1aWQpe1xyXG4gICAgICAgIHN1cGVyKCk7XHJcbiAgICAgICAgdGhpcy5leGVjdXRvciA9IGV4ZWN1dG9yO1xyXG4gICAgICAgIHRoaXMudXVpZCA9IHV1aWQ7XHJcbiAgICAgICAgdGhpcy5yZXNwb25zZXMgPSB7fTtcclxuICAgICAgICBmb3IobGV0IGNtZCBvZiBbXCJzaWduYXR1cmVzXCIsIFwiY29tcGxldGlvbnNcIiwgXCJjb21wbGV0aW9uX2RldGFpbFwiXSl7XHJcbiAgICAgICAgICAgIHRoaXMuX2F0dGFjaFJlc3BvbnNlSGFuZGxlcihjbWQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBnZXRTaWduYXR1cmVzKGNvZGUsIHBvc2l0aW9uLCBjYW5jZWxsYXRpb25fdG9rZW4pe1xyXG4gICAgICAgIGxldCBbc3VidXVpZCwgcmVzcG9uc2VfcHJvbWlzZV0gPSB0aGlzLl9nZXRSZXNwb25zZVByb21pc2UoXCJzaWduYXR1cmVzXCIpO1xyXG4gICAgICAgIGxldCB7bGluZU51bWJlciwgY29sdW1ufSA9IHBvc2l0aW9uO1xyXG4gICAgICAgIGxldCBpbnRlcnJ1cHRfYnVmZmVyID0gY3JlYXRlSW50ZXJydXB0QnVmZmVyKCk7XHJcbiAgICAgICAgY2FuY2VsbGF0aW9uX3Rva2VuLm9uQ2FuY2VsbGF0aW9uUmVxdWVzdGVkKCgpID0+IHtpbnRlcnJ1cHRfYnVmZmVyWzBdID0gMn0pO1xyXG4gICAgICAgIHRoaXMuX3Bvc3RNZXNzYWdlKFwic2lnbmF0dXJlc1wiLCB7IHN1YnV1aWQsIGludGVycnVwdF9idWZmZXIsIGNvZGUsIGxpbmVOdW1iZXIsIGNvbHVtbiB9KTtcclxuICAgICAgICByZXR1cm4gYXdhaXQgcmVzcG9uc2VfcHJvbWlzZTtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBnZXRDb21wbGV0aW9ucyhjb2RlLCBwb3NpdGlvbiwgY2FuY2VsbGF0aW9uX3Rva2VuKXtcclxuICAgICAgICBsZXQgW3N1YnV1aWQsIHJlc3BvbnNlX3Byb21pc2VdID0gdGhpcy5fZ2V0UmVzcG9uc2VQcm9taXNlKFwiY29tcGxldGlvbnNcIik7XHJcbiAgICAgICAgbGV0IGludGVycnVwdF9idWZmZXIgPSBjcmVhdGVJbnRlcnJ1cHRCdWZmZXIoKTtcclxuICAgICAgICBjYW5jZWxsYXRpb25fdG9rZW4ub25DYW5jZWxsYXRpb25SZXF1ZXN0ZWQoKCkgPT4ge2ludGVycnVwdF9idWZmZXJbMF0gPSAyfSk7XHJcbiAgICAgICAgbGV0IHtsaW5lTnVtYmVyLCBjb2x1bW59ID0gcG9zaXRpb247XHJcbiAgICAgICAgdGhpcy5fcG9zdE1lc3NhZ2UoXCJjb21wbGV0aW9uc1wiLCB7IHN1YnV1aWQsICBpbnRlcnJ1cHRfYnVmZmVyLCBjb2RlLCBsaW5lTnVtYmVyLCBjb2x1bW4gfSk7XHJcbiAgICAgICAgcmV0dXJuIGF3YWl0IHJlc3BvbnNlX3Byb21pc2U7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgZ2V0Q29tcGxldGlvbkluZm8oc3RhdGVfaWQsIGlkeCwgY2FuY2VsbGF0aW9uX3Rva2VuKXtcclxuICAgICAgICBsZXQgW3N1YnV1aWQsIHJlc3BvbnNlX3Byb21pc2VdID0gdGhpcy5fZ2V0UmVzcG9uc2VQcm9taXNlKFwiY29tcGxldGlvbl9kZXRhaWxcIik7XHJcbiAgICAgICAgbGV0IGludGVycnVwdF9idWZmZXIgPSBjcmVhdGVJbnRlcnJ1cHRCdWZmZXIoKTtcclxuICAgICAgICBjYW5jZWxsYXRpb25fdG9rZW4ub25DYW5jZWxsYXRpb25SZXF1ZXN0ZWQoKCkgPT4ge2ludGVycnVwdF9idWZmZXJbMF0gPSAyfSk7XHJcbiAgICAgICAgdGhpcy5fcG9zdE1lc3NhZ2UoXCJjb21wbGV0aW9uX2RldGFpbFwiLCB7IHN1YnV1aWQsIGludGVycnVwdF9idWZmZXIsIGlkeCwgc3RhdGVfaWQgfSk7XHJcbiAgICAgICAgcmV0dXJuIGF3YWl0IHJlc3BvbnNlX3Byb21pc2U7XHJcbiAgICB9XHJcblxyXG4gICAgY2xvc2UoKXtcclxuICAgICAgICBkZWxldGUgdGhpcy5leGVjdXRvci5jb21wbGV0ZXJzW3RoaXMudXVpZF07XHJcbiAgICAgICAgZGVsZXRlIHRoaXMuZXhlY3V0b3I7XHJcbiAgICB9ICAgIFxyXG5cclxuICAgIF9hdHRhY2hSZXNwb25zZUhhbmRsZXIoY21kKXtcclxuICAgICAgICB0aGlzLm9uKGNtZCwgKG1zZykgPT4ge1xyXG4gICAgICAgICAgICBsZXQgcHJvbWlzZV9vYmogPSB0aGlzLnJlc3BvbnNlc1ttc2cuc3VidXVpZF07XHJcbiAgICAgICAgICAgIGlmKCFwcm9taXNlX29iail7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBFcnJvcihgVW5rbm93biBzdWJ1dWlkICR7c3VidXVpZH1gKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZihjbWQgIT09IHByb21pc2Vfb2JqLmNtZCkge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBXcm9uZyBjb21tYW5kIGZvciByZXNwb25zZSBzdWJ1dWlkICR7c3VidXVpZH0uIFdhcyBleHBlY3RpbmcgY29tbWFuZCB0byBiZSBcIiR7Y21kfVwiIGJ1dCBnb3QgXCIke3Byb21pc2Vfb2JqLmNtZH1cImApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHByb21pc2Vfb2JqLnJlc29sdmUobXNnKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBfZ2V0UmVzcG9uc2VQcm9taXNlKGNtZCl7XHJcbiAgICAgICAgbGV0IHN1YnV1aWQgPSB1dWlkNCgpO1xyXG4gICAgICAgIHJldHVybiBbc3VidXVpZCwgbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4gXHJcbiAgICAgICAgICAgIHRoaXMucmVzcG9uc2VzW3N1YnV1aWRdID0ge3Jlc29sdmUsIHJlamVjdCwgY21kIH1cclxuICAgICAgICApXTtcclxuICAgIH1cclxuXHJcbiAgICBfcG9zdE1lc3NhZ2Uoc3ViY21kLCBtc2cpe1xyXG4gICAgICAgIE9iamVjdC5hc3NpZ24obXNnLCB7c3ViY21kfSk7XHJcbiAgICAgICAgdGhpcy5leGVjdXRvci5fcG9zdE1lc3NhZ2UoXCJjb21wbGV0ZVwiLCB0aGlzLnV1aWQsIG1zZyk7XHJcbiAgICB9XHJcbn0iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/pythonExecutor.js\n");

/***/ }),

/***/ "./src/pythonTextCompletion.js":
/*!*************************************!*\
  !*** ./src/pythonTextCompletion.js ***!
  \*************************************/
/*! exports provided: updatePythonLanguageDefinition */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"updatePythonLanguageDefinition\", function() { return updatePythonLanguageDefinition; });\n/* harmony import */ var _css_color_names_json__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./css-color-names.json */ \"./src/css-color-names.json\");\nvar _css_color_names_json__WEBPACK_IMPORTED_MODULE_0___namespace = /*#__PURE__*/__webpack_require__.t(/*! ./css-color-names.json */ \"./src/css-color-names.json\", 1);\n\r\nlet color_list_regex = new RegExp('\"(' + Object.keys(_css_color_names_json__WEBPACK_IMPORTED_MODULE_0__).join(\"|\") + ')\"', \"g\");\r\n\r\nconst kind_map = {\r\n    \"module\" : \"Module\",\r\n    \"class\" : \"Class\",\r\n    \"instance\" : \"Value\",\r\n    \"function\" : \"Function\",\r\n    \"param\" : \"TypeParameter\",\r\n    \"path\" : \"Folder\",\r\n    \"keyword\" : \"Keyword\",\r\n    \"property\" : \"Property\",\r\n    \"statement\" : \"Constant\"\r\n}\r\n\r\n\r\nfunction makeSuggestion(label, kind){\r\n    return {\r\n        insertText : label,\r\n        kind,\r\n        label,\r\n        sortText : label.replace(/^_/,\"~\")\r\n    }\r\n}\r\n\r\n\r\n\r\nfunction getCompletionProvider(monaco, repl) {\r\n    return {\r\n        triggerCharacters: ['.'],\r\n        provideCompletionItems: async function (model, position, context/*: CompletionContext*/, token/*: CancellationToken*/) {\r\n            let suggestions = [];\r\n            let {lineNumber, column} = position;\r\n            lineNumber -= repl.readOnlyLines;\r\n            column--;\r\n            position = {lineNumber, column};\r\n            let {state_id, completions} = await repl.jedi_value.getCompletions(repl.value, position, token);\r\n            for(let {name, kind} of completions){\r\n                let label = name;\r\n                let suggestion = makeSuggestion(label, monaco.languages.CompletionItemKind[kind_map[kind]]);\r\n                suggestion.state_id = state_id;\r\n                suggestion.idx = suggestions.length;\r\n                suggestions.push(suggestion);\r\n            }\r\n            return {suggestions};\r\n        },\r\n        resolveCompletionItem : async function(model, position, item, token){\r\n            let result = await repl.jedi_value.getCompletionInfo(item.state_id, item.idx, token);\r\n            let {docstring, signature, full_name, root} = result;\r\n            item.detail = signature;\r\n            if(full_name){\r\n                let doclink = `apidocs/_autosummary/${root}.html#${full_name}`;\r\n                docstring += `\\n\\n[API Docs](${doclink})`;\r\n            }\r\n            item.documentation = {\r\n                isTrusted : true,\r\n                value : docstring,\r\n            };\r\n            return item;\r\n        }\r\n    };\r\n}\r\n\r\n\r\nfunction getSignatureHelpProvider(monaco, repl) {\r\n    return {\r\n        triggerCharacters: ['(', \",\"],\r\n        provideSignatureHelp: async function (model, position, token) {\r\n            let {lineNumber, column} = position;\r\n            lineNumber -= repl.readOnlyLines;\r\n            column--;\r\n            position = {lineNumber, column};\r\n            let {signatures, full_name, root} = await repl.jedi_value.getSignatures(repl.value, position, token);\r\n            if(!signatures){\r\n                return;\r\n            }\r\n            if(full_name){\r\n                let doclink = `apidocs/_autosummary/${root}.html#${full_name}`;\r\n                let sig = signatures.signatures[0];\r\n                let documentation = sig.documentation;\r\n                documentation += `\\n\\n[API Docs](${doclink})`\r\n                sig.documentation = {\r\n                    isTrusted : true,\r\n                    value : documentation,\r\n                };\r\n            }\r\n            return { \r\n                value : signatures,\r\n                dispose : () => false\r\n            }            \r\n        }\r\n    };\r\n}\r\n\r\nfunction getColorProvider(monaco, repl){\r\n    return {\r\n        provideColorPresentations: (model, colorInfo, cancellationToken) => {\r\n            let {red, green, blue, alpha} = colorInfo.color;\r\n            let colorStrs = [red, green, blue, alpha].map(e => e.toFixed(3).replace(/0*$/,\"\").replace(/\\.$/,\"\"));\r\n            return [\r\n                {\r\n                    label: `Color(${colorStrs})`,\r\n                    textEdit : {\r\n                        range : colorInfo.range,\r\n                        text : `Color(${colorStrs})`\r\n                    }\r\n                }\r\n            ];\r\n        },\r\n\r\n        provideDocumentColors: (model, cancellationToken) => {\r\n            if(!repl.editor){\r\n                return [];\r\n            }\r\n            let startLine = repl.startOfInputPosition.lineNumber;\r\n            let endLine = repl.endOfInputPosition.lineNumber;\r\n            let result = [];\r\n            function hex_string_to_color(s){\r\n                let hexs = [s.slice(1,3), s.slice(3,5), s.slice(5,7)];\r\n                return hexs.map(s => Number.parseInt(s, 16)/255);\r\n            }\r\n            function get_color(red, green, blue, alpha){\r\n                red = red || 0;\r\n                green = green || 0;\r\n                blue = blue || 0;\r\n                alpha = alpha || 1;\r\n                return {red, blue, green, alpha};\r\n            }\r\n            function get_range(line, startColumn, endColumn){\r\n                return {\r\n                    startLineNumber: line,\r\n                    startColumn,\r\n                    endLineNumber: line,\r\n                    endColumn,\r\n                }\r\n            }\r\n\r\n            for(let line = startLine; line <= endLine; line++){\r\n                let value = model.getLineContent(line);\r\n                for(let match of value.matchAll(color_list_regex)){\r\n                    let startColumn = match.index;\r\n                    let endColumn = startColumn + match[0].length + 2;\r\n                    let [red, green, blue] = hex_string_to_color(_css_color_names_json__WEBPACK_IMPORTED_MODULE_0__[match[1]]);\r\n                    result.push({\r\n                        color :  get_color(red, green, blue),\r\n                        range : get_range(line, startColumn, endColumn)\r\n                    });\r\n                }\r\n                for(let match of value.matchAll(/\"(#[0-9A-Fa-f]{6})\"/g)){\r\n                    let startColumn = match.index + 1;\r\n                    let endColumn = startColumn + match[0].length + 1;\r\n                    let [red, green, blue] = hex_string_to_color(match[1]); \r\n                    result.push({\r\n                        color :  get_color(red, green, blue),\r\n                        range : get_range(line, startColumn, endColumn)\r\n                    });\r\n                }\r\n                for(let match of value.matchAll(/Color\\(([^)]*)\\)/g)){\r\n                    let startColumn = match.index + 1;\r\n                    let endColumn = startColumn + match[0].length + 1;\r\n                    let [red, green, blue, alpha] = match[1].split(\",\").map(s => Number.parseFloat(s)); \r\n                    result.push({\r\n                        color :  get_color(red, green, blue, alpha),\r\n                        range : get_range(line, startColumn, endColumn)\r\n                    });\r\n                }                \r\n            }\r\n            return result;\r\n        }\r\n    }\r\n}\r\n\r\nfunction updatePythonLanguageDefinition(monaco, repl){\r\n    monaco.languages.setLanguageConfiguration('python', {\r\n        indentationRules: {\r\n            // decreaseIndentPattern: /^\\s*pass\\s*$/,\r\n            increaseIndentPattern: /^.*:\\s*$/\r\n        }\r\n    });\r\n    monaco.languages.registerCompletionItemProvider('python', getCompletionProvider(monaco, repl));\r\n    monaco.languages.registerSignatureHelpProvider('python', getSignatureHelpProvider(monaco, repl));\r\n    monaco.languages.registerColorProvider('python', getColorProvider(monaco, repl));\r\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvcHl0aG9uVGV4dENvbXBsZXRpb24uanM/MmZjZiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFnRDtBQUNoRCxxREFBcUQsa0RBQVU7O0FBRS9EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLG1CQUFtQjtBQUNwQztBQUNBO0FBQ0Esd0JBQXdCO0FBQ3hCLGlCQUFpQixzQkFBc0I7QUFDdkMscUJBQXFCLFdBQVc7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CO0FBQ3BCLFNBQVM7QUFDVDtBQUNBO0FBQ0EsaUJBQWlCLHNDQUFzQztBQUN2RDtBQUNBO0FBQ0Esc0RBQXNELEtBQUssUUFBUSxVQUFVO0FBQzdFLCtDQUErQyxRQUFRO0FBQ3ZEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsbUJBQW1CO0FBQ3BDO0FBQ0E7QUFDQSx3QkFBd0I7QUFDeEIsaUJBQWlCLDRCQUE0QjtBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBLHNEQUFzRCxLQUFLLFFBQVEsVUFBVTtBQUM3RTtBQUNBO0FBQ0EsbURBQW1ELFFBQVE7QUFDM0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CO0FBQ0E7QUFDQTtBQUNBLGE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLHdCQUF3QjtBQUN6QztBQUNBO0FBQ0E7QUFDQSxvQ0FBb0MsVUFBVTtBQUM5QztBQUNBO0FBQ0Esd0NBQXdDLFVBQVU7QUFDbEQ7QUFDQTtBQUNBO0FBQ0EsU0FBUzs7QUFFVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QjtBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEscUNBQXFDLGlCQUFpQjtBQUN0RDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlFQUFpRSxrREFBVTtBQUMzRTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQSxnRUFBZ0UsRUFBRTtBQUNsRTtBQUNBO0FBQ0EsMkU7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1RztBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQixpQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBIiwiZmlsZSI6Ii4vc3JjL3B5dGhvblRleHRDb21wbGV0aW9uLmpzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGNzc19jb2xvcnMgZnJvbSBcIi4vY3NzLWNvbG9yLW5hbWVzLmpzb25cIjtcclxubGV0IGNvbG9yX2xpc3RfcmVnZXggPSBuZXcgUmVnRXhwKCdcIignICsgT2JqZWN0LmtleXMoY3NzX2NvbG9ycykuam9pbihcInxcIikgKyAnKVwiJywgXCJnXCIpO1xyXG5cclxuY29uc3Qga2luZF9tYXAgPSB7XHJcbiAgICBcIm1vZHVsZVwiIDogXCJNb2R1bGVcIixcclxuICAgIFwiY2xhc3NcIiA6IFwiQ2xhc3NcIixcclxuICAgIFwiaW5zdGFuY2VcIiA6IFwiVmFsdWVcIixcclxuICAgIFwiZnVuY3Rpb25cIiA6IFwiRnVuY3Rpb25cIixcclxuICAgIFwicGFyYW1cIiA6IFwiVHlwZVBhcmFtZXRlclwiLFxyXG4gICAgXCJwYXRoXCIgOiBcIkZvbGRlclwiLFxyXG4gICAgXCJrZXl3b3JkXCIgOiBcIktleXdvcmRcIixcclxuICAgIFwicHJvcGVydHlcIiA6IFwiUHJvcGVydHlcIixcclxuICAgIFwic3RhdGVtZW50XCIgOiBcIkNvbnN0YW50XCJcclxufVxyXG5cclxuXHJcbmZ1bmN0aW9uIG1ha2VTdWdnZXN0aW9uKGxhYmVsLCBraW5kKXtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgaW5zZXJ0VGV4dCA6IGxhYmVsLFxyXG4gICAgICAgIGtpbmQsXHJcbiAgICAgICAgbGFiZWwsXHJcbiAgICAgICAgc29ydFRleHQgOiBsYWJlbC5yZXBsYWNlKC9eXy8sXCJ+XCIpXHJcbiAgICB9XHJcbn1cclxuXHJcblxyXG5cclxuZnVuY3Rpb24gZ2V0Q29tcGxldGlvblByb3ZpZGVyKG1vbmFjbywgcmVwbCkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICB0cmlnZ2VyQ2hhcmFjdGVyczogWycuJ10sXHJcbiAgICAgICAgcHJvdmlkZUNvbXBsZXRpb25JdGVtczogYXN5bmMgZnVuY3Rpb24gKG1vZGVsLCBwb3NpdGlvbiwgY29udGV4dC8qOiBDb21wbGV0aW9uQ29udGV4dCovLCB0b2tlbi8qOiBDYW5jZWxsYXRpb25Ub2tlbiovKSB7XHJcbiAgICAgICAgICAgIGxldCBzdWdnZXN0aW9ucyA9IFtdO1xyXG4gICAgICAgICAgICBsZXQge2xpbmVOdW1iZXIsIGNvbHVtbn0gPSBwb3NpdGlvbjtcclxuICAgICAgICAgICAgbGluZU51bWJlciAtPSByZXBsLnJlYWRPbmx5TGluZXM7XHJcbiAgICAgICAgICAgIGNvbHVtbi0tO1xyXG4gICAgICAgICAgICBwb3NpdGlvbiA9IHtsaW5lTnVtYmVyLCBjb2x1bW59O1xyXG4gICAgICAgICAgICBsZXQge3N0YXRlX2lkLCBjb21wbGV0aW9uc30gPSBhd2FpdCByZXBsLmplZGlfdmFsdWUuZ2V0Q29tcGxldGlvbnMocmVwbC52YWx1ZSwgcG9zaXRpb24sIHRva2VuKTtcclxuICAgICAgICAgICAgZm9yKGxldCB7bmFtZSwga2luZH0gb2YgY29tcGxldGlvbnMpe1xyXG4gICAgICAgICAgICAgICAgbGV0IGxhYmVsID0gbmFtZTtcclxuICAgICAgICAgICAgICAgIGxldCBzdWdnZXN0aW9uID0gbWFrZVN1Z2dlc3Rpb24obGFiZWwsIG1vbmFjby5sYW5ndWFnZXMuQ29tcGxldGlvbkl0ZW1LaW5kW2tpbmRfbWFwW2tpbmRdXSk7XHJcbiAgICAgICAgICAgICAgICBzdWdnZXN0aW9uLnN0YXRlX2lkID0gc3RhdGVfaWQ7XHJcbiAgICAgICAgICAgICAgICBzdWdnZXN0aW9uLmlkeCA9IHN1Z2dlc3Rpb25zLmxlbmd0aDtcclxuICAgICAgICAgICAgICAgIHN1Z2dlc3Rpb25zLnB1c2goc3VnZ2VzdGlvbik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHtzdWdnZXN0aW9uc307XHJcbiAgICAgICAgfSxcclxuICAgICAgICByZXNvbHZlQ29tcGxldGlvbkl0ZW0gOiBhc3luYyBmdW5jdGlvbihtb2RlbCwgcG9zaXRpb24sIGl0ZW0sIHRva2VuKXtcclxuICAgICAgICAgICAgbGV0IHJlc3VsdCA9IGF3YWl0IHJlcGwuamVkaV92YWx1ZS5nZXRDb21wbGV0aW9uSW5mbyhpdGVtLnN0YXRlX2lkLCBpdGVtLmlkeCwgdG9rZW4pO1xyXG4gICAgICAgICAgICBsZXQge2RvY3N0cmluZywgc2lnbmF0dXJlLCBmdWxsX25hbWUsIHJvb3R9ID0gcmVzdWx0O1xyXG4gICAgICAgICAgICBpdGVtLmRldGFpbCA9IHNpZ25hdHVyZTtcclxuICAgICAgICAgICAgaWYoZnVsbF9uYW1lKXtcclxuICAgICAgICAgICAgICAgIGxldCBkb2NsaW5rID0gYGFwaWRvY3MvX2F1dG9zdW1tYXJ5LyR7cm9vdH0uaHRtbCMke2Z1bGxfbmFtZX1gO1xyXG4gICAgICAgICAgICAgICAgZG9jc3RyaW5nICs9IGBcXG5cXG5bQVBJIERvY3NdKCR7ZG9jbGlua30pYDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpdGVtLmRvY3VtZW50YXRpb24gPSB7XHJcbiAgICAgICAgICAgICAgICBpc1RydXN0ZWQgOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgdmFsdWUgOiBkb2NzdHJpbmcsXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHJldHVybiBpdGVtO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbn1cclxuXHJcblxyXG5mdW5jdGlvbiBnZXRTaWduYXR1cmVIZWxwUHJvdmlkZXIobW9uYWNvLCByZXBsKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIHRyaWdnZXJDaGFyYWN0ZXJzOiBbJygnLCBcIixcIl0sXHJcbiAgICAgICAgcHJvdmlkZVNpZ25hdHVyZUhlbHA6IGFzeW5jIGZ1bmN0aW9uIChtb2RlbCwgcG9zaXRpb24sIHRva2VuKSB7XHJcbiAgICAgICAgICAgIGxldCB7bGluZU51bWJlciwgY29sdW1ufSA9IHBvc2l0aW9uO1xyXG4gICAgICAgICAgICBsaW5lTnVtYmVyIC09IHJlcGwucmVhZE9ubHlMaW5lcztcclxuICAgICAgICAgICAgY29sdW1uLS07XHJcbiAgICAgICAgICAgIHBvc2l0aW9uID0ge2xpbmVOdW1iZXIsIGNvbHVtbn07XHJcbiAgICAgICAgICAgIGxldCB7c2lnbmF0dXJlcywgZnVsbF9uYW1lLCByb290fSA9IGF3YWl0IHJlcGwuamVkaV92YWx1ZS5nZXRTaWduYXR1cmVzKHJlcGwudmFsdWUsIHBvc2l0aW9uLCB0b2tlbik7XHJcbiAgICAgICAgICAgIGlmKCFzaWduYXR1cmVzKXtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZihmdWxsX25hbWUpe1xyXG4gICAgICAgICAgICAgICAgbGV0IGRvY2xpbmsgPSBgYXBpZG9jcy9fYXV0b3N1bW1hcnkvJHtyb290fS5odG1sIyR7ZnVsbF9uYW1lfWA7XHJcbiAgICAgICAgICAgICAgICBsZXQgc2lnID0gc2lnbmF0dXJlcy5zaWduYXR1cmVzWzBdO1xyXG4gICAgICAgICAgICAgICAgbGV0IGRvY3VtZW50YXRpb24gPSBzaWcuZG9jdW1lbnRhdGlvbjtcclxuICAgICAgICAgICAgICAgIGRvY3VtZW50YXRpb24gKz0gYFxcblxcbltBUEkgRG9jc10oJHtkb2NsaW5rfSlgXHJcbiAgICAgICAgICAgICAgICBzaWcuZG9jdW1lbnRhdGlvbiA9IHtcclxuICAgICAgICAgICAgICAgICAgICBpc1RydXN0ZWQgOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlIDogZG9jdW1lbnRhdGlvbixcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHsgXHJcbiAgICAgICAgICAgICAgICB2YWx1ZSA6IHNpZ25hdHVyZXMsXHJcbiAgICAgICAgICAgICAgICBkaXNwb3NlIDogKCkgPT4gZmFsc2VcclxuICAgICAgICAgICAgfSAgICAgICAgICAgIFxyXG4gICAgICAgIH1cclxuICAgIH07XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldENvbG9yUHJvdmlkZXIobW9uYWNvLCByZXBsKXtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgcHJvdmlkZUNvbG9yUHJlc2VudGF0aW9uczogKG1vZGVsLCBjb2xvckluZm8sIGNhbmNlbGxhdGlvblRva2VuKSA9PiB7XHJcbiAgICAgICAgICAgIGxldCB7cmVkLCBncmVlbiwgYmx1ZSwgYWxwaGF9ID0gY29sb3JJbmZvLmNvbG9yO1xyXG4gICAgICAgICAgICBsZXQgY29sb3JTdHJzID0gW3JlZCwgZ3JlZW4sIGJsdWUsIGFscGhhXS5tYXAoZSA9PiBlLnRvRml4ZWQoMykucmVwbGFjZSgvMCokLyxcIlwiKS5yZXBsYWNlKC9cXC4kLyxcIlwiKSk7XHJcbiAgICAgICAgICAgIHJldHVybiBbXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGFiZWw6IGBDb2xvcigke2NvbG9yU3Ryc30pYCxcclxuICAgICAgICAgICAgICAgICAgICB0ZXh0RWRpdCA6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmFuZ2UgOiBjb2xvckluZm8ucmFuZ2UsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRleHQgOiBgQ29sb3IoJHtjb2xvclN0cnN9KWBcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIF07XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgcHJvdmlkZURvY3VtZW50Q29sb3JzOiAobW9kZWwsIGNhbmNlbGxhdGlvblRva2VuKSA9PiB7XHJcbiAgICAgICAgICAgIGlmKCFyZXBsLmVkaXRvcil7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gW107XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgbGV0IHN0YXJ0TGluZSA9IHJlcGwuc3RhcnRPZklucHV0UG9zaXRpb24ubGluZU51bWJlcjtcclxuICAgICAgICAgICAgbGV0IGVuZExpbmUgPSByZXBsLmVuZE9mSW5wdXRQb3NpdGlvbi5saW5lTnVtYmVyO1xyXG4gICAgICAgICAgICBsZXQgcmVzdWx0ID0gW107XHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGhleF9zdHJpbmdfdG9fY29sb3Iocyl7XHJcbiAgICAgICAgICAgICAgICBsZXQgaGV4cyA9IFtzLnNsaWNlKDEsMyksIHMuc2xpY2UoMyw1KSwgcy5zbGljZSg1LDcpXTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBoZXhzLm1hcChzID0+IE51bWJlci5wYXJzZUludChzLCAxNikvMjU1KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBmdW5jdGlvbiBnZXRfY29sb3IocmVkLCBncmVlbiwgYmx1ZSwgYWxwaGEpe1xyXG4gICAgICAgICAgICAgICAgcmVkID0gcmVkIHx8IDA7XHJcbiAgICAgICAgICAgICAgICBncmVlbiA9IGdyZWVuIHx8IDA7XHJcbiAgICAgICAgICAgICAgICBibHVlID0gYmx1ZSB8fCAwO1xyXG4gICAgICAgICAgICAgICAgYWxwaGEgPSBhbHBoYSB8fCAxO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHtyZWQsIGJsdWUsIGdyZWVuLCBhbHBoYX07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZnVuY3Rpb24gZ2V0X3JhbmdlKGxpbmUsIHN0YXJ0Q29sdW1uLCBlbmRDb2x1bW4pe1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgICAgICBzdGFydExpbmVOdW1iZXI6IGxpbmUsXHJcbiAgICAgICAgICAgICAgICAgICAgc3RhcnRDb2x1bW4sXHJcbiAgICAgICAgICAgICAgICAgICAgZW5kTGluZU51bWJlcjogbGluZSxcclxuICAgICAgICAgICAgICAgICAgICBlbmRDb2x1bW4sXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZvcihsZXQgbGluZSA9IHN0YXJ0TGluZTsgbGluZSA8PSBlbmRMaW5lOyBsaW5lKyspe1xyXG4gICAgICAgICAgICAgICAgbGV0IHZhbHVlID0gbW9kZWwuZ2V0TGluZUNvbnRlbnQobGluZSk7XHJcbiAgICAgICAgICAgICAgICBmb3IobGV0IG1hdGNoIG9mIHZhbHVlLm1hdGNoQWxsKGNvbG9yX2xpc3RfcmVnZXgpKXtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgc3RhcnRDb2x1bW4gPSBtYXRjaC5pbmRleDtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgZW5kQ29sdW1uID0gc3RhcnRDb2x1bW4gKyBtYXRjaFswXS5sZW5ndGggKyAyO1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBbcmVkLCBncmVlbiwgYmx1ZV0gPSBoZXhfc3RyaW5nX3RvX2NvbG9yKGNzc19jb2xvcnNbbWF0Y2hbMV1dKTtcclxuICAgICAgICAgICAgICAgICAgICByZXN1bHQucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yIDogIGdldF9jb2xvcihyZWQsIGdyZWVuLCBibHVlKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmFuZ2UgOiBnZXRfcmFuZ2UobGluZSwgc3RhcnRDb2x1bW4sIGVuZENvbHVtbilcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGZvcihsZXQgbWF0Y2ggb2YgdmFsdWUubWF0Y2hBbGwoL1wiKCNbMC05QS1GYS1mXXs2fSlcIi9nKSl7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHN0YXJ0Q29sdW1uID0gbWF0Y2guaW5kZXggKyAxO1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBlbmRDb2x1bW4gPSBzdGFydENvbHVtbiArIG1hdGNoWzBdLmxlbmd0aCArIDE7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IFtyZWQsIGdyZWVuLCBibHVlXSA9IGhleF9zdHJpbmdfdG9fY29sb3IobWF0Y2hbMV0pOyBcclxuICAgICAgICAgICAgICAgICAgICByZXN1bHQucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yIDogIGdldF9jb2xvcihyZWQsIGdyZWVuLCBibHVlKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmFuZ2UgOiBnZXRfcmFuZ2UobGluZSwgc3RhcnRDb2x1bW4sIGVuZENvbHVtbilcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGZvcihsZXQgbWF0Y2ggb2YgdmFsdWUubWF0Y2hBbGwoL0NvbG9yXFwoKFteKV0qKVxcKS9nKSl7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHN0YXJ0Q29sdW1uID0gbWF0Y2guaW5kZXggKyAxO1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBlbmRDb2x1bW4gPSBzdGFydENvbHVtbiArIG1hdGNoWzBdLmxlbmd0aCArIDE7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IFtyZWQsIGdyZWVuLCBibHVlLCBhbHBoYV0gPSBtYXRjaFsxXS5zcGxpdChcIixcIikubWFwKHMgPT4gTnVtYmVyLnBhcnNlRmxvYXQocykpOyBcclxuICAgICAgICAgICAgICAgICAgICByZXN1bHQucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yIDogIGdldF9jb2xvcihyZWQsIGdyZWVuLCBibHVlLCBhbHBoYSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJhbmdlIDogZ2V0X3JhbmdlKGxpbmUsIHN0YXJ0Q29sdW1uLCBlbmRDb2x1bW4pXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9ICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gdXBkYXRlUHl0aG9uTGFuZ3VhZ2VEZWZpbml0aW9uKG1vbmFjbywgcmVwbCl7XHJcbiAgICBtb25hY28ubGFuZ3VhZ2VzLnNldExhbmd1YWdlQ29uZmlndXJhdGlvbigncHl0aG9uJywge1xyXG4gICAgICAgIGluZGVudGF0aW9uUnVsZXM6IHtcclxuICAgICAgICAgICAgLy8gZGVjcmVhc2VJbmRlbnRQYXR0ZXJuOiAvXlxccypwYXNzXFxzKiQvLFxyXG4gICAgICAgICAgICBpbmNyZWFzZUluZGVudFBhdHRlcm46IC9eLio6XFxzKiQvXHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICBtb25hY28ubGFuZ3VhZ2VzLnJlZ2lzdGVyQ29tcGxldGlvbkl0ZW1Qcm92aWRlcigncHl0aG9uJywgZ2V0Q29tcGxldGlvblByb3ZpZGVyKG1vbmFjbywgcmVwbCkpO1xyXG4gICAgbW9uYWNvLmxhbmd1YWdlcy5yZWdpc3RlclNpZ25hdHVyZUhlbHBQcm92aWRlcigncHl0aG9uJywgZ2V0U2lnbmF0dXJlSGVscFByb3ZpZGVyKG1vbmFjbywgcmVwbCkpO1xyXG4gICAgbW9uYWNvLmxhbmd1YWdlcy5yZWdpc3RlckNvbG9yUHJvdmlkZXIoJ3B5dGhvbicsIGdldENvbG9yUHJvdmlkZXIobW9uYWNvLCByZXBsKSk7XHJcbn0iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/pythonTextCompletion.js\n");

/***/ }),

/***/ "./src/repl.js":
/*!*********************!*\
  !*** ./src/repl.js ***!
  \*********************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _pythonTextCompletion__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./pythonTextCompletion */ \"./src/pythonTextCompletion.js\");\n/* harmony import */ var _monaco__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./monaco */ \"./src/monaco.js\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./utils */ \"./src/utils.js\");\n/* harmony import */ var _pythonExecutor__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pythonExecutor */ \"./src/pythonExecutor.js\");\n/* harmony import */ var _history__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./history */ \"./src/history.js\");\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! uuid */ \"./node_modules/uuid/index.js\");\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(uuid__WEBPACK_IMPORTED_MODULE_5__);\n\n\n\n\n\n\n\n\nclass ReplElement extends HTMLElement {\n\tstatic get defaultEditorOptions(){\n\t\treturn {\n\t\t\tvalue: \"\",\n\t\t\tlanguage : \"python\",\n\t\t\tfolding : false,\n\t\t\ttheme : \"vs-dark\",\n\t\t\troundedSelection : false,\n\t\t\tfontSize : 20,\n\t\t\tminimap: {\n\t\t\t\tenabled: false\n\t\t\t},\n\t\t\twordWrap: 'wordWrapColumn',\n\t\t\twordWrapColumn: 80,\n\t\t\toverviewRulerLanes : 0,\n\t\t\tscrollBeyondLastLine : true,\n\t\t\tcontextmenu : false,\n\t\t\treadOnly : true,\n\t\t\tlineNumbers : \"none\"\n\t\t};\n    }\n    \n    static get styles() {\n        return `\n            .root {\n                height : 100%;\n                width : 100%;\n            }\n        `\n\t}\n\n\tget readOnly(){\n\t\treturn this._readOnly;\n\t}\n\t\n\tset readOnly(v) {\n\t\tthis._readOnly = !!v;\n\t\t// Monaco has an option called \"cursorBlinking\" that we tried to set to hidden,\n\t\t// but it doesn't seem to do anything. Modifying the dom directly works fine though.\n\t\t// Cursor blinking happens by toggling visibility, but we can use display without trouble.\n\t\tthis.querySelector(\".cursor\").style.display = v ? \"none\" : \"block\";\n\t\t// console.log(this.querySelector(\".cursor\").style.display);\n\t\tthis.querySelector(\".view-lines\").style.cursor = v ? \"default\" : \"text\";\n\t\tthis.editor.updateOptions({ renderLineHighlight : v ? \"none\" : \"line\"});\n\t}\n\n\tget startOfInputPosition(){\n\t\treturn new _monaco__WEBPACK_IMPORTED_MODULE_1__[\"monaco\"].Position(this.readOnlyLines + 1, 1);\n\t}\n\n\tget endOfInputPosition(){\n\t\treturn this.editor.getModel().getPositionAt(this.editor.getValue().length);\n\t}\n\n\tget endOfInputSelection(){\n\t\treturn _monaco__WEBPACK_IMPORTED_MODULE_1__[\"monaco\"].Selection.fromPositions(this.endOfInputPosition, this.endOfInputPosition);\n\t}\n\n\tget allOfInputSelection(){\n\t\treturn _monaco__WEBPACK_IMPORTED_MODULE_1__[\"monaco\"].Selection.fromPositions(this.startOfInputPosition, this.endOfInputPosition);\n\t}\n\n\tget value(){\n\t\treturn this.editor.getModel().getValueInRange(this.allOfInputSelection);\n\t}\n\n\tdoesSelectionIntersectReadOnlyRegion(sel){\n\t\treturn this.editor.getSelection().getStartPosition().isBefore(this.startOfInputPosition);\n\t}\n\n\tdoesCurrentSelectionIntersectReadOnlyRegion(){\n\t\treturn this.doesSelectionIntersectReadOnlyRegion(this.editor.getSelection());\n\t}\n\n\tatStartOfInputRegion(){\n\t\treturn this.editor.getSelection().isEmpty() && this.editor.getPosition().equals(this.startOfInputPosition);\n\t}\n\n\tsetSelectionDirection(sel, dir){\n\t\tlet {lineNumber : sline, column : scol} = sel.getStartPosition();\n\t\tlet {lineNumber : eline, column : ecol} = sel.getEndPosition();\n\t\treturn _monaco__WEBPACK_IMPORTED_MODULE_1__[\"monaco\"].Selection.createWithDirection(sline, scol, eline, ecol, dir);\n\t}\n\n\tget lineHeight(){\n\t\tlet elt = this.querySelector(\".view-line\");\n\t\treturn elt && Number(elt.style.height.slice(0,-2));\n\t}\n\n\tget screenHeight(){\n\t\treturn Number(getComputedStyle(document.querySelector(\"repl-terminal\")).height.slice(0,-2));\n\t}\n\n\tget linesPerScreen(){\n\t\treturn Math.floor(this.screenHeight / this.lineHeight);\n\t}\n\n\tgetScreenLinesInModelLine(lineNumber){\n\t\tlet bottom = this.editor.getTopForPosition(lineNumber, this.editor.getModel().getLineLength(lineNumber));\n\t\tlet top = this.editor.getTopForLineNumber(lineNumber);\n\t\treturn Math.floor((bottom - top)/this.lineHeight + 1);\n\t}\n\t\n\tgetLastScreenLineOfModelLine(lineNumber){\n\t\tlet bottom = this.editor.getTopForPosition(lineNumber, this.editor.getModel().getLineLength(lineNumber));\n\t\tlet top = 0;\n\t\treturn Math.floor((bottom - top)/this.lineHeight + 1);\n\t}\n\n\tgetScreenLineOfPosition(pos){\n\t\tlet {lineNumber, column} = pos;\n\t\tif(!Number.isInteger(lineNumber) || !Number.isInteger(column)){\n\t\t\tthrow Error(\"Invalid position!\");\n\t\t}\n\t\tlet bottom = this.editor.getTopForPosition(lineNumber, column);\n\t\tlet top = 0;\n\t\treturn Math.floor((bottom - top)/this.lineHeight + 1);\n\t}\n\n\tgetModelLineCount(){\n\t\treturn this.editor.getModel().getLineCount();\n\t}\n\n\tgetScreenLineCount(){\n\t\tlet totalLines = this.editor.getModel().getLineCount();\n\t\treturn this.getLastScreenLineOfModelLine(totalLines);\n\t}\n\n\trevealSelection(scrollType = _monaco__WEBPACK_IMPORTED_MODULE_1__[\"monaco\"].editor.ScrollType.Immediate){\n\t\tthis.editor.revealRange(this.editor.getSelection(), scrollType);\n\t}\n\n\tgetLengthOfLastModelLine(){\n\t\treturn this.editor.getModel().getLineLength(this.getModelLineCount());\n\t}\t\t\n\n\tfocus(){\n\t\tthis.editor.focus();\n\t}\n\n\tconstructor(options){\n\t\tsuper();\n\t\tthis._focused = false;\n\t\tthis._visible = true;\n\t\tthis.editorOptions = Object.assign(ReplElement.defaultEditorOptions, options);\n\t\tthis.readOnlyLines = 1;\n\t\tObject(_pythonTextCompletion__WEBPACK_IMPORTED_MODULE_0__[\"updatePythonLanguageDefinition\"])(_monaco__WEBPACK_IMPORTED_MODULE_1__[\"monaco\"], this);\n        this.history = new _history__WEBPACK_IMPORTED_MODULE_4__[\"History\"]();\n\t\tthis.historyIdx = this.history.length || 0;\n\t\tthis.historyIndexUndoStack = [];\n\t\tthis.historyIndexRedoStack = [];\n\t\tthis.firstLines = {};\n\t\tthis.outputScreenLines = {};\n\t\tthis.outputModelLines = {};\n\t\tthis.connectedPromise = {};\n\t\tthis.connectedPromise.promise = new Promise((resolve, reject) => Object.assign(this.connectedPromise, {resolve, reject}));\n\n\t\tthis.lineOffsetMutationObserver = new MutationObserver((mutationsList, observer) => {\n\t\t\tthis.updateLineOffsets();\n\t\t});\n\t\t// To display our output lines left of our input lines, we need to do the following:\n\t\t//    (1) remove contain:strict; and overflow:hide; from .lines-content\n\t\t//    (2) remove overflow:hide; from \".monaco-scrollable-element\"\n\t\t// \t  (3) attach a mutation observer to .view-lines to make sure left-margin is set appropriately on output line content\n\t\t//    (4) attach a mutation observer to .view-overlays to make sure left-margin is set appropriately on output line overlays\n\t\t// We are doing these things here to ensure that everything continues to work when \"setModel\" is called.\n\t\t// Not clear whether this is necessary / a good idea...\n\t\tthis.overflowMutationObserver = new MutationObserver((mutationsList, observer) => {\n\t\t\tfor(let mutation of mutationsList){\n\t\t\t\tif(mutation.target.matches(\".view-lines\")){\n\t\t\t\t\tlet elt = mutation.target.parentElement;\n\t\t\t\t\tif(!elt.matches(\".lines-content\")){\n\t\t\t\t\t\tthrow Error(\"This shouldn't happen.\");\n\t\t\t\t\t}\n\t\t\t\t\telt.style.contain = \"\";\n\t\t\t\t\telt.style.overflow = \"\";\n\t\t\t\t\telt = elt.parentElement;\n\t\t\t\t\tif(!elt.matches(\".monaco-scrollable-element\")){\n\t\t\t\t\t\tthrow Error(\"This shouldn't happen.\");\n\t\t\t\t\t}\n\t\t\t\t\telt.style.overflow = \"\";\n\t\t\t\t\tthis.lineOffsetMutationObserver.observe(\n\t\t\t\t\t\tthis.querySelector(\".view-lines\"),\n\t\t\t\t\t\t{\"childList\" : true, \"attributeFilter\" : [\"style\"], \"subtree\" : true}\n\t\t\t\t\t);\n\t\t\t\t\tthis.lineOffsetMutationObserver.observe(\n\t\t\t\t\t\tthis.querySelector(\".view-overlays\"),\n\t\t\t\t\t\t{\"childList\" : true, \"attributeFilter\" : [\"style\"], \"subtree\" : true}\n\t\t\t\t\t);\n\t\t\t\t\tthis.updateLineOffsets();\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\t// this.syntaxErrorDecorationMutationObserver = new MutationObserver(async (mutationsList) => {\n\t\t// \tawait sleep(5);\n\t\t// \tfor(let m of mutationsList){\n\t\t// \t\tthis.updateSyntaxErrorDecorationAttributesOnElement(m.target, this.syntaxErrorDecorationAttributes);\n\t\t// \t}\n\t\t// });\n\t}\n\n\tasync connectedCallback(){\n\t\tthis.connectedPromise.resolve();\n\t}\n\n\tasync start(executor){\n\t\tconsole.log(\"start:: awaiting on connected promise\");\n\t\tawait this.connectedPromise.promise;\n\t\tconsole.log(\"start:: working...\");\n        let styles = document.createElement(\"style\");\n\t\tstyles.innerText = ReplElement.styles;\n\t\tthis.appendChild(styles);\n\n\t\tthis.dummyTextArea = document.createElement(\"textarea\");\n\t\tthis.dummyTextArea.setAttribute(\"readonly\", \"\");\n\t\tthis.dummyTextArea.style.position = \"absolute\";\n\t\tthis.dummyTextArea.style.opacity = 0;\n\t\t\n\t\tthis.appendChild(this.dummyTextArea); // preventKeyEvent uses this text area \n\t\tlet div = document.createElement(\"div\");\n\t\tthis.overflowMutationObserver.observe(div, {\"childList\" : true, \"subtree\" : true});\n        div.className = \"root\";\n\t\tthis.appendChild(div);\n\t\t\n\t\tthis._resizeObserver = new ResizeObserver(entries => this.editor.layout());\n\t\tthis._resizeObserver.observe(this);\n\n\t\tthis.editor = _monaco__WEBPACK_IMPORTED_MODULE_1__[\"monaco\"].editor.create(\n            this.querySelector(\".root\"),\n            this.editorOptions\n\t\t);\n\n\t\t// Links in the \"suggest widget\" put their target in the data-href attribute.\n\t\t// If we click on one of those links, we want to go to url in the data-href.\n\t\t// Make sure to do mousedown event and not just click in case they use some other mouse button.\n\t\tthis.addEventListener(\"mousedown\", (e) => {\n\t\t\tlet element = e.target;\n\t\t\tif (element.matches(\"a[data-href]\")) {\n\t\t\t\tlet href = element.getAttribute(\"data-href\");\n\t\t\t\twindow.open(href, \"apidocs\");\n\t\t\t}\n\t\t});\n\n\t\tawait Object(_utils__WEBPACK_IMPORTED_MODULE_2__[\"sleep\"])(10);\n\t\tthis.querySelector(\".decorationsOverviewRuler\").remove();\n\t\tthis.showSuggestDetails();\n\t\tthis.readOnly = true;\n\n\t\t// await navigator.serviceWorker.ready;\n\t\tthis.executor = executor;\n\t\tthis.jedi_value = this.executor.new_completer();\t\t\t\n\t\tawait this.executor.ready();\n\t\tthis._loaded();\n\t}\n\n\tasync _displaySillyLoadingPrompt(){\n\t\tlet idx = -1;\n\t\tlet animation = [\"\\n\\n    -  Loading  -\\n\\n\", \"\\n\\n   -   Loading   -\",\"\\n\\n   /   Loading   /\",\"\\n\\n   |   Loading   |\",\"\\n\\n   \\\\   Loading   \\\\\",\"\\n\\n   -   Loading   -\",\"\\n    |\\n   /   Loading   /\\n                |\",\"     \\\\\\n    |\\n   /   Loading   /\\n                |\\n               \\\\\",\"     \\\\-\\n    |\\n       Loading\\n                |\\n              -\\\\\",\"     \\\\-\\n       /\\n       Loading\\n             /\\n              -\\\\\",\"      -\\n       /\\n       L|ading\\n             /\\n              -\",\"\\n       /   \\\\\\n       L|ading\\n         \\\\   /\\n\",\"          -\\n           \\\\\\n       L|ading\\n         \\\\\\n          -\",\"         /-\\n           \\\\\\n       Loading\\n         \\\\\\n          -/\",\"        |/-\\n\\n       Loading\\n\\n          -/|\",\"        |/\\n      \\\\\\n       Loading\\n              \\\\\\n           /|\",\"        |\\n      \\\\\\n    -  Loading  -\\n              \\\\\\n            |\",\"\\n      \\\\\\n    -  Loading  -\\n              \\\\\\n\",\"\\n\\n    -  Loading  -\\n\\n\",\"\\n\\n    -  Loading  -\\n\\n\",\"\\n\\n    -  Loading  -\\n\\n\",\"\\n\\n    -  Loading  -\\n\\n\",\"\\n\\n    -  Loading  -\\n\\n\",\"\\n\\n    -  Loading  -\\n\\n\"];\n\n\t\tlet observer = new MutationObserver(() => {\n\t\t\tfor(let c of document.querySelectorAll(\".cigr, .cigra\")){\n\t\t\t\tif(c.style.display !== \"none\"){\n\t\t\t\t\tc.style.display = \"none\";\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\tobserver.observe(this, {\"subtree\" : true, \"childList\" : true, \"attributesFilter\" : [\"style\"] });\n\t\twhile(!this.ready){\n\t\t\tidx ++;\n\t\t\tidx = idx % animation.length;\n\t\t\tthis.editor.setValue(animation[idx]);\n\t\t\tif(idx === 0) {\n\t\t\t\tawait Object(_utils__WEBPACK_IMPORTED_MODULE_2__[\"sleep\"])(250);\n\t\t\t}\n\t\t\tawait Object(_utils__WEBPACK_IMPORTED_MODULE_2__[\"sleep\"])(50);\n\t\t}\n\t\tobserver.disconnect();\n\t}\n\n\n\tasync _loaded(){\n\t\tthis.editor.onKeyDown(this._onkey.bind(this));\n\t\tthis.editor.onMouseDown(this._onmousedown.bind(this));\n\t\tthis.editor.onMouseUp(this._onmouseup.bind(this));\n\t\tthis.editor.onDidChangeCursorSelection(this._onDidChangeCursorSelection.bind(this));\n\t\tthis.editor.onDidScrollChange(() => this.updateLineOffsets());\n\t\tthis.editor.onDidChangeModelContent(() => { \n\t\t\tthis.clearSyntaxError();\n\t\t});\n\t\tthis.editor.updateOptions({ \n\t\t\treadOnly : false,\n\t\t\tlineNumbers : this._getEditorLinePrefix.bind(this)\n\t\t});\n\n\t\tthis.outputModelLines = { 1 : true };\n\t\tthis.outputScreenLines = { 1 : true };\n\t\tthis.firstLines[2] = true;\n\t\tthis.editor.setValue(\"\\n\");\n\t\tthis.editor.setPosition(this.endOfInputPosition);\n\t\tthis.focus();\n\t\tawait Object(_utils__WEBPACK_IMPORTED_MODULE_2__[\"sleep\"])(0);\n\t\twindow.loadingWidget.ready = true;\n\t\tthis.readOnly = false;\n\t}\n\n\t// _loadingFailed(e){\n\t// \tthis.ready = true;\n\t// \tlet observer = new MutationObserver(() => {\n\t// \t\tfor(let c of document.querySelectorAll(\".cigr, .cigra\")){\n\t// \t\t\tif(\n\t// \t\t\t\tNumber(c.parentElement.style.top.slice(0,-2))/27 >= 2\n\t// \t\t\t\t&& c.style.left === \"0px\"\n\t// \t\t\t){\n\t// \t\t\t\tcontinue;\n\t// \t\t\t}\n\t// \t\t\tif(c.style.display !== \"none\"){\n\t// \t\t\t\tc.style.display = \"none\";\n\t// \t\t\t}\n\t// \t\t}\n\t// \t});\n\t// \tobserver.observe(this, {\"subtree\" : true, \"childList\" : true, \"attributesFilter\" : [\"style\"] });\n\t// \tthis.editor.updateOptions({\n\t// \t\tlineNumbers : (n) => {\n\t// \t\t\tif(n in this.outputModelLines){\n\t// \t\t\t\treturn \"\";\n\t// \t\t\t}\n\t// \t\t\treturn \"   \";\n\t// \t\t}\n\t// \t});\n\t// \twindow.loadingWidget.ready = true;\n\t// \tthis.editor.setValue(`Fatal Error! \\n \\n ${e.toString().replace(/\\n/g,\"\\n \")}`);\n\t// \tthis.editor.updateOptions({\n\t// \t\trulers : []\n\t// \t});\n\t// }\n\n\t_getEditorLinePrefix(n){\n\t\tif(n in this.firstLines){\n\t\t\treturn \">>>\";\n\t\t}\n\t\tif(n in this.outputModelLines){\n\t\t\treturn \"\";\n\t\t}\n\t\treturn \"...\";\n\t}\n\n\tupdateCursorOffset(){\n\t\tlet cursorLineNumber = this.editor.getPosition().lineNumber;\n\t\tthis.querySelector(\".cursor\").style.marginLeft = cursorLineNumber in this.outputModelLines ? \"-4ch\" : \"\";\n\t}\n\n\tupdateLineOffsets(){\n\t\tconst outputLines = \n\t\t\tArray.from(document.querySelectorAll(\".view-line\"))\n\t\t\t\t.map(e => [e, Number(e.style.top.slice(0, -2))]).sort((a,b) => a[1]-b[1]).map(e => e[0]);\n\t\tconst topScreenLine = Math.floor(this.editor.getScrollTop() / this.lineHeight) + 1;\n\t\toutputLines.forEach((e, idx) => {\n\t\t\tlet targetMargin = (topScreenLine + idx) in this.outputScreenLines ? \"-4ch\" : \"\";\n\t\t\tif(e.style.marginLeft !== targetMargin){\n\t\t\t\te.style.marginLeft = targetMargin;\n\t\t\t}\n\t\t});\n\t\tconst outputOverlays = \n\t\t\tArray.from(document.querySelector(\".view-overlays\").children)\n\t\t\t\t.map(e => [e, Number(e.style.top.slice(0, -2))]).sort((a,b) => a[1]-b[1]).map(e => e[0]);\n\t\toutputOverlays.forEach((e, idx) => {\n\t\t\tlet targetMargin = (topScreenLine + idx) in this.outputScreenLines ? \"-5ch\" : \"\";\n\t\t\tif(e.style.marginLeft !== targetMargin){\n\t\t\t\te.style.marginLeft = targetMargin;\n\t\t\t}\n\t\t});\n\t}\t\n\n\t_onmousedown(){\n\t\t// this.mouseDown = true;\n\t\t// this.justSteppedHistory = false;\n\t\t// this.updateCursorOffset();\n\t}\n\n\t_onmouseup(){\n\t\t// this.mouseDown = false;\n\t\t// if(this.doesSelectionIntersectReadOnlyRegion() && this.editor.getSelection().isEmpty()){\n\t\t// \tthis.editor.setPosition(this.endOfInputPosition);\n\t\t// \tthis.revealSelection();\n\t\t// \tthis.updateCursorOffset();\n\t\t// }\n\t}\t\n\n\tasync _onDidChangeCursorSelection(e){\n\t\t// This means this was a history change event.\n\t\t// We use this jank secondarySelection approach to signal a history change event because\n\t\t// monaco's edit stack API doesn't let us attach our own undo/redo callback.\n\t\tif(e.secondarySelections.length > 0){\n\t\t\tthis.editor.setSelection(e.selection);\n\t\t\t// If the source is the keyboard, the user directly changed the history and stepHistory() covered everything.\n\t\t\tif(e.source !== \"keyboard\"){\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif(e.reason === _monaco__WEBPACK_IMPORTED_MODULE_1__[\"monaco\"].editor.CursorChangeReason.Redo){\n\t\t\t\tthis.history.undoStep();\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif(e.reason === _monaco__WEBPACK_IMPORTED_MODULE_1__[\"monaco\"].editor.CursorChangeReason.Undo){\n\t\t\t\tthis.history.redoStep();\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthrow Error(\"Unreachable?\");\n\t\t}\n\t\t// Hide line selection if in read only region or if whole editor is read only.\n\t\t// This improves feedback by quite a lot.\n\t\tif(this.doesCurrentSelectionIntersectReadOnlyRegion()){\n\t\t\tthis.editor.updateOptions({ renderLineHighlight : \"none\" });\n\t\t\tthis.querySelector(\".cursor\").style.display = \"none\";\n\t\t\tawait Object(_utils__WEBPACK_IMPORTED_MODULE_2__[\"sleep\"])(0);\n\t\t\tthis.querySelector(\".cursor\").style.display = \"none\";\n\t\t} else {\n\t\t\tthis.editor.updateOptions({ renderLineHighlight : \"line\" });\n\t\t\tthis.querySelector(\".cursor\").style.display = this.readOnly ? \"none\" : \"block\";\n\t\t}\n\t\t// await sleep(0); // Need to sleep(0) to allow this.mouseDown to update.\n\t\t// if(!this.mouseDown && e.selection.isEmpty() && this.doesCurrentSelectionIntersectReadOnlyRegion()){\n\t\t// \tthis.editor.setPosition(this.endOfInputPosition);\n\t\t// \tthis.revealSelection();\n\t\t// }\n\t\t// this.updateCursorOffset();\n\t}\n\n\n\t/** \n\t*   e.preventDefault() doesn't work on certain keys, including Backspace, Tab, and Delete.\n\t* \tAs a recourse to prevent these rogue key events, we move the focus out of the input area \n\t*  \tfor just a moment and then move it back.\n\t*   The .dummy should be a readonly textarea element.\n\t*/\n\tasync preventKeyEvent(){\n\t\tthis.dummyTextArea.focus();\n\t\tawait Object(_utils__WEBPACK_IMPORTED_MODULE_2__[\"sleep\"])(0);\n\t\tthis.focus();\n\t}\n\n\n\tenforceReadOnlyRegion(e){\n\t\tif(e.browserEvent.type !== \"keydown\"){\n\t\t\treturn;\n\t\t}\n\t\tif(\n\t\t\t(e.browserEvent.ctrlKey || e.browserEvent.altKey || !/^[ -~]$/.test(e.browserEvent.key)) \n\t\t\t&& ![\"Backspace\", \"Tab\", \"Delete\", \"Enter\"].includes(e.browserEvent.key)\n\t\t){\n\t\t\treturn;\n\t\t}\n\t\tthis.intersectSelectionWithInputRegion();\n\t}\n\n\tintersectSelectionWithInputRegion(){\n\t\tconst sel = this.editor.getSelection();\n\t\tlet newSel = sel.intersectRanges(this.allOfInputSelection);\n\t\tif(newSel){\n\t\t\tnewSel = this.setSelectionDirection(newSel, sel.getDirection());\n\t\t\tthis.editor.setSelection(newSel);\n\t\t} else {\n\t\t\tthis.editor.setPosition(this.endOfInputPosition);\n\t\t}\n\t\tthis.revealSelection();\n\t\treturn !newSel || !sel.equalsSelection(newSel);\n\t}\n\n\tshowSuggestDetails(){\n\t\tlet widget = this.editor.getContribution(\"editor.contrib.suggestController\").widget.getValue();\n\t\twidget.updateExpandDocsSetting(true);\n\t}\n\n\t_onkey(e){\n\t\t// Test if completion suggestion widget is visible.\n\t\t// Usually it is hidden by removing the \".visible\" class, but in some unusual circumstances\n\t\t// it ends up with height 0 but still \".visible\". So we also test the height.\n\t\tlet elt = this.querySelector(\".suggest-widget.visible\");\n\t\tlet suggestWidgetVisibleQ = elt && elt.offsetHeight > 0;\n\t\tif(suggestWidgetVisibleQ){\n\t\t\tif(\n\t\t\t\t// This annoying conditional spells out which keys we want the suggestWidget to handle\n\t\t\t\t(e.browserEvent.key !== \"PageUp\" || !e.browserEvent.shiftKey)\n\t\t\t\t&& (!e.browserEvent.ctrlKey || ![\"x\", \"Home\", \"a\"].includes(e.browserEvent.key))\n\t\t\t\t&& ((!e.shiftKey && !e.altKey) || e.browserEvent.key !== \"ArrowUp\")\n\t\t\t){\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\tif(this.maybeStepHistory(e.browserEvent)){\n\t\t\tthis.preventKeyEvent();\n\t\t\treturn\n\t\t}\n\t\tthis.justSteppedHistory = false;\n\t\t// Many Ctrl + <some-key> commands require special handling.\n\t\tif(e.browserEvent.ctrlKey){\n\t\t\tif(e.browserEvent.key in ReplElement._ctrlCmdHandlers){\n\t\t\t\tReplElement._ctrlCmdHandlers[e.browserEvent.key].call(this, e);\n\t\t\t\treturn\n\t\t\t}\n\t\t}\n\t\tif(e.browserEvent.shiftKey && e.browserEvent.key === \"Delete\"){\n\t\t\tthis._handleCut();\n\t\t\treturn;\n\t\t}\n\n\t\tif(e.browserEvent.key === \"PageUp\"){\n\t\t\tthis._onPageUp(e);\n\t\t\treturn;\n\t\t}\n\n\t\t// Prevent keys that would edit value if read only\n\t\tif(this.readOnly && !e.browserEvent.altKey){\n\t\t\tif(\n\t\t\t\t!e.browserEvent.ctrlKey && /^[ -~]$/.test(e.browserEvent.key) \n\t\t\t\t|| [\"Backspace\", \"Tab\", \"Delete\", \"Enter\"].includes(e.browserEvent.key)\n\t\t\t){\n\t\t\t\tthis.preventKeyEvent();\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\t// Prevent backing up past start of repl input\n\t\tif(this.atStartOfInputRegion() && [\"ArrowLeft\", \"Backspace\"].includes(e.browserEvent.key)){\n\t\t\tthis.preventKeyEvent();\n\t\t\treturn;\n\t\t}\n\t\tif(e.browserEvent.key === \"Tab\" && !e.browserEvent.shiftKey){\n\t\t\tthis._onTab();\n\t\t\treturn;\n\t\t}\n\t\tthis.enforceReadOnlyRegion(e);\n\t\tif(e.browserEvent.key === \"Escape\"){\n\t\t\tif(this.currentExecution){\n\t\t\t\tthis.currentExecution.keyboardInterrupt();\n\t\t\t}\n\t\t}\n\n\t\tif([\",\", \"(\"].includes(e.browserEvent.key)) {\n\t\t\tif(e.browserEvent.key === \"(\" && !this.editor.getSelection().isEmpty()){\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t// If the suggest widget is already open this fails to open parameter hints.\n\t\t\t// I tried various combinations of sleeping and trying again, explicitly closing suggest widget,\n\t\t\t// etc but none seem to work.\n\t\t\tthis.editor.trigger(\"editor\", \"editor.action.triggerParameterHints\");\n\t\t\treturn;\n\t\t}\n\n\t\tif(e.browserEvent.key === \"Enter\") {\n\t\t\tif(this.shouldEnterSubmit(e.browserEvent)){\n\t\t\t\tthis.preventKeyEvent();\n\t\t\t\tthis.submit();\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif(e.browserEvent.shiftKey){\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tlet currentLineContent = this.editor.getModel().getLineContent(this.editor.getPosition().lineNumber);\n\t\t\t// If the current line is empty except for spaces, outdent it.\n\t\t\t// TODO: Good choice or no?\n\t\t\tif(/^ +$/.test(currentLineContent)){\n\t\t\t\tthis.editor.getAction(\"editor.action.outdentLines\").run();\n\t\t\t\tthis.preventKeyEvent();\n\t\t\t}\n\t\t}\n\t}\n\n\t// async triggerParameterHints(){\n\t// \tthis.editor.trigger(\"editor\", \"editor.action.hideSuggestWidget\");\n\t// \tawait sleep(0);\n\t// \tthis.editor.trigger(\"editor\", \"editor.action.triggerParameterHints\");\n\t// \tawait sleep(10);\n\t// \tthis.editor.trigger(\"editor\", \"editor.action.triggerParameterHints\");\n\t// \tawait sleep(50);\n\t// \tthis.editor.trigger(\"editor\", \"editor.action.triggerParameterHints\");\n\t// }\n\n\tstatic get _ctrlCmdHandlers(){\n\t\treturn {\n\t\t\t\"c\" : ReplElement.prototype._onCtrlC,\n\t\t\t\"v\" : ReplElement.prototype._onCtrlV,\n\t\t\t\"x\" : ReplElement.prototype._onCtrlX,\n\t\t\t\"a\" : ReplElement.prototype._onCtrlA,\n\t\t\t\"Home\" : ReplElement.prototype._onCtrlHome,\n\t\t\t\"K\" : ReplElement.prototype._handleCut,\n\t\t\t\"x\" : ReplElement.prototype._handleCut,\n\t\t};\n\t}\n\n\t_onTab(){\n\t\tlet sel = this.editor.getSelection();\n\t\tif(sel.startLineNumber !== sel.endLineNumber){\n\t\t\t// selection crosses multiple lines\n\t\t\treturn;\n\t\t}\n\t\tif(sel.startColumn === 1 && sel.endColumn === this.editor.getModel().getLineLength(sel.startLineNumber)){\n\t\t\t// selection is of one whole line\n\t\t\treturn;\n\t\t}\n\t\tlet previousCharacters = \n\t\t\tthis.editor.getModel().getValueInRange(new _monaco__WEBPACK_IMPORTED_MODULE_1__[\"monaco\"].Range(sel.startLineNumber, 1, sel.startLineNumber, sel.startColumn));\n\t\tlet previousCharactersTrimmed = previousCharacters.trim();\n\t\tif(previousCharactersTrimmed.length > 0){\n\t\t\tthis.preventKeyEvent();\n\t\t\tif(!sel.isEmpty()){\n\t\t\t\tthis.editor.executeEdits(\n\t\t\t\t\t\"tab\", \n\t\t\t\t\t[{\n\t\t\t\t\t\trange : sel,\n\t\t\t\t\t\ttext : \"\"\n\t\t\t\t\t}],\n\t\t\t\t\t// [this.endOfInputSelection]\n\t\t\t\t);\n\t\t\t\tthis.editor.pushUndoStop();\n\t\t\t}\t\t\t\n\t\t}\n\t\tif(/[a-zA-Z.]/.test(previousCharacters.charAt(previousCharacters.length - 1))){\n\t\t\tthis.editor.trigger(\"editor\", \"editor.action.triggerSuggest\");\n\t\t\tthis.preventKeyEvent();\n\t\t}\n\t\tif(/[,(]/.test(previousCharactersTrimmed.charAt(previousCharactersTrimmed.length - 1))){\n\t\t\tthis.editor.trigger(\"editor\", \"editor.action.triggerParameterHints\");\n\t\t\tthis.preventKeyEvent();\n\t\t}\n\t}\n\n\t_onCtrlC() {}\n\n\t_onCtrlV(e) {\n\t\tif(e.browserEvent.altKey){\n\t\t\t// Ctrl+alt+V does nothing by default.\n\t\t\treturn;\n\t\t}\n\t\tif(this.readOnly){\n\t\t\tthis.preventKeyEvent();\n\t\t}\n\t\tif(this.doesCurrentSelectionIntersectReadOnlyRegion()){\n\t\t\tthis.preventKeyEvent();\n\t\t\tthis.editor.setPosition(this.endOfInputPosition);\n\t\t\tthis.revealSelection();\n\t\t}\n\t}\n\n\n\t_handleCut(){\n\t\tif(this.editor.getSelection().isEmpty()){\n\t\t\tif(this.value === \"\"){\n\t\t\t\tthis.preventKeyEvent();\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tif(this.value.indexOf(\"\\n\") === -1 || this.readOnly){\n\t\t\t\tthis.editor.setSelection(this.allOfInputSelection);\n\t\t\t\tthis.editor.trigger(\"editor\", \"editor.action.clipboardCutAction\");\n\t\t\t\tthis.preventKeyEvent();\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\t// Else allow default handling\n\t\t\treturn true;\n\t\t}\n\t\tif(this.doesCurrentSelectionIntersectReadOnlyRegion() || this.readOnly){ \n\t\t\tthis.editor.trigger(\"editor\", \"editor.action.clipboardCopyAction\");\n\t\t\tthis.preventKeyEvent();\n\t\t\treturn;\n\t\t}\t\t\n\t}\n\n\n\t_onCtrlA(){\n\t\tif(this.altKey){\n\t\t\t// By default if alt key is pressed nothing happens.\n\t\t\treturn;\n\t\t}\n\t\tif(this.doesCurrentSelectionIntersectReadOnlyRegion()){\n\t\t\t// If the current selection intersects read only region, allow default behavior\n\t\t\t// which selects everything\n\t\t\treturn;\n\t\t}\n\t\t// Otherwise, we only want to select the input region\n\t\tthis.editor.setSelection(this.allOfInputSelection);\n\t\tthis.preventKeyEvent();\n\t}\n\n\t_onCtrlHome(e){\n\t\tif(e.altKey){\n\t\t\t// By default nothing happens if alt key is pressed.\n\t\t\treturn;\n\t\t}\n\t\t// If we are in the read only region\n\t\tif(this.doesCurrentSelectionIntersectReadOnlyRegion()){\n\t\t\t// And the user is holding shift, allow default behavior\n\t\t\tif(e.browserEvent.shiftKey){\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t// If in read only region but user is not holding shift, move to start of input region\n\t\t\tthis.editor.setPosition(this.startOfInputPosition);\n\t\t\tthis.revealSelection();\n\t\t\tthis.preventKeyEvent();\n\t\t\treturn;\n\t\t}\n\t\t// If in input region, select from start of current selection to start of input region\n\t\tif(e.browserEvent.shiftKey){\n\t\t\tlet {lineNumber, column} = this.startOfInputPosition;\n\t\t\tlet selection = this.editor.getSelection();\n\t\t\tif(selection.getDirection() === 0){\n\t\t\t\tselection = selection.setEndPosition(lineNumber, column);\n\t\t\t} else {\n\t\t\t\tselection = selection.setStartPosition(lineNumber, column);\n\t\t\t}\n\t\t\tthis.editor.setSelection(selection);\n\t\t} else {\n\t\t\tthis.editor.setPosition(this.startOfInputPosition);\n\t\t}\n\t\tthis.revealSelection();\n\t\tthis.preventKeyEvent();\n\t}\n\n\t_onPageUp(e){\n\t\tif(e.browserEvent.altKey){\n\t\t\t// alt key means move screen not cursor. So default handling is always fine.\n\t\t\treturn;\n\t\t}\n\t\t// If we are in the read only region\n\t\tif(this.doesCurrentSelectionIntersectReadOnlyRegion()){\n\t\t\t// And the user is holding shift, allow default behavior\n\t\t\tif(e.browserEvent.shiftKey){\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t// If in read only region but user is not holding shift, move to start of input region\n\t\t\tthis.editor.setPosition(this.startOfInputPosition);\n\t\t\tthis.revealSelection();\n\t\t\tthis.preventKeyEvent();\n\t\t\treturn;\t\t\t\t\n\t\t}\n\t\t// If we would page up into read only region, select input region up to beginning.\n\t\tlet targetLine = this.getScreenLineOfPosition(this.editor.getPosition()) - this.linesPerScreen + 1;\n\t\tif(targetLine <= this.getLastScreenLineOfModelLine(this.readOnlyLines)){\n\t\t\tif(e.browserEvent.shiftKey){\n\t\t\t\tthis.editor.setSelection(this.editor.getSelection().setEndPosition(this.startOfInputPosition));\n\t\t\t} else {\n\t\t\t\tthis.editor.setPosition(this.startOfInputPosition);\n\t\t\t}\n\t\t\tthis.revealSelection();\n\t\t\tthis.preventKeyEvent();\n\t\t}\n\t\t// Otherwise, allow default page up behavior\n\t}\n\n\tsetValue(value){\n\t\tthis.editor.getModel().pushEditOperations(\n\t\t\t[this.editor.getSelection()],\n\t\t\t[{\n\t\t\t\trange : this.allOfInputSelection,\n\t\t\t\ttext : value\n\t\t\t}],\n\t\t\t() => [this.endOfInputSelection]\n\t\t);\n\t\tthis.editor.setPosition(this.endOfInputPosition);\n\t\tthis.editor.pushUndoStop();\n\t}\n\n\t/**\n\t * Programmatically submit command into the repl. For demos.\n\t */\n\tasync submitPythonCommand(command, addToHistory=false){\n\t\tthis.setValue(command);\n\t\tawait this.submit(addToHistory);\n\t}\n\n\t/**\n\t * Programmatically submit sequence of commands into the repl. For demos.\n\t */\n\tasync submitPythonCommands(commands, addToHistory=false){\n\t\tfor(let command of commands){\n\t\t\tawait this.submitPythonCommand(command, addToHistory);\n\t\t}\n\t}\n\n\n    async stepHistory(didx) {\n\t\tthis.history.setTemporaryValue(this.value);\n\t\tconst changed = this.history.step(didx);\n\t\tif(!changed){\n\t\t\treturn\n\t\t}\n\t\tthis.immedateClearSyntaxError();\n\t\tthis.editor.pushUndoStop();\n\t\t// Use a multi cursor before and after the edit operation to indicate that this is a history item\n\t\t// change. In onDidChangeCursorSelection will check for a secondary selection and use the presence \n\t\t// of it to deduce that a history step occurred. We then immediately clear the secondary selection\n\t\t// to prevent the user from ever seeing it.\n\t\tthis.editor.getModel().pushEditOperations(\n\t\t\t[this.editor.getSelection(), new _monaco__WEBPACK_IMPORTED_MODULE_1__[\"monaco\"].Selection(1, 1, 1, 1)], \n\t\t\t[{\n\t\t\t\trange : this.allOfInputSelection,\n\t\t\t\ttext : (await this.history.value) || \"\"\n\t\t\t}],\n\t\t\t() => [this.endOfInputSelection, new _monaco__WEBPACK_IMPORTED_MODULE_1__[\"monaco\"].Selection(1, 1, 1, 1)]\n\t\t);\n\t\tthis.editor.pushUndoStop();\n\t\t// For some reason we end up selecting the input. This is maybe a glitch with pushEditOperations?\n\t\t// It doesn't happen with this.editor.executeEdits, but using executeEdits doesn't work because\n\t\t// for some reason we can't convince it that the before cursor state is a multi cursor like we need \n\t\t// for this strategy.\n\t\tthis.editor.setPosition(this.endOfInputPosition);\n\t\tthis.revealSelection();\n\t\t// Record how much the history index changed for undo.\n\t\tthis.historyIndexRedoStack = [];\n\t\tthis.historyIndexUndoStack.push(didx);\n\t\tthis.justSteppedHistory = true;\n\t\tlet uuid = Object(uuid__WEBPACK_IMPORTED_MODULE_5__[\"v4\"])();\n\t\tthis.historyStepUUID = uuid;\n\t\tawait Object(_utils__WEBPACK_IMPORTED_MODULE_2__[\"sleep\"])(5000);\n\t\t// Clear the special state after an interlude to avoid surprising weird state if the user\n\t\t// comes back after doing something else.\n\t\tif(this.historyStepUUID === uuid){\n\t\t\tthis.justSteppedHistory = false;\n\t\t}\n\t}\n\n\t\n\tmaybeStepHistory(event){\n\t\tlet result = this.shouldStepHistory(event);\n\t\tif(result){\n\t\t\tlet dir = {\"ArrowUp\" : -1, \"ArrowDown\" : 1 }[event.key];\n\t\t\tthis.stepHistory(dir);\n\t\t}\n\t\treturn result;\n\t}\n\n    shouldStepHistory(event){\n\t\tif(![\"ArrowUp\", \"ArrowDown\"].includes(event.key)){\n\t\t\treturn false;\n\t\t}\n\t\tif(this.justSteppedHistory){\n\t\t\treturn true;\n\t\t}\n\t\tif(!this.editor.getSelection().isEmpty()){\n\t\t\treturn false;\n\t\t}\n\t\tlet pos = this.editor.getPosition();\n        if(event.key === \"ArrowUp\"){\n\t\t\treturn this.getScreenLineOfPosition(pos) === this.getScreenLineOfPosition(this.startOfInputPosition);\n        }\n        if(event.key === \"ArrowDown\"){\n            return this.getScreenLineOfPosition(pos) === this.getScreenLineOfPosition(this.endOfInputPosition);\n        }\n        throw Error(\"Unreachable\");\n\t}\n\n\tshouldEnterSubmit(event){\n\t\tif(event.shiftKey){\n\t\t\treturn false;\n\t\t}\n\t\tif(event.ctrlKey){\n\t\t\treturn true;\n\t\t}\n\t\tif(this.editor.getPosition().lineNumber !== this.getModelLineCount()){\n\t\t\treturn false;\n\t\t}\n\t\tif(this.getLengthOfLastModelLine() == 0){\n\t\t\treturn true;\n\t\t}\n\t\tif(this.value.search(\"\\n\") >= 0){\n\t\t\treturn false;\n\t\t}\n\t\tif(/(:|\\\\)\\s*$/.test(this.value)){\n\t\t\treturn false;\n\t\t}\n        return true;\n\t}\n\n\tasync submit(addToHistory=true){\n\t\tif(this.syntaxErrorWidget){\n\t\t\t// Don't do anything if there's already a syntax error...\n\t\t\treturn;\n\t\t}\n\t\tconst code = this.value;\n\t\tif(!code.trim()){\n\t\t\treturn;\n\t\t}\n\t\t// this.editor.setValue(this.editor.getValue().trimEnd());\n\t\t// this.printToConsole(\"\\n\");\n\t\t// await sleep(0);\n\t\t// editor.setValue seems to undo changes to the console so readOnly has to be set second\n\t\t// and we need to sleep first.\n\t\tthis.readOnly = true; \n\t\t// execution is a handle we can use to cancel.\n\t\tconst execution = this.executor.execute(code);\n\t\tthis.currentExecution = execution;\n\t\texecution.onStdout((data) => this.printToConsole(data));\n\t\texecution.onStderr((data) => this.printToConsole(data));\n\t\tlet syntaxCheck = await execution.validate_syntax(code);\n\t\tif(!syntaxCheck.valid){\n\t\t\tawait Object(_utils__WEBPACK_IMPORTED_MODULE_2__[\"sleep\"])(0);\n\t\t\tthis.showSyntaxError(syntaxCheck.errors);\n\t\t\tthis.currentExecution = undefined;\n\t\t\tthis.readOnly = false;\n\t\t\t// await sleep(0);\n\t\t\t// this.editor.setPosition(this.endOfInputPosition);\n\t\t\treturn;\n\t\t}\n\n\t\tthis.editor.setValue(this.editor.getValue().trimEnd());\n\t\tthis.printToConsole(\"\\n\");\n\t\tawait Object(_utils__WEBPACK_IMPORTED_MODULE_2__[\"sleep\"])(0);\n\t\tif(addToHistory){\n\t\t\tthis.history.push(code);\n\t\t}\n        await Object(_utils__WEBPACK_IMPORTED_MODULE_2__[\"sleep\"])(0);\n\t\tthis.historyIdx = this.history.length;\n\n\t\tlet result;\n\t\ttry {\n\t\t\tresult = await execution.result();\n\t\t\tthis.addOutput(result);\n\t\t} catch(e) {\n\t\t\tthis.addOutput(e.traceback);\n\t\t}\n\t\tthis.currentExecution = undefined;\n\t\tthis.prepareInput();\n\t\tawait Object(_utils__WEBPACK_IMPORTED_MODULE_2__[\"sleep\"])(0);\n\t\tthis.readOnly = false;\n\t}\n\n\taddOutput(value){\n\t\t// If something printed to stdout but didn't end the line, we'll have a nonempty line\n\t\t// at the bottom. We don't want our output sharing with that, so insert a newline in \n\t\t// this case.\n\t\tif(this.getLengthOfLastModelLine() !== 0){\n\t\t\tthis.printToConsole(\"\\n\");\n\t\t}\n\t\tif(value === undefined){\n\t\t\treturn;\n\t\t}\n\t\tthis.printToConsole(`${value}\\n`);\n\t}\n\n    printToConsole(value){\n\t\tconst oldNumScreenLines = this.getScreenLineCount();\n\t\tconst oldNumModelLines = this.getModelLineCount();\n\t\tthis.editor.setValue(`${this.editor.getValue()}${value}`);\n\t\tconst newNumScreenLines = this.getScreenLineCount();\n\t\tconst newNumModelLines = this.getModelLineCount();\n\t\tfor(let curLine = oldNumModelLines + 1; curLine <= newNumModelLines; curLine++){\n\t\t\tthis.outputModelLines[curLine] = true;\n\t\t}\n\t\tfor(let curLine = oldNumScreenLines + 1; curLine <= newNumScreenLines; curLine++){\n\t\t\tthis.outputScreenLines[curLine] = true;\n\t\t}\n\t}\n\n\tprepareInput(){\n\t\tconst numScreenLines = this.getScreenLineCount();\n\t\tlet numModelLines = this.getModelLineCount();\n\t\tif(this.getLengthOfLastModelLine() === 0){\n\t\t\t// Usually there is an empty model line at the bottom, it has been marked as an output line\n\t\t\t// so onmark it.\n\t\t\tdelete this.outputModelLines[numModelLines];\n\t\t\tdelete this.outputScreenLines[numScreenLines];\n\t\t} else {\n\t\t\t// Ocassionally something printed stuff to stdout but didn't terminate the line.\n\t\t\t// We terminate it ourselves in that case to prevent weirdness.\n\t\t\tthis.editor.setValue(this.editor.getValue() + \"\\n\");\n\t\t\tnumModelLines++;\n\t\t}\n\t\tthis.readOnlyLines = numModelLines - 1;\n\t\tthis.firstLines[numModelLines] = true;\n\t\t// the value of firstLines signals that the \"line number\" should show as a \">>>\" prompt.\n\t\t// we need to refresh the editor to get it to show up though so set value to current value.\n\t\tthis.editor.setValue(this.editor.getValue());\t\t\n\t\t\n\t\tthis.editor.setPosition(this.endOfInputPosition);\n\t\tthis.revealSelection();\n\t}\n\n\tupdateSyntaxErrorDecorationAttributes(state){\n\t\tlet elts = [\n\t\t\tdocument.querySelector(\".repl-error-decoration-highlight\"),\n\t\t\tdocument.querySelector(\".repl-error-decoration-text\"),\n\t\t\tdocument.querySelector(\".repl-error-decoration-underline\"),\n\t\t\tdocument.querySelector(\".repl-error-widget\"),\n\t\t];\n\t\t// console.log(\"updateSyntaxErrorDecorationAttributes state:\", state, \"elts:\", elts);\n\t\tfor(let elt of elts){\n\t\t\tif(!elt){\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tthis.updateSyntaxErrorDecorationAttributesOnElement(elt, state);\n\t\t}\n\t}\t\n\n\tupdateSyntaxErrorDecorationAttributesOnElement(elt, state){\n\t\tfor(let [k, v] of Object.entries(state)){\n\t\t\tif((v === false || v === \"false\")){\n\t\t\t\telt.removeAttribute(k);\n\t\t\t} else {\n\t\t\t\telt.setAttribute(k, v);\n\t\t\t}\n\t\t}\n\t}\n\n\timmedateClearSyntaxError(){\n\t\tif(!this.syntaxErrorWidget){\n\t\t\treturn;\n\t\t}\t\t\n\t\tthis.editor.removeContentWidget(this.syntaxErrorWidget);\n\t\tthis.syntaxErrorWidget = undefined;\n\t\tthis.editor.deltaDecorations(this.decorationIds || [], []);\n\t\tthis.decorationIds = [];\n\t}\n\n\tasync clearSyntaxError(){\n\t\tif(!this.syntaxErrorWidget){\n\t\t\treturn;\n\t\t}\n\t\tlet syntaxErrorWidget = this.syntaxErrorWidget;\n\t\tfor(let i=0; i < 4; i++){\n\t\t\t// This works rather inconsistently. I don't understand why.\n\t\t\t// Doing it 4 times seems to work though...\n\t\t\tthis.updateSyntaxErrorDecorationAttributes({ \"transition\" : \"hide\", \"not-visible\" : true });\n\t\t\tawait Object(_utils__WEBPACK_IMPORTED_MODULE_2__[\"sleep\"])(10);\n\t\t}\n\t\tawait Object(_utils__WEBPACK_IMPORTED_MODULE_2__[\"promiseFromDomEvent\"])(document.querySelector(\".repl-error-widget\"), \"transitionend\");\n\t\tthis.updateSyntaxErrorDecorationAttributes({ \"transition\" : false });\n\t\tthis.editor.removeContentWidget(syntaxErrorWidget);\n\t\tthis.editor.deltaDecorations(this.decorationIds || [], []);\n\t\tthis.decorationIds = [];\n\t\tthis.syntaxErrorWidget = undefined;\n\t}\n\t\n\tasync showSyntaxError(errors){\n\t\t// TODO: maybe handle multiple syntax errors case...? Probably not important...\n\t\tlet error = errors[0];\n\t\tlet [start_line, start_col] = error.start_pos;\n\t\tstart_line += this.readOnlyLines;\n\t\tlet [end_line, end_col] = error.end_pos;\n\t\tend_line += this.readOnlyLines;\t\t\n\t\tlet decorations = [{\n\t\t\trange: new _monaco__WEBPACK_IMPORTED_MODULE_1__[\"monaco\"].Range(start_line, 1, end_line, 1),\n\t\t\toptions: {\n\t\t\t\tisWholeLine: true,\n\t\t\t\tafterContentClassName: 'repl-error repl-error-fade-in repl-error-decoration-underline',\n\t\t\t}\n\t\t}];\n\t\t// console.log([start_line, start_col, end_line, end_col + 1]);\n\t\tif(start_line !== end_line || start_col != end_col){\n\t\t\t// let endCol = this.editor.getModel().getLineMaxColumn(line);\n\t\t\tdecorations.push({\n\t\t\t\trange: new _monaco__WEBPACK_IMPORTED_MODULE_1__[\"monaco\"].Range(start_line, start_col, end_line, end_col + 1),\n\t\t\t\toptions: {\n\t\t\t\t\t// isWholeLine: true,\n\t\t\t\t\tclassName: 'repl-error repl-error-fade-in repl-error-decoration-highlight',\n\t\t\t\t\tinlineClassName : 'repl-error repl-error-decoration-text'\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\tawait Object(_utils__WEBPACK_IMPORTED_MODULE_2__[\"sleep\"])(0);\n\t\tthis.editor.deltaDecorations(this.decorationsIds || [], []);\n\t\tawait Object(_utils__WEBPACK_IMPORTED_MODULE_2__[\"sleep\"])(0);\n\t\tthis.decorations = decorations;\n\t\tthis.decorationIds = this.editor.deltaDecorations([], decorations);\n\t\t// this.editor.onDidChangeModelDecorations((e) => {\n\t\t// \tconsole.log(\"decs:\", this.editor.getLineDecorations(this.editor.getPosition().lineNumber))\n\t\t// });\n\t\tthis.syntaxErrorWidget = {\n\t\t\tdomNode: null,\n\t\t\tgetId: function() {\n\t\t\t\treturn 'error.widget';\n\t\t\t},\n\t\t\tgetDomNode: function() {\n\t\t\t\tif (!this.domNode) {\n\t\t\t\t\tthis.domNode = document.createElement('div');\n\t\t\t\t\tthis.domNode.innerText = `${error.msg}`; //`${error.type}: ${error.msg}`;\n\t\t\t\t\tthis.domNode.classList.add(\"repl-error\");\n\t\t\t\t\tthis.domNode.classList.add(\"repl-error-fade-in\");\n\t\t\t\t\tthis.domNode.classList.add(\"repl-error-widget\");\n\t\t\t\t\t// this.domNode.setAttribute(\"not-visible\", \"\");\n\t\t\t\t}\n\t\t\t\treturn this.domNode;\n\t\t\t},\n\t\t\tgetPosition: function() {\n\t\t\t\treturn {\n\t\t\t\t\tposition: {\n\t\t\t\t\t\tlineNumber: start_line, // Is this the best line to choose?\n\t\t\t\t\t\tcolumn: 1\n\t\t\t\t\t},\n\t\t\t\t\tpreference: [_monaco__WEBPACK_IMPORTED_MODULE_1__[\"monaco\"].editor.ContentWidgetPositionPreference.BELOW]\n\t\t\t\t};\n\t\t\t}\n\t\t};\n\t\tthis.editor.addContentWidget(this.syntaxErrorWidget);\n\t\tawait Object(_utils__WEBPACK_IMPORTED_MODULE_2__[\"sleep\"])(0);\n\t\t// console.log(document.querySelector(\".repl-error-widget\"));\n\t\tthis.updateSyntaxErrorDecorationAttributes({ \"not-visible\" : \"\", \"transition\" : \"show\"});\n\t\tawait Object(_utils__WEBPACK_IMPORTED_MODULE_2__[\"sleep\"])(30);\n\t\tthis.updateSyntaxErrorDecorationAttributes({ \"not-visible\" : false, \"transition\" : \"show\"});\n\t\tawait Object(_utils__WEBPACK_IMPORTED_MODULE_2__[\"promiseFromDomEvent\"])(document.querySelector(\".repl-error-widget\"), \"transitionend\");\n\t\tthis.updateSyntaxErrorDecorationAttributes({ \"not-visible\" : false, \"transition\" : false});\n\t\treturn;\n\t}\n}\ncustomElements.define('repl-terminal', ReplElement);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvcmVwbC5qcz9kZTg5Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBd0U7QUFDdEM7QUFDRjtBQUNrQjtBQUNkO0FBQ1M7QUFDVDs7QUFFcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QiwyQ0FBMkM7QUFDeEU7O0FBRUE7QUFDQSxhQUFhLDhDQUFNO0FBQ25COztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLFNBQVMsOENBQU07QUFDZjs7QUFFQTtBQUNBLFNBQVMsOENBQU07QUFDZjs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxPQUFPLGtDQUFrQztBQUN6QyxPQUFPLGtDQUFrQztBQUN6QyxTQUFTLDhDQUFNO0FBQ2Y7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxPQUFPLG1CQUFtQjtBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsOEJBQThCLDhDQUFNO0FBQ3BDO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEU7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUUsNEZBQThCLENBQUMsOENBQU07QUFDdkMsMkJBQTJCLGdEQUFPO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUdBQXlHLGdCQUFnQjs7QUFFekg7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLGtDQUFrQyxtQkFBbUI7QUFDckQsaUNBQWlDO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSx1Q0FBdUM7QUFDdkM7QUFDQSw4Q0FBOEMscUNBQXFDO0FBQ25GO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQSxnQkFBZ0IsOENBQU07QUFDdEI7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUgsUUFBUSxvREFBSztBQUNiO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0Esa0Q7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCwwQkFBMEIsc0VBQXNFO0FBQ2hHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVLG9EQUFLO0FBQ2Y7QUFDQSxTQUFTLG9EQUFLO0FBQ2Q7QUFDQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QztBQUNBO0FBQ0EsR0FBRztBQUNILDZCO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUgsMkJBQTJCO0FBQzNCLDRCQUE0QjtBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEsb0RBQUs7QUFDYjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTiw2QkFBNkIsc0VBQXNFO0FBQ25HO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0EsZ0RBQWdELGtDQUFrQztBQUNsRjtBQUNBO0FBQ0EsTUFBTTtBQUNOOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILEU7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEU7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsOENBQU07QUFDekI7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLDhDQUFNO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEIsK0JBQStCO0FBQzdEO0FBQ0EsU0FBUyxvREFBSztBQUNkO0FBQ0EsR0FBRztBQUNILDhCQUE4QiwrQkFBK0I7QUFDN0Q7QUFDQTtBQUNBLG9CQUFvQjtBQUNwQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLG9EQUFLO0FBQ2I7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4Q0FBOEMsOENBQU07QUFDcEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBLEk7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwRTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEc7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEsbUJBQW1CO0FBQzNCO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0NBQW9DLDhDQUFNO0FBQzFDO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSix3Q0FBd0MsOENBQU07QUFDOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSwrQ0FBTTtBQUNuQjtBQUNBLFFBQVEsb0RBQUs7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBLGNBQWMsaUNBQWlDO0FBQy9DO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVMsb0RBQUs7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsUUFBUSxvREFBSztBQUNiO0FBQ0E7QUFDQTtBQUNBLGNBQWMsb0RBQUs7QUFDbkI7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLG9EQUFLO0FBQ2I7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QixNQUFNO0FBQy9COztBQUVBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQix1QkFBdUIsRUFBRSxNQUFNO0FBQ3pEO0FBQ0E7QUFDQSx5Q0FBeUMsNkJBQTZCO0FBQ3RFO0FBQ0E7QUFDQSwwQ0FBMEMsOEJBQThCO0FBQ3hFO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtDOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYyxPQUFPO0FBQ3JCO0FBQ0E7QUFDQSwrQ0FBK0MsOENBQThDO0FBQzdGLFNBQVMsb0RBQUs7QUFDZDtBQUNBLFFBQVEsa0VBQW1CO0FBQzNCLDhDQUE4Qyx1QkFBdUI7QUFDckU7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQztBQUNBO0FBQ0EsY0FBYyw4Q0FBTTtBQUNwQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsOENBQU07QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBLFFBQVEsb0RBQUs7QUFDYjtBQUNBLFFBQVEsb0RBQUs7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQSxpQ0FBaUMsVUFBVSxFQUFFLE1BQU0sV0FBVyxJQUFJLFVBQVU7QUFDNUU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ04sa0JBQWtCLDhDQUFNO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSxvREFBSztBQUNiO0FBQ0EsOENBQThDLDJDQUEyQztBQUN6RixRQUFRLG9EQUFLO0FBQ2IsOENBQThDLDhDQUE4QztBQUM1RixRQUFRLGtFQUFtQjtBQUMzQiw4Q0FBOEMsNkNBQTZDO0FBQzNGO0FBQ0E7QUFDQTtBQUNBIiwiZmlsZSI6Ii4vc3JjL3JlcGwuanMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB1cGRhdGVQeXRob25MYW5ndWFnZURlZmluaXRpb24gfSBmcm9tIFwiLi9weXRob25UZXh0Q29tcGxldGlvblwiO1xuaW1wb3J0IHsgbW9uYWNvIH0gZnJvbSBcIi4vbW9uYWNvXCI7XG5pbXBvcnQgeyBzbGVlcCB9IGZyb20gJy4vdXRpbHMnO1xuaW1wb3J0IHsgUHl0aG9uRXhlY3V0b3IgfSBmcm9tIFwiLi9weXRob25FeGVjdXRvclwiO1xuaW1wb3J0IHsgSGlzdG9yeSB9IGZyb20gXCIuL2hpc3RvcnlcIjtcbmltcG9ydCB7IHByb21pc2VGcm9tRG9tRXZlbnQgfSBmcm9tIFwiLi91dGlsc1wiXG5pbXBvcnQgeyB2NCBhcyB1dWlkdjQgfSBmcm9tIFwidXVpZFwiO1xuXG5jbGFzcyBSZXBsRWxlbWVudCBleHRlbmRzIEhUTUxFbGVtZW50IHtcblx0c3RhdGljIGdldCBkZWZhdWx0RWRpdG9yT3B0aW9ucygpe1xuXHRcdHJldHVybiB7XG5cdFx0XHR2YWx1ZTogXCJcIixcblx0XHRcdGxhbmd1YWdlIDogXCJweXRob25cIixcblx0XHRcdGZvbGRpbmcgOiBmYWxzZSxcblx0XHRcdHRoZW1lIDogXCJ2cy1kYXJrXCIsXG5cdFx0XHRyb3VuZGVkU2VsZWN0aW9uIDogZmFsc2UsXG5cdFx0XHRmb250U2l6ZSA6IDIwLFxuXHRcdFx0bWluaW1hcDoge1xuXHRcdFx0XHRlbmFibGVkOiBmYWxzZVxuXHRcdFx0fSxcblx0XHRcdHdvcmRXcmFwOiAnd29yZFdyYXBDb2x1bW4nLFxuXHRcdFx0d29yZFdyYXBDb2x1bW46IDgwLFxuXHRcdFx0b3ZlcnZpZXdSdWxlckxhbmVzIDogMCxcblx0XHRcdHNjcm9sbEJleW9uZExhc3RMaW5lIDogdHJ1ZSxcblx0XHRcdGNvbnRleHRtZW51IDogZmFsc2UsXG5cdFx0XHRyZWFkT25seSA6IHRydWUsXG5cdFx0XHRsaW5lTnVtYmVycyA6IFwibm9uZVwiXG5cdFx0fTtcbiAgICB9XG4gICAgXG4gICAgc3RhdGljIGdldCBzdHlsZXMoKSB7XG4gICAgICAgIHJldHVybiBgXG4gICAgICAgICAgICAucm9vdCB7XG4gICAgICAgICAgICAgICAgaGVpZ2h0IDogMTAwJTtcbiAgICAgICAgICAgICAgICB3aWR0aCA6IDEwMCU7XG4gICAgICAgICAgICB9XG4gICAgICAgIGBcblx0fVxuXG5cdGdldCByZWFkT25seSgpe1xuXHRcdHJldHVybiB0aGlzLl9yZWFkT25seTtcblx0fVxuXHRcblx0c2V0IHJlYWRPbmx5KHYpIHtcblx0XHR0aGlzLl9yZWFkT25seSA9ICEhdjtcblx0XHQvLyBNb25hY28gaGFzIGFuIG9wdGlvbiBjYWxsZWQgXCJjdXJzb3JCbGlua2luZ1wiIHRoYXQgd2UgdHJpZWQgdG8gc2V0IHRvIGhpZGRlbixcblx0XHQvLyBidXQgaXQgZG9lc24ndCBzZWVtIHRvIGRvIGFueXRoaW5nLiBNb2RpZnlpbmcgdGhlIGRvbSBkaXJlY3RseSB3b3JrcyBmaW5lIHRob3VnaC5cblx0XHQvLyBDdXJzb3IgYmxpbmtpbmcgaGFwcGVucyBieSB0b2dnbGluZyB2aXNpYmlsaXR5LCBidXQgd2UgY2FuIHVzZSBkaXNwbGF5IHdpdGhvdXQgdHJvdWJsZS5cblx0XHR0aGlzLnF1ZXJ5U2VsZWN0b3IoXCIuY3Vyc29yXCIpLnN0eWxlLmRpc3BsYXkgPSB2ID8gXCJub25lXCIgOiBcImJsb2NrXCI7XG5cdFx0Ly8gY29uc29sZS5sb2codGhpcy5xdWVyeVNlbGVjdG9yKFwiLmN1cnNvclwiKS5zdHlsZS5kaXNwbGF5KTtcblx0XHR0aGlzLnF1ZXJ5U2VsZWN0b3IoXCIudmlldy1saW5lc1wiKS5zdHlsZS5jdXJzb3IgPSB2ID8gXCJkZWZhdWx0XCIgOiBcInRleHRcIjtcblx0XHR0aGlzLmVkaXRvci51cGRhdGVPcHRpb25zKHsgcmVuZGVyTGluZUhpZ2hsaWdodCA6IHYgPyBcIm5vbmVcIiA6IFwibGluZVwifSk7XG5cdH1cblxuXHRnZXQgc3RhcnRPZklucHV0UG9zaXRpb24oKXtcblx0XHRyZXR1cm4gbmV3IG1vbmFjby5Qb3NpdGlvbih0aGlzLnJlYWRPbmx5TGluZXMgKyAxLCAxKTtcblx0fVxuXG5cdGdldCBlbmRPZklucHV0UG9zaXRpb24oKXtcblx0XHRyZXR1cm4gdGhpcy5lZGl0b3IuZ2V0TW9kZWwoKS5nZXRQb3NpdGlvbkF0KHRoaXMuZWRpdG9yLmdldFZhbHVlKCkubGVuZ3RoKTtcblx0fVxuXG5cdGdldCBlbmRPZklucHV0U2VsZWN0aW9uKCl7XG5cdFx0cmV0dXJuIG1vbmFjby5TZWxlY3Rpb24uZnJvbVBvc2l0aW9ucyh0aGlzLmVuZE9mSW5wdXRQb3NpdGlvbiwgdGhpcy5lbmRPZklucHV0UG9zaXRpb24pO1xuXHR9XG5cblx0Z2V0IGFsbE9mSW5wdXRTZWxlY3Rpb24oKXtcblx0XHRyZXR1cm4gbW9uYWNvLlNlbGVjdGlvbi5mcm9tUG9zaXRpb25zKHRoaXMuc3RhcnRPZklucHV0UG9zaXRpb24sIHRoaXMuZW5kT2ZJbnB1dFBvc2l0aW9uKTtcblx0fVxuXG5cdGdldCB2YWx1ZSgpe1xuXHRcdHJldHVybiB0aGlzLmVkaXRvci5nZXRNb2RlbCgpLmdldFZhbHVlSW5SYW5nZSh0aGlzLmFsbE9mSW5wdXRTZWxlY3Rpb24pO1xuXHR9XG5cblx0ZG9lc1NlbGVjdGlvbkludGVyc2VjdFJlYWRPbmx5UmVnaW9uKHNlbCl7XG5cdFx0cmV0dXJuIHRoaXMuZWRpdG9yLmdldFNlbGVjdGlvbigpLmdldFN0YXJ0UG9zaXRpb24oKS5pc0JlZm9yZSh0aGlzLnN0YXJ0T2ZJbnB1dFBvc2l0aW9uKTtcblx0fVxuXG5cdGRvZXNDdXJyZW50U2VsZWN0aW9uSW50ZXJzZWN0UmVhZE9ubHlSZWdpb24oKXtcblx0XHRyZXR1cm4gdGhpcy5kb2VzU2VsZWN0aW9uSW50ZXJzZWN0UmVhZE9ubHlSZWdpb24odGhpcy5lZGl0b3IuZ2V0U2VsZWN0aW9uKCkpO1xuXHR9XG5cblx0YXRTdGFydE9mSW5wdXRSZWdpb24oKXtcblx0XHRyZXR1cm4gdGhpcy5lZGl0b3IuZ2V0U2VsZWN0aW9uKCkuaXNFbXB0eSgpICYmIHRoaXMuZWRpdG9yLmdldFBvc2l0aW9uKCkuZXF1YWxzKHRoaXMuc3RhcnRPZklucHV0UG9zaXRpb24pO1xuXHR9XG5cblx0c2V0U2VsZWN0aW9uRGlyZWN0aW9uKHNlbCwgZGlyKXtcblx0XHRsZXQge2xpbmVOdW1iZXIgOiBzbGluZSwgY29sdW1uIDogc2NvbH0gPSBzZWwuZ2V0U3RhcnRQb3NpdGlvbigpO1xuXHRcdGxldCB7bGluZU51bWJlciA6IGVsaW5lLCBjb2x1bW4gOiBlY29sfSA9IHNlbC5nZXRFbmRQb3NpdGlvbigpO1xuXHRcdHJldHVybiBtb25hY28uU2VsZWN0aW9uLmNyZWF0ZVdpdGhEaXJlY3Rpb24oc2xpbmUsIHNjb2wsIGVsaW5lLCBlY29sLCBkaXIpO1xuXHR9XG5cblx0Z2V0IGxpbmVIZWlnaHQoKXtcblx0XHRsZXQgZWx0ID0gdGhpcy5xdWVyeVNlbGVjdG9yKFwiLnZpZXctbGluZVwiKTtcblx0XHRyZXR1cm4gZWx0ICYmIE51bWJlcihlbHQuc3R5bGUuaGVpZ2h0LnNsaWNlKDAsLTIpKTtcblx0fVxuXG5cdGdldCBzY3JlZW5IZWlnaHQoKXtcblx0XHRyZXR1cm4gTnVtYmVyKGdldENvbXB1dGVkU3R5bGUoZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcInJlcGwtdGVybWluYWxcIikpLmhlaWdodC5zbGljZSgwLC0yKSk7XG5cdH1cblxuXHRnZXQgbGluZXNQZXJTY3JlZW4oKXtcblx0XHRyZXR1cm4gTWF0aC5mbG9vcih0aGlzLnNjcmVlbkhlaWdodCAvIHRoaXMubGluZUhlaWdodCk7XG5cdH1cblxuXHRnZXRTY3JlZW5MaW5lc0luTW9kZWxMaW5lKGxpbmVOdW1iZXIpe1xuXHRcdGxldCBib3R0b20gPSB0aGlzLmVkaXRvci5nZXRUb3BGb3JQb3NpdGlvbihsaW5lTnVtYmVyLCB0aGlzLmVkaXRvci5nZXRNb2RlbCgpLmdldExpbmVMZW5ndGgobGluZU51bWJlcikpO1xuXHRcdGxldCB0b3AgPSB0aGlzLmVkaXRvci5nZXRUb3BGb3JMaW5lTnVtYmVyKGxpbmVOdW1iZXIpO1xuXHRcdHJldHVybiBNYXRoLmZsb29yKChib3R0b20gLSB0b3ApL3RoaXMubGluZUhlaWdodCArIDEpO1xuXHR9XG5cdFxuXHRnZXRMYXN0U2NyZWVuTGluZU9mTW9kZWxMaW5lKGxpbmVOdW1iZXIpe1xuXHRcdGxldCBib3R0b20gPSB0aGlzLmVkaXRvci5nZXRUb3BGb3JQb3NpdGlvbihsaW5lTnVtYmVyLCB0aGlzLmVkaXRvci5nZXRNb2RlbCgpLmdldExpbmVMZW5ndGgobGluZU51bWJlcikpO1xuXHRcdGxldCB0b3AgPSAwO1xuXHRcdHJldHVybiBNYXRoLmZsb29yKChib3R0b20gLSB0b3ApL3RoaXMubGluZUhlaWdodCArIDEpO1xuXHR9XG5cblx0Z2V0U2NyZWVuTGluZU9mUG9zaXRpb24ocG9zKXtcblx0XHRsZXQge2xpbmVOdW1iZXIsIGNvbHVtbn0gPSBwb3M7XG5cdFx0aWYoIU51bWJlci5pc0ludGVnZXIobGluZU51bWJlcikgfHwgIU51bWJlci5pc0ludGVnZXIoY29sdW1uKSl7XG5cdFx0XHR0aHJvdyBFcnJvcihcIkludmFsaWQgcG9zaXRpb24hXCIpO1xuXHRcdH1cblx0XHRsZXQgYm90dG9tID0gdGhpcy5lZGl0b3IuZ2V0VG9wRm9yUG9zaXRpb24obGluZU51bWJlciwgY29sdW1uKTtcblx0XHRsZXQgdG9wID0gMDtcblx0XHRyZXR1cm4gTWF0aC5mbG9vcigoYm90dG9tIC0gdG9wKS90aGlzLmxpbmVIZWlnaHQgKyAxKTtcblx0fVxuXG5cdGdldE1vZGVsTGluZUNvdW50KCl7XG5cdFx0cmV0dXJuIHRoaXMuZWRpdG9yLmdldE1vZGVsKCkuZ2V0TGluZUNvdW50KCk7XG5cdH1cblxuXHRnZXRTY3JlZW5MaW5lQ291bnQoKXtcblx0XHRsZXQgdG90YWxMaW5lcyA9IHRoaXMuZWRpdG9yLmdldE1vZGVsKCkuZ2V0TGluZUNvdW50KCk7XG5cdFx0cmV0dXJuIHRoaXMuZ2V0TGFzdFNjcmVlbkxpbmVPZk1vZGVsTGluZSh0b3RhbExpbmVzKTtcblx0fVxuXG5cdHJldmVhbFNlbGVjdGlvbihzY3JvbGxUeXBlID0gbW9uYWNvLmVkaXRvci5TY3JvbGxUeXBlLkltbWVkaWF0ZSl7XG5cdFx0dGhpcy5lZGl0b3IucmV2ZWFsUmFuZ2UodGhpcy5lZGl0b3IuZ2V0U2VsZWN0aW9uKCksIHNjcm9sbFR5cGUpO1xuXHR9XG5cblx0Z2V0TGVuZ3RoT2ZMYXN0TW9kZWxMaW5lKCl7XG5cdFx0cmV0dXJuIHRoaXMuZWRpdG9yLmdldE1vZGVsKCkuZ2V0TGluZUxlbmd0aCh0aGlzLmdldE1vZGVsTGluZUNvdW50KCkpO1xuXHR9XHRcdFxuXG5cdGZvY3VzKCl7XG5cdFx0dGhpcy5lZGl0b3IuZm9jdXMoKTtcblx0fVxuXG5cdGNvbnN0cnVjdG9yKG9wdGlvbnMpe1xuXHRcdHN1cGVyKCk7XG5cdFx0dGhpcy5fZm9jdXNlZCA9IGZhbHNlO1xuXHRcdHRoaXMuX3Zpc2libGUgPSB0cnVlO1xuXHRcdHRoaXMuZWRpdG9yT3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oUmVwbEVsZW1lbnQuZGVmYXVsdEVkaXRvck9wdGlvbnMsIG9wdGlvbnMpO1xuXHRcdHRoaXMucmVhZE9ubHlMaW5lcyA9IDE7XG5cdFx0dXBkYXRlUHl0aG9uTGFuZ3VhZ2VEZWZpbml0aW9uKG1vbmFjbywgdGhpcyk7XG4gICAgICAgIHRoaXMuaGlzdG9yeSA9IG5ldyBIaXN0b3J5KCk7XG5cdFx0dGhpcy5oaXN0b3J5SWR4ID0gdGhpcy5oaXN0b3J5Lmxlbmd0aCB8fCAwO1xuXHRcdHRoaXMuaGlzdG9yeUluZGV4VW5kb1N0YWNrID0gW107XG5cdFx0dGhpcy5oaXN0b3J5SW5kZXhSZWRvU3RhY2sgPSBbXTtcblx0XHR0aGlzLmZpcnN0TGluZXMgPSB7fTtcblx0XHR0aGlzLm91dHB1dFNjcmVlbkxpbmVzID0ge307XG5cdFx0dGhpcy5vdXRwdXRNb2RlbExpbmVzID0ge307XG5cdFx0dGhpcy5jb25uZWN0ZWRQcm9taXNlID0ge307XG5cdFx0dGhpcy5jb25uZWN0ZWRQcm9taXNlLnByb21pc2UgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiBPYmplY3QuYXNzaWduKHRoaXMuY29ubmVjdGVkUHJvbWlzZSwge3Jlc29sdmUsIHJlamVjdH0pKTtcblxuXHRcdHRoaXMubGluZU9mZnNldE11dGF0aW9uT2JzZXJ2ZXIgPSBuZXcgTXV0YXRpb25PYnNlcnZlcigobXV0YXRpb25zTGlzdCwgb2JzZXJ2ZXIpID0+IHtcblx0XHRcdHRoaXMudXBkYXRlTGluZU9mZnNldHMoKTtcblx0XHR9KTtcblx0XHQvLyBUbyBkaXNwbGF5IG91ciBvdXRwdXQgbGluZXMgbGVmdCBvZiBvdXIgaW5wdXQgbGluZXMsIHdlIG5lZWQgdG8gZG8gdGhlIGZvbGxvd2luZzpcblx0XHQvLyAgICAoMSkgcmVtb3ZlIGNvbnRhaW46c3RyaWN0OyBhbmQgb3ZlcmZsb3c6aGlkZTsgZnJvbSAubGluZXMtY29udGVudFxuXHRcdC8vICAgICgyKSByZW1vdmUgb3ZlcmZsb3c6aGlkZTsgZnJvbSBcIi5tb25hY28tc2Nyb2xsYWJsZS1lbGVtZW50XCJcblx0XHQvLyBcdCAgKDMpIGF0dGFjaCBhIG11dGF0aW9uIG9ic2VydmVyIHRvIC52aWV3LWxpbmVzIHRvIG1ha2Ugc3VyZSBsZWZ0LW1hcmdpbiBpcyBzZXQgYXBwcm9wcmlhdGVseSBvbiBvdXRwdXQgbGluZSBjb250ZW50XG5cdFx0Ly8gICAgKDQpIGF0dGFjaCBhIG11dGF0aW9uIG9ic2VydmVyIHRvIC52aWV3LW92ZXJsYXlzIHRvIG1ha2Ugc3VyZSBsZWZ0LW1hcmdpbiBpcyBzZXQgYXBwcm9wcmlhdGVseSBvbiBvdXRwdXQgbGluZSBvdmVybGF5c1xuXHRcdC8vIFdlIGFyZSBkb2luZyB0aGVzZSB0aGluZ3MgaGVyZSB0byBlbnN1cmUgdGhhdCBldmVyeXRoaW5nIGNvbnRpbnVlcyB0byB3b3JrIHdoZW4gXCJzZXRNb2RlbFwiIGlzIGNhbGxlZC5cblx0XHQvLyBOb3QgY2xlYXIgd2hldGhlciB0aGlzIGlzIG5lY2Vzc2FyeSAvIGEgZ29vZCBpZGVhLi4uXG5cdFx0dGhpcy5vdmVyZmxvd011dGF0aW9uT2JzZXJ2ZXIgPSBuZXcgTXV0YXRpb25PYnNlcnZlcigobXV0YXRpb25zTGlzdCwgb2JzZXJ2ZXIpID0+IHtcblx0XHRcdGZvcihsZXQgbXV0YXRpb24gb2YgbXV0YXRpb25zTGlzdCl7XG5cdFx0XHRcdGlmKG11dGF0aW9uLnRhcmdldC5tYXRjaGVzKFwiLnZpZXctbGluZXNcIikpe1xuXHRcdFx0XHRcdGxldCBlbHQgPSBtdXRhdGlvbi50YXJnZXQucGFyZW50RWxlbWVudDtcblx0XHRcdFx0XHRpZighZWx0Lm1hdGNoZXMoXCIubGluZXMtY29udGVudFwiKSl7XG5cdFx0XHRcdFx0XHR0aHJvdyBFcnJvcihcIlRoaXMgc2hvdWxkbid0IGhhcHBlbi5cIik7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGVsdC5zdHlsZS5jb250YWluID0gXCJcIjtcblx0XHRcdFx0XHRlbHQuc3R5bGUub3ZlcmZsb3cgPSBcIlwiO1xuXHRcdFx0XHRcdGVsdCA9IGVsdC5wYXJlbnRFbGVtZW50O1xuXHRcdFx0XHRcdGlmKCFlbHQubWF0Y2hlcyhcIi5tb25hY28tc2Nyb2xsYWJsZS1lbGVtZW50XCIpKXtcblx0XHRcdFx0XHRcdHRocm93IEVycm9yKFwiVGhpcyBzaG91bGRuJ3QgaGFwcGVuLlwiKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0ZWx0LnN0eWxlLm92ZXJmbG93ID0gXCJcIjtcblx0XHRcdFx0XHR0aGlzLmxpbmVPZmZzZXRNdXRhdGlvbk9ic2VydmVyLm9ic2VydmUoXG5cdFx0XHRcdFx0XHR0aGlzLnF1ZXJ5U2VsZWN0b3IoXCIudmlldy1saW5lc1wiKSxcblx0XHRcdFx0XHRcdHtcImNoaWxkTGlzdFwiIDogdHJ1ZSwgXCJhdHRyaWJ1dGVGaWx0ZXJcIiA6IFtcInN0eWxlXCJdLCBcInN1YnRyZWVcIiA6IHRydWV9XG5cdFx0XHRcdFx0KTtcblx0XHRcdFx0XHR0aGlzLmxpbmVPZmZzZXRNdXRhdGlvbk9ic2VydmVyLm9ic2VydmUoXG5cdFx0XHRcdFx0XHR0aGlzLnF1ZXJ5U2VsZWN0b3IoXCIudmlldy1vdmVybGF5c1wiKSxcblx0XHRcdFx0XHRcdHtcImNoaWxkTGlzdFwiIDogdHJ1ZSwgXCJhdHRyaWJ1dGVGaWx0ZXJcIiA6IFtcInN0eWxlXCJdLCBcInN1YnRyZWVcIiA6IHRydWV9XG5cdFx0XHRcdFx0KTtcblx0XHRcdFx0XHR0aGlzLnVwZGF0ZUxpbmVPZmZzZXRzKCk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdC8vIHRoaXMuc3ludGF4RXJyb3JEZWNvcmF0aW9uTXV0YXRpb25PYnNlcnZlciA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKGFzeW5jIChtdXRhdGlvbnNMaXN0KSA9PiB7XG5cdFx0Ly8gXHRhd2FpdCBzbGVlcCg1KTtcblx0XHQvLyBcdGZvcihsZXQgbSBvZiBtdXRhdGlvbnNMaXN0KXtcblx0XHQvLyBcdFx0dGhpcy51cGRhdGVTeW50YXhFcnJvckRlY29yYXRpb25BdHRyaWJ1dGVzT25FbGVtZW50KG0udGFyZ2V0LCB0aGlzLnN5bnRheEVycm9yRGVjb3JhdGlvbkF0dHJpYnV0ZXMpO1xuXHRcdC8vIFx0fVxuXHRcdC8vIH0pO1xuXHR9XG5cblx0YXN5bmMgY29ubmVjdGVkQ2FsbGJhY2soKXtcblx0XHR0aGlzLmNvbm5lY3RlZFByb21pc2UucmVzb2x2ZSgpO1xuXHR9XG5cblx0YXN5bmMgc3RhcnQoZXhlY3V0b3Ipe1xuXHRcdGNvbnNvbGUubG9nKFwic3RhcnQ6OiBhd2FpdGluZyBvbiBjb25uZWN0ZWQgcHJvbWlzZVwiKTtcblx0XHRhd2FpdCB0aGlzLmNvbm5lY3RlZFByb21pc2UucHJvbWlzZTtcblx0XHRjb25zb2xlLmxvZyhcInN0YXJ0Ojogd29ya2luZy4uLlwiKTtcbiAgICAgICAgbGV0IHN0eWxlcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzdHlsZVwiKTtcblx0XHRzdHlsZXMuaW5uZXJUZXh0ID0gUmVwbEVsZW1lbnQuc3R5bGVzO1xuXHRcdHRoaXMuYXBwZW5kQ2hpbGQoc3R5bGVzKTtcblxuXHRcdHRoaXMuZHVtbXlUZXh0QXJlYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0ZXh0YXJlYVwiKTtcblx0XHR0aGlzLmR1bW15VGV4dEFyZWEuc2V0QXR0cmlidXRlKFwicmVhZG9ubHlcIiwgXCJcIik7XG5cdFx0dGhpcy5kdW1teVRleHRBcmVhLnN0eWxlLnBvc2l0aW9uID0gXCJhYnNvbHV0ZVwiO1xuXHRcdHRoaXMuZHVtbXlUZXh0QXJlYS5zdHlsZS5vcGFjaXR5ID0gMDtcblx0XHRcblx0XHR0aGlzLmFwcGVuZENoaWxkKHRoaXMuZHVtbXlUZXh0QXJlYSk7IC8vIHByZXZlbnRLZXlFdmVudCB1c2VzIHRoaXMgdGV4dCBhcmVhIFxuXHRcdGxldCBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuXHRcdHRoaXMub3ZlcmZsb3dNdXRhdGlvbk9ic2VydmVyLm9ic2VydmUoZGl2LCB7XCJjaGlsZExpc3RcIiA6IHRydWUsIFwic3VidHJlZVwiIDogdHJ1ZX0pO1xuICAgICAgICBkaXYuY2xhc3NOYW1lID0gXCJyb290XCI7XG5cdFx0dGhpcy5hcHBlbmRDaGlsZChkaXYpO1xuXHRcdFxuXHRcdHRoaXMuX3Jlc2l6ZU9ic2VydmVyID0gbmV3IFJlc2l6ZU9ic2VydmVyKGVudHJpZXMgPT4gdGhpcy5lZGl0b3IubGF5b3V0KCkpO1xuXHRcdHRoaXMuX3Jlc2l6ZU9ic2VydmVyLm9ic2VydmUodGhpcyk7XG5cblx0XHR0aGlzLmVkaXRvciA9IG1vbmFjby5lZGl0b3IuY3JlYXRlKFxuICAgICAgICAgICAgdGhpcy5xdWVyeVNlbGVjdG9yKFwiLnJvb3RcIiksXG4gICAgICAgICAgICB0aGlzLmVkaXRvck9wdGlvbnNcblx0XHQpO1xuXG5cdFx0Ly8gTGlua3MgaW4gdGhlIFwic3VnZ2VzdCB3aWRnZXRcIiBwdXQgdGhlaXIgdGFyZ2V0IGluIHRoZSBkYXRhLWhyZWYgYXR0cmlidXRlLlxuXHRcdC8vIElmIHdlIGNsaWNrIG9uIG9uZSBvZiB0aG9zZSBsaW5rcywgd2Ugd2FudCB0byBnbyB0byB1cmwgaW4gdGhlIGRhdGEtaHJlZi5cblx0XHQvLyBNYWtlIHN1cmUgdG8gZG8gbW91c2Vkb3duIGV2ZW50IGFuZCBub3QganVzdCBjbGljayBpbiBjYXNlIHRoZXkgdXNlIHNvbWUgb3RoZXIgbW91c2UgYnV0dG9uLlxuXHRcdHRoaXMuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCAoZSkgPT4ge1xuXHRcdFx0bGV0IGVsZW1lbnQgPSBlLnRhcmdldDtcblx0XHRcdGlmIChlbGVtZW50Lm1hdGNoZXMoXCJhW2RhdGEtaHJlZl1cIikpIHtcblx0XHRcdFx0bGV0IGhyZWYgPSBlbGVtZW50LmdldEF0dHJpYnV0ZShcImRhdGEtaHJlZlwiKTtcblx0XHRcdFx0d2luZG93Lm9wZW4oaHJlZiwgXCJhcGlkb2NzXCIpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXG5cdFx0YXdhaXQgc2xlZXAoMTApO1xuXHRcdHRoaXMucXVlcnlTZWxlY3RvcihcIi5kZWNvcmF0aW9uc092ZXJ2aWV3UnVsZXJcIikucmVtb3ZlKCk7XG5cdFx0dGhpcy5zaG93U3VnZ2VzdERldGFpbHMoKTtcblx0XHR0aGlzLnJlYWRPbmx5ID0gdHJ1ZTtcblxuXHRcdC8vIGF3YWl0IG5hdmlnYXRvci5zZXJ2aWNlV29ya2VyLnJlYWR5O1xuXHRcdHRoaXMuZXhlY3V0b3IgPSBleGVjdXRvcjtcblx0XHR0aGlzLmplZGlfdmFsdWUgPSB0aGlzLmV4ZWN1dG9yLm5ld19jb21wbGV0ZXIoKTtcdFx0XHRcblx0XHRhd2FpdCB0aGlzLmV4ZWN1dG9yLnJlYWR5KCk7XG5cdFx0dGhpcy5fbG9hZGVkKCk7XG5cdH1cblxuXHRhc3luYyBfZGlzcGxheVNpbGx5TG9hZGluZ1Byb21wdCgpe1xuXHRcdGxldCBpZHggPSAtMTtcblx0XHRsZXQgYW5pbWF0aW9uID0gW1wiXFxuXFxuICAgIC0gIExvYWRpbmcgIC1cXG5cXG5cIiwgXCJcXG5cXG4gICAtICAgTG9hZGluZyAgIC1cIixcIlxcblxcbiAgIC8gICBMb2FkaW5nICAgL1wiLFwiXFxuXFxuICAgfCAgIExvYWRpbmcgICB8XCIsXCJcXG5cXG4gICBcXFxcICAgTG9hZGluZyAgIFxcXFxcIixcIlxcblxcbiAgIC0gICBMb2FkaW5nICAgLVwiLFwiXFxuICAgIHxcXG4gICAvICAgTG9hZGluZyAgIC9cXG4gICAgICAgICAgICAgICAgfFwiLFwiICAgICBcXFxcXFxuICAgIHxcXG4gICAvICAgTG9hZGluZyAgIC9cXG4gICAgICAgICAgICAgICAgfFxcbiAgICAgICAgICAgICAgIFxcXFxcIixcIiAgICAgXFxcXC1cXG4gICAgfFxcbiAgICAgICBMb2FkaW5nXFxuICAgICAgICAgICAgICAgIHxcXG4gICAgICAgICAgICAgIC1cXFxcXCIsXCIgICAgIFxcXFwtXFxuICAgICAgIC9cXG4gICAgICAgTG9hZGluZ1xcbiAgICAgICAgICAgICAvXFxuICAgICAgICAgICAgICAtXFxcXFwiLFwiICAgICAgLVxcbiAgICAgICAvXFxuICAgICAgIEx8YWRpbmdcXG4gICAgICAgICAgICAgL1xcbiAgICAgICAgICAgICAgLVwiLFwiXFxuICAgICAgIC8gICBcXFxcXFxuICAgICAgIEx8YWRpbmdcXG4gICAgICAgICBcXFxcICAgL1xcblwiLFwiICAgICAgICAgIC1cXG4gICAgICAgICAgIFxcXFxcXG4gICAgICAgTHxhZGluZ1xcbiAgICAgICAgIFxcXFxcXG4gICAgICAgICAgLVwiLFwiICAgICAgICAgLy1cXG4gICAgICAgICAgIFxcXFxcXG4gICAgICAgTG9hZGluZ1xcbiAgICAgICAgIFxcXFxcXG4gICAgICAgICAgLS9cIixcIiAgICAgICAgfC8tXFxuXFxuICAgICAgIExvYWRpbmdcXG5cXG4gICAgICAgICAgLS98XCIsXCIgICAgICAgIHwvXFxuICAgICAgXFxcXFxcbiAgICAgICBMb2FkaW5nXFxuICAgICAgICAgICAgICBcXFxcXFxuICAgICAgICAgICAvfFwiLFwiICAgICAgICB8XFxuICAgICAgXFxcXFxcbiAgICAtICBMb2FkaW5nICAtXFxuICAgICAgICAgICAgICBcXFxcXFxuICAgICAgICAgICAgfFwiLFwiXFxuICAgICAgXFxcXFxcbiAgICAtICBMb2FkaW5nICAtXFxuICAgICAgICAgICAgICBcXFxcXFxuXCIsXCJcXG5cXG4gICAgLSAgTG9hZGluZyAgLVxcblxcblwiLFwiXFxuXFxuICAgIC0gIExvYWRpbmcgIC1cXG5cXG5cIixcIlxcblxcbiAgICAtICBMb2FkaW5nICAtXFxuXFxuXCIsXCJcXG5cXG4gICAgLSAgTG9hZGluZyAgLVxcblxcblwiLFwiXFxuXFxuICAgIC0gIExvYWRpbmcgIC1cXG5cXG5cIixcIlxcblxcbiAgICAtICBMb2FkaW5nICAtXFxuXFxuXCJdO1xuXG5cdFx0bGV0IG9ic2VydmVyID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIoKCkgPT4ge1xuXHRcdFx0Zm9yKGxldCBjIG9mIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuY2lnciwgLmNpZ3JhXCIpKXtcblx0XHRcdFx0aWYoYy5zdHlsZS5kaXNwbGF5ICE9PSBcIm5vbmVcIil7XG5cdFx0XHRcdFx0Yy5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9KTtcblx0XHRvYnNlcnZlci5vYnNlcnZlKHRoaXMsIHtcInN1YnRyZWVcIiA6IHRydWUsIFwiY2hpbGRMaXN0XCIgOiB0cnVlLCBcImF0dHJpYnV0ZXNGaWx0ZXJcIiA6IFtcInN0eWxlXCJdIH0pO1xuXHRcdHdoaWxlKCF0aGlzLnJlYWR5KXtcblx0XHRcdGlkeCArKztcblx0XHRcdGlkeCA9IGlkeCAlIGFuaW1hdGlvbi5sZW5ndGg7XG5cdFx0XHR0aGlzLmVkaXRvci5zZXRWYWx1ZShhbmltYXRpb25baWR4XSk7XG5cdFx0XHRpZihpZHggPT09IDApIHtcblx0XHRcdFx0YXdhaXQgc2xlZXAoMjUwKTtcblx0XHRcdH1cblx0XHRcdGF3YWl0IHNsZWVwKDUwKTtcblx0XHR9XG5cdFx0b2JzZXJ2ZXIuZGlzY29ubmVjdCgpO1xuXHR9XG5cblxuXHRhc3luYyBfbG9hZGVkKCl7XG5cdFx0dGhpcy5lZGl0b3Iub25LZXlEb3duKHRoaXMuX29ua2V5LmJpbmQodGhpcykpO1xuXHRcdHRoaXMuZWRpdG9yLm9uTW91c2VEb3duKHRoaXMuX29ubW91c2Vkb3duLmJpbmQodGhpcykpO1xuXHRcdHRoaXMuZWRpdG9yLm9uTW91c2VVcCh0aGlzLl9vbm1vdXNldXAuYmluZCh0aGlzKSk7XG5cdFx0dGhpcy5lZGl0b3Iub25EaWRDaGFuZ2VDdXJzb3JTZWxlY3Rpb24odGhpcy5fb25EaWRDaGFuZ2VDdXJzb3JTZWxlY3Rpb24uYmluZCh0aGlzKSk7XG5cdFx0dGhpcy5lZGl0b3Iub25EaWRTY3JvbGxDaGFuZ2UoKCkgPT4gdGhpcy51cGRhdGVMaW5lT2Zmc2V0cygpKTtcblx0XHR0aGlzLmVkaXRvci5vbkRpZENoYW5nZU1vZGVsQ29udGVudCgoKSA9PiB7IFxuXHRcdFx0dGhpcy5jbGVhclN5bnRheEVycm9yKCk7XG5cdFx0fSk7XG5cdFx0dGhpcy5lZGl0b3IudXBkYXRlT3B0aW9ucyh7IFxuXHRcdFx0cmVhZE9ubHkgOiBmYWxzZSxcblx0XHRcdGxpbmVOdW1iZXJzIDogdGhpcy5fZ2V0RWRpdG9yTGluZVByZWZpeC5iaW5kKHRoaXMpXG5cdFx0fSk7XG5cblx0XHR0aGlzLm91dHB1dE1vZGVsTGluZXMgPSB7IDEgOiB0cnVlIH07XG5cdFx0dGhpcy5vdXRwdXRTY3JlZW5MaW5lcyA9IHsgMSA6IHRydWUgfTtcblx0XHR0aGlzLmZpcnN0TGluZXNbMl0gPSB0cnVlO1xuXHRcdHRoaXMuZWRpdG9yLnNldFZhbHVlKFwiXFxuXCIpO1xuXHRcdHRoaXMuZWRpdG9yLnNldFBvc2l0aW9uKHRoaXMuZW5kT2ZJbnB1dFBvc2l0aW9uKTtcblx0XHR0aGlzLmZvY3VzKCk7XG5cdFx0YXdhaXQgc2xlZXAoMCk7XG5cdFx0d2luZG93LmxvYWRpbmdXaWRnZXQucmVhZHkgPSB0cnVlO1xuXHRcdHRoaXMucmVhZE9ubHkgPSBmYWxzZTtcblx0fVxuXG5cdC8vIF9sb2FkaW5nRmFpbGVkKGUpe1xuXHQvLyBcdHRoaXMucmVhZHkgPSB0cnVlO1xuXHQvLyBcdGxldCBvYnNlcnZlciA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKCgpID0+IHtcblx0Ly8gXHRcdGZvcihsZXQgYyBvZiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmNpZ3IsIC5jaWdyYVwiKSl7XG5cdC8vIFx0XHRcdGlmKFxuXHQvLyBcdFx0XHRcdE51bWJlcihjLnBhcmVudEVsZW1lbnQuc3R5bGUudG9wLnNsaWNlKDAsLTIpKS8yNyA+PSAyXG5cdC8vIFx0XHRcdFx0JiYgYy5zdHlsZS5sZWZ0ID09PSBcIjBweFwiXG5cdC8vIFx0XHRcdCl7XG5cdC8vIFx0XHRcdFx0Y29udGludWU7XG5cdC8vIFx0XHRcdH1cblx0Ly8gXHRcdFx0aWYoYy5zdHlsZS5kaXNwbGF5ICE9PSBcIm5vbmVcIil7XG5cdC8vIFx0XHRcdFx0Yy5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG5cdC8vIFx0XHRcdH1cblx0Ly8gXHRcdH1cblx0Ly8gXHR9KTtcblx0Ly8gXHRvYnNlcnZlci5vYnNlcnZlKHRoaXMsIHtcInN1YnRyZWVcIiA6IHRydWUsIFwiY2hpbGRMaXN0XCIgOiB0cnVlLCBcImF0dHJpYnV0ZXNGaWx0ZXJcIiA6IFtcInN0eWxlXCJdIH0pO1xuXHQvLyBcdHRoaXMuZWRpdG9yLnVwZGF0ZU9wdGlvbnMoe1xuXHQvLyBcdFx0bGluZU51bWJlcnMgOiAobikgPT4ge1xuXHQvLyBcdFx0XHRpZihuIGluIHRoaXMub3V0cHV0TW9kZWxMaW5lcyl7XG5cdC8vIFx0XHRcdFx0cmV0dXJuIFwiXCI7XG5cdC8vIFx0XHRcdH1cblx0Ly8gXHRcdFx0cmV0dXJuIFwiICAgXCI7XG5cdC8vIFx0XHR9XG5cdC8vIFx0fSk7XG5cdC8vIFx0d2luZG93LmxvYWRpbmdXaWRnZXQucmVhZHkgPSB0cnVlO1xuXHQvLyBcdHRoaXMuZWRpdG9yLnNldFZhbHVlKGBGYXRhbCBFcnJvciEgXFxuIFxcbiAke2UudG9TdHJpbmcoKS5yZXBsYWNlKC9cXG4vZyxcIlxcbiBcIil9YCk7XG5cdC8vIFx0dGhpcy5lZGl0b3IudXBkYXRlT3B0aW9ucyh7XG5cdC8vIFx0XHRydWxlcnMgOiBbXVxuXHQvLyBcdH0pO1xuXHQvLyB9XG5cblx0X2dldEVkaXRvckxpbmVQcmVmaXgobil7XG5cdFx0aWYobiBpbiB0aGlzLmZpcnN0TGluZXMpe1xuXHRcdFx0cmV0dXJuIFwiPj4+XCI7XG5cdFx0fVxuXHRcdGlmKG4gaW4gdGhpcy5vdXRwdXRNb2RlbExpbmVzKXtcblx0XHRcdHJldHVybiBcIlwiO1xuXHRcdH1cblx0XHRyZXR1cm4gXCIuLi5cIjtcblx0fVxuXG5cdHVwZGF0ZUN1cnNvck9mZnNldCgpe1xuXHRcdGxldCBjdXJzb3JMaW5lTnVtYmVyID0gdGhpcy5lZGl0b3IuZ2V0UG9zaXRpb24oKS5saW5lTnVtYmVyO1xuXHRcdHRoaXMucXVlcnlTZWxlY3RvcihcIi5jdXJzb3JcIikuc3R5bGUubWFyZ2luTGVmdCA9IGN1cnNvckxpbmVOdW1iZXIgaW4gdGhpcy5vdXRwdXRNb2RlbExpbmVzID8gXCItNGNoXCIgOiBcIlwiO1xuXHR9XG5cblx0dXBkYXRlTGluZU9mZnNldHMoKXtcblx0XHRjb25zdCBvdXRwdXRMaW5lcyA9IFxuXHRcdFx0QXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnZpZXctbGluZVwiKSlcblx0XHRcdFx0Lm1hcChlID0+IFtlLCBOdW1iZXIoZS5zdHlsZS50b3Auc2xpY2UoMCwgLTIpKV0pLnNvcnQoKGEsYikgPT4gYVsxXS1iWzFdKS5tYXAoZSA9PiBlWzBdKTtcblx0XHRjb25zdCB0b3BTY3JlZW5MaW5lID0gTWF0aC5mbG9vcih0aGlzLmVkaXRvci5nZXRTY3JvbGxUb3AoKSAvIHRoaXMubGluZUhlaWdodCkgKyAxO1xuXHRcdG91dHB1dExpbmVzLmZvckVhY2goKGUsIGlkeCkgPT4ge1xuXHRcdFx0bGV0IHRhcmdldE1hcmdpbiA9ICh0b3BTY3JlZW5MaW5lICsgaWR4KSBpbiB0aGlzLm91dHB1dFNjcmVlbkxpbmVzID8gXCItNGNoXCIgOiBcIlwiO1xuXHRcdFx0aWYoZS5zdHlsZS5tYXJnaW5MZWZ0ICE9PSB0YXJnZXRNYXJnaW4pe1xuXHRcdFx0XHRlLnN0eWxlLm1hcmdpbkxlZnQgPSB0YXJnZXRNYXJnaW47XG5cdFx0XHR9XG5cdFx0fSk7XG5cdFx0Y29uc3Qgb3V0cHV0T3ZlcmxheXMgPSBcblx0XHRcdEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi52aWV3LW92ZXJsYXlzXCIpLmNoaWxkcmVuKVxuXHRcdFx0XHQubWFwKGUgPT4gW2UsIE51bWJlcihlLnN0eWxlLnRvcC5zbGljZSgwLCAtMikpXSkuc29ydCgoYSxiKSA9PiBhWzFdLWJbMV0pLm1hcChlID0+IGVbMF0pO1xuXHRcdG91dHB1dE92ZXJsYXlzLmZvckVhY2goKGUsIGlkeCkgPT4ge1xuXHRcdFx0bGV0IHRhcmdldE1hcmdpbiA9ICh0b3BTY3JlZW5MaW5lICsgaWR4KSBpbiB0aGlzLm91dHB1dFNjcmVlbkxpbmVzID8gXCItNWNoXCIgOiBcIlwiO1xuXHRcdFx0aWYoZS5zdHlsZS5tYXJnaW5MZWZ0ICE9PSB0YXJnZXRNYXJnaW4pe1xuXHRcdFx0XHRlLnN0eWxlLm1hcmdpbkxlZnQgPSB0YXJnZXRNYXJnaW47XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH1cdFxuXG5cdF9vbm1vdXNlZG93bigpe1xuXHRcdC8vIHRoaXMubW91c2VEb3duID0gdHJ1ZTtcblx0XHQvLyB0aGlzLmp1c3RTdGVwcGVkSGlzdG9yeSA9IGZhbHNlO1xuXHRcdC8vIHRoaXMudXBkYXRlQ3Vyc29yT2Zmc2V0KCk7XG5cdH1cblxuXHRfb25tb3VzZXVwKCl7XG5cdFx0Ly8gdGhpcy5tb3VzZURvd24gPSBmYWxzZTtcblx0XHQvLyBpZih0aGlzLmRvZXNTZWxlY3Rpb25JbnRlcnNlY3RSZWFkT25seVJlZ2lvbigpICYmIHRoaXMuZWRpdG9yLmdldFNlbGVjdGlvbigpLmlzRW1wdHkoKSl7XG5cdFx0Ly8gXHR0aGlzLmVkaXRvci5zZXRQb3NpdGlvbih0aGlzLmVuZE9mSW5wdXRQb3NpdGlvbik7XG5cdFx0Ly8gXHR0aGlzLnJldmVhbFNlbGVjdGlvbigpO1xuXHRcdC8vIFx0dGhpcy51cGRhdGVDdXJzb3JPZmZzZXQoKTtcblx0XHQvLyB9XG5cdH1cdFxuXG5cdGFzeW5jIF9vbkRpZENoYW5nZUN1cnNvclNlbGVjdGlvbihlKXtcblx0XHQvLyBUaGlzIG1lYW5zIHRoaXMgd2FzIGEgaGlzdG9yeSBjaGFuZ2UgZXZlbnQuXG5cdFx0Ly8gV2UgdXNlIHRoaXMgamFuayBzZWNvbmRhcnlTZWxlY3Rpb24gYXBwcm9hY2ggdG8gc2lnbmFsIGEgaGlzdG9yeSBjaGFuZ2UgZXZlbnQgYmVjYXVzZVxuXHRcdC8vIG1vbmFjbydzIGVkaXQgc3RhY2sgQVBJIGRvZXNuJ3QgbGV0IHVzIGF0dGFjaCBvdXIgb3duIHVuZG8vcmVkbyBjYWxsYmFjay5cblx0XHRpZihlLnNlY29uZGFyeVNlbGVjdGlvbnMubGVuZ3RoID4gMCl7XG5cdFx0XHR0aGlzLmVkaXRvci5zZXRTZWxlY3Rpb24oZS5zZWxlY3Rpb24pO1xuXHRcdFx0Ly8gSWYgdGhlIHNvdXJjZSBpcyB0aGUga2V5Ym9hcmQsIHRoZSB1c2VyIGRpcmVjdGx5IGNoYW5nZWQgdGhlIGhpc3RvcnkgYW5kIHN0ZXBIaXN0b3J5KCkgY292ZXJlZCBldmVyeXRoaW5nLlxuXHRcdFx0aWYoZS5zb3VyY2UgIT09IFwia2V5Ym9hcmRcIil7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblx0XHRcdGlmKGUucmVhc29uID09PSBtb25hY28uZWRpdG9yLkN1cnNvckNoYW5nZVJlYXNvbi5SZWRvKXtcblx0XHRcdFx0dGhpcy5oaXN0b3J5LnVuZG9TdGVwKCk7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblx0XHRcdGlmKGUucmVhc29uID09PSBtb25hY28uZWRpdG9yLkN1cnNvckNoYW5nZVJlYXNvbi5VbmRvKXtcblx0XHRcdFx0dGhpcy5oaXN0b3J5LnJlZG9TdGVwKCk7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblx0XHRcdHRocm93IEVycm9yKFwiVW5yZWFjaGFibGU/XCIpO1xuXHRcdH1cblx0XHQvLyBIaWRlIGxpbmUgc2VsZWN0aW9uIGlmIGluIHJlYWQgb25seSByZWdpb24gb3IgaWYgd2hvbGUgZWRpdG9yIGlzIHJlYWQgb25seS5cblx0XHQvLyBUaGlzIGltcHJvdmVzIGZlZWRiYWNrIGJ5IHF1aXRlIGEgbG90LlxuXHRcdGlmKHRoaXMuZG9lc0N1cnJlbnRTZWxlY3Rpb25JbnRlcnNlY3RSZWFkT25seVJlZ2lvbigpKXtcblx0XHRcdHRoaXMuZWRpdG9yLnVwZGF0ZU9wdGlvbnMoeyByZW5kZXJMaW5lSGlnaGxpZ2h0IDogXCJub25lXCIgfSk7XG5cdFx0XHR0aGlzLnF1ZXJ5U2VsZWN0b3IoXCIuY3Vyc29yXCIpLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcblx0XHRcdGF3YWl0IHNsZWVwKDApO1xuXHRcdFx0dGhpcy5xdWVyeVNlbGVjdG9yKFwiLmN1cnNvclwiKS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHRoaXMuZWRpdG9yLnVwZGF0ZU9wdGlvbnMoeyByZW5kZXJMaW5lSGlnaGxpZ2h0IDogXCJsaW5lXCIgfSk7XG5cdFx0XHR0aGlzLnF1ZXJ5U2VsZWN0b3IoXCIuY3Vyc29yXCIpLnN0eWxlLmRpc3BsYXkgPSB0aGlzLnJlYWRPbmx5ID8gXCJub25lXCIgOiBcImJsb2NrXCI7XG5cdFx0fVxuXHRcdC8vIGF3YWl0IHNsZWVwKDApOyAvLyBOZWVkIHRvIHNsZWVwKDApIHRvIGFsbG93IHRoaXMubW91c2VEb3duIHRvIHVwZGF0ZS5cblx0XHQvLyBpZighdGhpcy5tb3VzZURvd24gJiYgZS5zZWxlY3Rpb24uaXNFbXB0eSgpICYmIHRoaXMuZG9lc0N1cnJlbnRTZWxlY3Rpb25JbnRlcnNlY3RSZWFkT25seVJlZ2lvbigpKXtcblx0XHQvLyBcdHRoaXMuZWRpdG9yLnNldFBvc2l0aW9uKHRoaXMuZW5kT2ZJbnB1dFBvc2l0aW9uKTtcblx0XHQvLyBcdHRoaXMucmV2ZWFsU2VsZWN0aW9uKCk7XG5cdFx0Ly8gfVxuXHRcdC8vIHRoaXMudXBkYXRlQ3Vyc29yT2Zmc2V0KCk7XG5cdH1cblxuXG5cdC8qKiBcblx0KiAgIGUucHJldmVudERlZmF1bHQoKSBkb2Vzbid0IHdvcmsgb24gY2VydGFpbiBrZXlzLCBpbmNsdWRpbmcgQmFja3NwYWNlLCBUYWIsIGFuZCBEZWxldGUuXG5cdCogXHRBcyBhIHJlY291cnNlIHRvIHByZXZlbnQgdGhlc2Ugcm9ndWUga2V5IGV2ZW50cywgd2UgbW92ZSB0aGUgZm9jdXMgb3V0IG9mIHRoZSBpbnB1dCBhcmVhIFxuXHQqICBcdGZvciBqdXN0IGEgbW9tZW50IGFuZCB0aGVuIG1vdmUgaXQgYmFjay5cblx0KiAgIFRoZSAuZHVtbXkgc2hvdWxkIGJlIGEgcmVhZG9ubHkgdGV4dGFyZWEgZWxlbWVudC5cblx0Ki9cblx0YXN5bmMgcHJldmVudEtleUV2ZW50KCl7XG5cdFx0dGhpcy5kdW1teVRleHRBcmVhLmZvY3VzKCk7XG5cdFx0YXdhaXQgc2xlZXAoMCk7XG5cdFx0dGhpcy5mb2N1cygpO1xuXHR9XG5cblxuXHRlbmZvcmNlUmVhZE9ubHlSZWdpb24oZSl7XG5cdFx0aWYoZS5icm93c2VyRXZlbnQudHlwZSAhPT0gXCJrZXlkb3duXCIpe1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblx0XHRpZihcblx0XHRcdChlLmJyb3dzZXJFdmVudC5jdHJsS2V5IHx8IGUuYnJvd3NlckV2ZW50LmFsdEtleSB8fCAhL15bIC1+XSQvLnRlc3QoZS5icm93c2VyRXZlbnQua2V5KSkgXG5cdFx0XHQmJiAhW1wiQmFja3NwYWNlXCIsIFwiVGFiXCIsIFwiRGVsZXRlXCIsIFwiRW50ZXJcIl0uaW5jbHVkZXMoZS5icm93c2VyRXZlbnQua2V5KVxuXHRcdCl7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXHRcdHRoaXMuaW50ZXJzZWN0U2VsZWN0aW9uV2l0aElucHV0UmVnaW9uKCk7XG5cdH1cblxuXHRpbnRlcnNlY3RTZWxlY3Rpb25XaXRoSW5wdXRSZWdpb24oKXtcblx0XHRjb25zdCBzZWwgPSB0aGlzLmVkaXRvci5nZXRTZWxlY3Rpb24oKTtcblx0XHRsZXQgbmV3U2VsID0gc2VsLmludGVyc2VjdFJhbmdlcyh0aGlzLmFsbE9mSW5wdXRTZWxlY3Rpb24pO1xuXHRcdGlmKG5ld1NlbCl7XG5cdFx0XHRuZXdTZWwgPSB0aGlzLnNldFNlbGVjdGlvbkRpcmVjdGlvbihuZXdTZWwsIHNlbC5nZXREaXJlY3Rpb24oKSk7XG5cdFx0XHR0aGlzLmVkaXRvci5zZXRTZWxlY3Rpb24obmV3U2VsKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0dGhpcy5lZGl0b3Iuc2V0UG9zaXRpb24odGhpcy5lbmRPZklucHV0UG9zaXRpb24pO1xuXHRcdH1cblx0XHR0aGlzLnJldmVhbFNlbGVjdGlvbigpO1xuXHRcdHJldHVybiAhbmV3U2VsIHx8ICFzZWwuZXF1YWxzU2VsZWN0aW9uKG5ld1NlbCk7XG5cdH1cblxuXHRzaG93U3VnZ2VzdERldGFpbHMoKXtcblx0XHRsZXQgd2lkZ2V0ID0gdGhpcy5lZGl0b3IuZ2V0Q29udHJpYnV0aW9uKFwiZWRpdG9yLmNvbnRyaWIuc3VnZ2VzdENvbnRyb2xsZXJcIikud2lkZ2V0LmdldFZhbHVlKCk7XG5cdFx0d2lkZ2V0LnVwZGF0ZUV4cGFuZERvY3NTZXR0aW5nKHRydWUpO1xuXHR9XG5cblx0X29ua2V5KGUpe1xuXHRcdC8vIFRlc3QgaWYgY29tcGxldGlvbiBzdWdnZXN0aW9uIHdpZGdldCBpcyB2aXNpYmxlLlxuXHRcdC8vIFVzdWFsbHkgaXQgaXMgaGlkZGVuIGJ5IHJlbW92aW5nIHRoZSBcIi52aXNpYmxlXCIgY2xhc3MsIGJ1dCBpbiBzb21lIHVudXN1YWwgY2lyY3Vtc3RhbmNlc1xuXHRcdC8vIGl0IGVuZHMgdXAgd2l0aCBoZWlnaHQgMCBidXQgc3RpbGwgXCIudmlzaWJsZVwiLiBTbyB3ZSBhbHNvIHRlc3QgdGhlIGhlaWdodC5cblx0XHRsZXQgZWx0ID0gdGhpcy5xdWVyeVNlbGVjdG9yKFwiLnN1Z2dlc3Qtd2lkZ2V0LnZpc2libGVcIik7XG5cdFx0bGV0IHN1Z2dlc3RXaWRnZXRWaXNpYmxlUSA9IGVsdCAmJiBlbHQub2Zmc2V0SGVpZ2h0ID4gMDtcblx0XHRpZihzdWdnZXN0V2lkZ2V0VmlzaWJsZVEpe1xuXHRcdFx0aWYoXG5cdFx0XHRcdC8vIFRoaXMgYW5ub3lpbmcgY29uZGl0aW9uYWwgc3BlbGxzIG91dCB3aGljaCBrZXlzIHdlIHdhbnQgdGhlIHN1Z2dlc3RXaWRnZXQgdG8gaGFuZGxlXG5cdFx0XHRcdChlLmJyb3dzZXJFdmVudC5rZXkgIT09IFwiUGFnZVVwXCIgfHwgIWUuYnJvd3NlckV2ZW50LnNoaWZ0S2V5KVxuXHRcdFx0XHQmJiAoIWUuYnJvd3NlckV2ZW50LmN0cmxLZXkgfHwgIVtcInhcIiwgXCJIb21lXCIsIFwiYVwiXS5pbmNsdWRlcyhlLmJyb3dzZXJFdmVudC5rZXkpKVxuXHRcdFx0XHQmJiAoKCFlLnNoaWZ0S2V5ICYmICFlLmFsdEtleSkgfHwgZS5icm93c2VyRXZlbnQua2V5ICE9PSBcIkFycm93VXBcIilcblx0XHRcdCl7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblx0XHR9XG5cdFx0aWYodGhpcy5tYXliZVN0ZXBIaXN0b3J5KGUuYnJvd3NlckV2ZW50KSl7XG5cdFx0XHR0aGlzLnByZXZlbnRLZXlFdmVudCgpO1xuXHRcdFx0cmV0dXJuXG5cdFx0fVxuXHRcdHRoaXMuanVzdFN0ZXBwZWRIaXN0b3J5ID0gZmFsc2U7XG5cdFx0Ly8gTWFueSBDdHJsICsgPHNvbWUta2V5PiBjb21tYW5kcyByZXF1aXJlIHNwZWNpYWwgaGFuZGxpbmcuXG5cdFx0aWYoZS5icm93c2VyRXZlbnQuY3RybEtleSl7XG5cdFx0XHRpZihlLmJyb3dzZXJFdmVudC5rZXkgaW4gUmVwbEVsZW1lbnQuX2N0cmxDbWRIYW5kbGVycyl7XG5cdFx0XHRcdFJlcGxFbGVtZW50Ll9jdHJsQ21kSGFuZGxlcnNbZS5icm93c2VyRXZlbnQua2V5XS5jYWxsKHRoaXMsIGUpO1xuXHRcdFx0XHRyZXR1cm5cblx0XHRcdH1cblx0XHR9XG5cdFx0aWYoZS5icm93c2VyRXZlbnQuc2hpZnRLZXkgJiYgZS5icm93c2VyRXZlbnQua2V5ID09PSBcIkRlbGV0ZVwiKXtcblx0XHRcdHRoaXMuX2hhbmRsZUN1dCgpO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdGlmKGUuYnJvd3NlckV2ZW50LmtleSA9PT0gXCJQYWdlVXBcIil7XG5cdFx0XHR0aGlzLl9vblBhZ2VVcChlKTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHQvLyBQcmV2ZW50IGtleXMgdGhhdCB3b3VsZCBlZGl0IHZhbHVlIGlmIHJlYWQgb25seVxuXHRcdGlmKHRoaXMucmVhZE9ubHkgJiYgIWUuYnJvd3NlckV2ZW50LmFsdEtleSl7XG5cdFx0XHRpZihcblx0XHRcdFx0IWUuYnJvd3NlckV2ZW50LmN0cmxLZXkgJiYgL15bIC1+XSQvLnRlc3QoZS5icm93c2VyRXZlbnQua2V5KSBcblx0XHRcdFx0fHwgW1wiQmFja3NwYWNlXCIsIFwiVGFiXCIsIFwiRGVsZXRlXCIsIFwiRW50ZXJcIl0uaW5jbHVkZXMoZS5icm93c2VyRXZlbnQua2V5KVxuXHRcdFx0KXtcblx0XHRcdFx0dGhpcy5wcmV2ZW50S2V5RXZlbnQoKTtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXHRcdH1cblx0XHQvLyBQcmV2ZW50IGJhY2tpbmcgdXAgcGFzdCBzdGFydCBvZiByZXBsIGlucHV0XG5cdFx0aWYodGhpcy5hdFN0YXJ0T2ZJbnB1dFJlZ2lvbigpICYmIFtcIkFycm93TGVmdFwiLCBcIkJhY2tzcGFjZVwiXS5pbmNsdWRlcyhlLmJyb3dzZXJFdmVudC5rZXkpKXtcblx0XHRcdHRoaXMucHJldmVudEtleUV2ZW50KCk7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXHRcdGlmKGUuYnJvd3NlckV2ZW50LmtleSA9PT0gXCJUYWJcIiAmJiAhZS5icm93c2VyRXZlbnQuc2hpZnRLZXkpe1xuXHRcdFx0dGhpcy5fb25UYWIoKTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cdFx0dGhpcy5lbmZvcmNlUmVhZE9ubHlSZWdpb24oZSk7XG5cdFx0aWYoZS5icm93c2VyRXZlbnQua2V5ID09PSBcIkVzY2FwZVwiKXtcblx0XHRcdGlmKHRoaXMuY3VycmVudEV4ZWN1dGlvbil7XG5cdFx0XHRcdHRoaXMuY3VycmVudEV4ZWN1dGlvbi5rZXlib2FyZEludGVycnVwdCgpO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdGlmKFtcIixcIiwgXCIoXCJdLmluY2x1ZGVzKGUuYnJvd3NlckV2ZW50LmtleSkpIHtcblx0XHRcdGlmKGUuYnJvd3NlckV2ZW50LmtleSA9PT0gXCIoXCIgJiYgIXRoaXMuZWRpdG9yLmdldFNlbGVjdGlvbigpLmlzRW1wdHkoKSl7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblx0XHRcdC8vIElmIHRoZSBzdWdnZXN0IHdpZGdldCBpcyBhbHJlYWR5IG9wZW4gdGhpcyBmYWlscyB0byBvcGVuIHBhcmFtZXRlciBoaW50cy5cblx0XHRcdC8vIEkgdHJpZWQgdmFyaW91cyBjb21iaW5hdGlvbnMgb2Ygc2xlZXBpbmcgYW5kIHRyeWluZyBhZ2FpbiwgZXhwbGljaXRseSBjbG9zaW5nIHN1Z2dlc3Qgd2lkZ2V0LFxuXHRcdFx0Ly8gZXRjIGJ1dCBub25lIHNlZW0gdG8gd29yay5cblx0XHRcdHRoaXMuZWRpdG9yLnRyaWdnZXIoXCJlZGl0b3JcIiwgXCJlZGl0b3IuYWN0aW9uLnRyaWdnZXJQYXJhbWV0ZXJIaW50c1wiKTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHRpZihlLmJyb3dzZXJFdmVudC5rZXkgPT09IFwiRW50ZXJcIikge1xuXHRcdFx0aWYodGhpcy5zaG91bGRFbnRlclN1Ym1pdChlLmJyb3dzZXJFdmVudCkpe1xuXHRcdFx0XHR0aGlzLnByZXZlbnRLZXlFdmVudCgpO1xuXHRcdFx0XHR0aGlzLnN1Ym1pdCgpO1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cdFx0XHRpZihlLmJyb3dzZXJFdmVudC5zaGlmdEtleSl7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblx0XHRcdGxldCBjdXJyZW50TGluZUNvbnRlbnQgPSB0aGlzLmVkaXRvci5nZXRNb2RlbCgpLmdldExpbmVDb250ZW50KHRoaXMuZWRpdG9yLmdldFBvc2l0aW9uKCkubGluZU51bWJlcik7XG5cdFx0XHQvLyBJZiB0aGUgY3VycmVudCBsaW5lIGlzIGVtcHR5IGV4Y2VwdCBmb3Igc3BhY2VzLCBvdXRkZW50IGl0LlxuXHRcdFx0Ly8gVE9ETzogR29vZCBjaG9pY2Ugb3Igbm8/XG5cdFx0XHRpZigvXiArJC8udGVzdChjdXJyZW50TGluZUNvbnRlbnQpKXtcblx0XHRcdFx0dGhpcy5lZGl0b3IuZ2V0QWN0aW9uKFwiZWRpdG9yLmFjdGlvbi5vdXRkZW50TGluZXNcIikucnVuKCk7XG5cdFx0XHRcdHRoaXMucHJldmVudEtleUV2ZW50KCk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0Ly8gYXN5bmMgdHJpZ2dlclBhcmFtZXRlckhpbnRzKCl7XG5cdC8vIFx0dGhpcy5lZGl0b3IudHJpZ2dlcihcImVkaXRvclwiLCBcImVkaXRvci5hY3Rpb24uaGlkZVN1Z2dlc3RXaWRnZXRcIik7XG5cdC8vIFx0YXdhaXQgc2xlZXAoMCk7XG5cdC8vIFx0dGhpcy5lZGl0b3IudHJpZ2dlcihcImVkaXRvclwiLCBcImVkaXRvci5hY3Rpb24udHJpZ2dlclBhcmFtZXRlckhpbnRzXCIpO1xuXHQvLyBcdGF3YWl0IHNsZWVwKDEwKTtcblx0Ly8gXHR0aGlzLmVkaXRvci50cmlnZ2VyKFwiZWRpdG9yXCIsIFwiZWRpdG9yLmFjdGlvbi50cmlnZ2VyUGFyYW1ldGVySGludHNcIik7XG5cdC8vIFx0YXdhaXQgc2xlZXAoNTApO1xuXHQvLyBcdHRoaXMuZWRpdG9yLnRyaWdnZXIoXCJlZGl0b3JcIiwgXCJlZGl0b3IuYWN0aW9uLnRyaWdnZXJQYXJhbWV0ZXJIaW50c1wiKTtcblx0Ly8gfVxuXG5cdHN0YXRpYyBnZXQgX2N0cmxDbWRIYW5kbGVycygpe1xuXHRcdHJldHVybiB7XG5cdFx0XHRcImNcIiA6IFJlcGxFbGVtZW50LnByb3RvdHlwZS5fb25DdHJsQyxcblx0XHRcdFwidlwiIDogUmVwbEVsZW1lbnQucHJvdG90eXBlLl9vbkN0cmxWLFxuXHRcdFx0XCJ4XCIgOiBSZXBsRWxlbWVudC5wcm90b3R5cGUuX29uQ3RybFgsXG5cdFx0XHRcImFcIiA6IFJlcGxFbGVtZW50LnByb3RvdHlwZS5fb25DdHJsQSxcblx0XHRcdFwiSG9tZVwiIDogUmVwbEVsZW1lbnQucHJvdG90eXBlLl9vbkN0cmxIb21lLFxuXHRcdFx0XCJLXCIgOiBSZXBsRWxlbWVudC5wcm90b3R5cGUuX2hhbmRsZUN1dCxcblx0XHRcdFwieFwiIDogUmVwbEVsZW1lbnQucHJvdG90eXBlLl9oYW5kbGVDdXQsXG5cdFx0fTtcblx0fVxuXG5cdF9vblRhYigpe1xuXHRcdGxldCBzZWwgPSB0aGlzLmVkaXRvci5nZXRTZWxlY3Rpb24oKTtcblx0XHRpZihzZWwuc3RhcnRMaW5lTnVtYmVyICE9PSBzZWwuZW5kTGluZU51bWJlcil7XG5cdFx0XHQvLyBzZWxlY3Rpb24gY3Jvc3NlcyBtdWx0aXBsZSBsaW5lc1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblx0XHRpZihzZWwuc3RhcnRDb2x1bW4gPT09IDEgJiYgc2VsLmVuZENvbHVtbiA9PT0gdGhpcy5lZGl0b3IuZ2V0TW9kZWwoKS5nZXRMaW5lTGVuZ3RoKHNlbC5zdGFydExpbmVOdW1iZXIpKXtcblx0XHRcdC8vIHNlbGVjdGlvbiBpcyBvZiBvbmUgd2hvbGUgbGluZVxuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblx0XHRsZXQgcHJldmlvdXNDaGFyYWN0ZXJzID0gXG5cdFx0XHR0aGlzLmVkaXRvci5nZXRNb2RlbCgpLmdldFZhbHVlSW5SYW5nZShuZXcgbW9uYWNvLlJhbmdlKHNlbC5zdGFydExpbmVOdW1iZXIsIDEsIHNlbC5zdGFydExpbmVOdW1iZXIsIHNlbC5zdGFydENvbHVtbikpO1xuXHRcdGxldCBwcmV2aW91c0NoYXJhY3RlcnNUcmltbWVkID0gcHJldmlvdXNDaGFyYWN0ZXJzLnRyaW0oKTtcblx0XHRpZihwcmV2aW91c0NoYXJhY3RlcnNUcmltbWVkLmxlbmd0aCA+IDApe1xuXHRcdFx0dGhpcy5wcmV2ZW50S2V5RXZlbnQoKTtcblx0XHRcdGlmKCFzZWwuaXNFbXB0eSgpKXtcblx0XHRcdFx0dGhpcy5lZGl0b3IuZXhlY3V0ZUVkaXRzKFxuXHRcdFx0XHRcdFwidGFiXCIsIFxuXHRcdFx0XHRcdFt7XG5cdFx0XHRcdFx0XHRyYW5nZSA6IHNlbCxcblx0XHRcdFx0XHRcdHRleHQgOiBcIlwiXG5cdFx0XHRcdFx0fV0sXG5cdFx0XHRcdFx0Ly8gW3RoaXMuZW5kT2ZJbnB1dFNlbGVjdGlvbl1cblx0XHRcdFx0KTtcblx0XHRcdFx0dGhpcy5lZGl0b3IucHVzaFVuZG9TdG9wKCk7XG5cdFx0XHR9XHRcdFx0XG5cdFx0fVxuXHRcdGlmKC9bYS16QS1aLl0vLnRlc3QocHJldmlvdXNDaGFyYWN0ZXJzLmNoYXJBdChwcmV2aW91c0NoYXJhY3RlcnMubGVuZ3RoIC0gMSkpKXtcblx0XHRcdHRoaXMuZWRpdG9yLnRyaWdnZXIoXCJlZGl0b3JcIiwgXCJlZGl0b3IuYWN0aW9uLnRyaWdnZXJTdWdnZXN0XCIpO1xuXHRcdFx0dGhpcy5wcmV2ZW50S2V5RXZlbnQoKTtcblx0XHR9XG5cdFx0aWYoL1ssKF0vLnRlc3QocHJldmlvdXNDaGFyYWN0ZXJzVHJpbW1lZC5jaGFyQXQocHJldmlvdXNDaGFyYWN0ZXJzVHJpbW1lZC5sZW5ndGggLSAxKSkpe1xuXHRcdFx0dGhpcy5lZGl0b3IudHJpZ2dlcihcImVkaXRvclwiLCBcImVkaXRvci5hY3Rpb24udHJpZ2dlclBhcmFtZXRlckhpbnRzXCIpO1xuXHRcdFx0dGhpcy5wcmV2ZW50S2V5RXZlbnQoKTtcblx0XHR9XG5cdH1cblxuXHRfb25DdHJsQygpIHt9XG5cblx0X29uQ3RybFYoZSkge1xuXHRcdGlmKGUuYnJvd3NlckV2ZW50LmFsdEtleSl7XG5cdFx0XHQvLyBDdHJsK2FsdCtWIGRvZXMgbm90aGluZyBieSBkZWZhdWx0LlxuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblx0XHRpZih0aGlzLnJlYWRPbmx5KXtcblx0XHRcdHRoaXMucHJldmVudEtleUV2ZW50KCk7XG5cdFx0fVxuXHRcdGlmKHRoaXMuZG9lc0N1cnJlbnRTZWxlY3Rpb25JbnRlcnNlY3RSZWFkT25seVJlZ2lvbigpKXtcblx0XHRcdHRoaXMucHJldmVudEtleUV2ZW50KCk7XG5cdFx0XHR0aGlzLmVkaXRvci5zZXRQb3NpdGlvbih0aGlzLmVuZE9mSW5wdXRQb3NpdGlvbik7XG5cdFx0XHR0aGlzLnJldmVhbFNlbGVjdGlvbigpO1xuXHRcdH1cblx0fVxuXG5cblx0X2hhbmRsZUN1dCgpe1xuXHRcdGlmKHRoaXMuZWRpdG9yLmdldFNlbGVjdGlvbigpLmlzRW1wdHkoKSl7XG5cdFx0XHRpZih0aGlzLnZhbHVlID09PSBcIlwiKXtcblx0XHRcdFx0dGhpcy5wcmV2ZW50S2V5RXZlbnQoKTtcblx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHR9XG5cdFx0XHRpZih0aGlzLnZhbHVlLmluZGV4T2YoXCJcXG5cIikgPT09IC0xIHx8IHRoaXMucmVhZE9ubHkpe1xuXHRcdFx0XHR0aGlzLmVkaXRvci5zZXRTZWxlY3Rpb24odGhpcy5hbGxPZklucHV0U2VsZWN0aW9uKTtcblx0XHRcdFx0dGhpcy5lZGl0b3IudHJpZ2dlcihcImVkaXRvclwiLCBcImVkaXRvci5hY3Rpb24uY2xpcGJvYXJkQ3V0QWN0aW9uXCIpO1xuXHRcdFx0XHR0aGlzLnByZXZlbnRLZXlFdmVudCgpO1xuXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdH1cblx0XHRcdC8vIEVsc2UgYWxsb3cgZGVmYXVsdCBoYW5kbGluZ1xuXHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0fVxuXHRcdGlmKHRoaXMuZG9lc0N1cnJlbnRTZWxlY3Rpb25JbnRlcnNlY3RSZWFkT25seVJlZ2lvbigpIHx8IHRoaXMucmVhZE9ubHkpeyBcblx0XHRcdHRoaXMuZWRpdG9yLnRyaWdnZXIoXCJlZGl0b3JcIiwgXCJlZGl0b3IuYWN0aW9uLmNsaXBib2FyZENvcHlBY3Rpb25cIik7XG5cdFx0XHR0aGlzLnByZXZlbnRLZXlFdmVudCgpO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cdFx0XG5cdH1cblxuXG5cdF9vbkN0cmxBKCl7XG5cdFx0aWYodGhpcy5hbHRLZXkpe1xuXHRcdFx0Ly8gQnkgZGVmYXVsdCBpZiBhbHQga2V5IGlzIHByZXNzZWQgbm90aGluZyBoYXBwZW5zLlxuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblx0XHRpZih0aGlzLmRvZXNDdXJyZW50U2VsZWN0aW9uSW50ZXJzZWN0UmVhZE9ubHlSZWdpb24oKSl7XG5cdFx0XHQvLyBJZiB0aGUgY3VycmVudCBzZWxlY3Rpb24gaW50ZXJzZWN0cyByZWFkIG9ubHkgcmVnaW9uLCBhbGxvdyBkZWZhdWx0IGJlaGF2aW9yXG5cdFx0XHQvLyB3aGljaCBzZWxlY3RzIGV2ZXJ5dGhpbmdcblx0XHRcdHJldHVybjtcblx0XHR9XG5cdFx0Ly8gT3RoZXJ3aXNlLCB3ZSBvbmx5IHdhbnQgdG8gc2VsZWN0IHRoZSBpbnB1dCByZWdpb25cblx0XHR0aGlzLmVkaXRvci5zZXRTZWxlY3Rpb24odGhpcy5hbGxPZklucHV0U2VsZWN0aW9uKTtcblx0XHR0aGlzLnByZXZlbnRLZXlFdmVudCgpO1xuXHR9XG5cblx0X29uQ3RybEhvbWUoZSl7XG5cdFx0aWYoZS5hbHRLZXkpe1xuXHRcdFx0Ly8gQnkgZGVmYXVsdCBub3RoaW5nIGhhcHBlbnMgaWYgYWx0IGtleSBpcyBwcmVzc2VkLlxuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblx0XHQvLyBJZiB3ZSBhcmUgaW4gdGhlIHJlYWQgb25seSByZWdpb25cblx0XHRpZih0aGlzLmRvZXNDdXJyZW50U2VsZWN0aW9uSW50ZXJzZWN0UmVhZE9ubHlSZWdpb24oKSl7XG5cdFx0XHQvLyBBbmQgdGhlIHVzZXIgaXMgaG9sZGluZyBzaGlmdCwgYWxsb3cgZGVmYXVsdCBiZWhhdmlvclxuXHRcdFx0aWYoZS5icm93c2VyRXZlbnQuc2hpZnRLZXkpe1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cdFx0XHQvLyBJZiBpbiByZWFkIG9ubHkgcmVnaW9uIGJ1dCB1c2VyIGlzIG5vdCBob2xkaW5nIHNoaWZ0LCBtb3ZlIHRvIHN0YXJ0IG9mIGlucHV0IHJlZ2lvblxuXHRcdFx0dGhpcy5lZGl0b3Iuc2V0UG9zaXRpb24odGhpcy5zdGFydE9mSW5wdXRQb3NpdGlvbik7XG5cdFx0XHR0aGlzLnJldmVhbFNlbGVjdGlvbigpO1xuXHRcdFx0dGhpcy5wcmV2ZW50S2V5RXZlbnQoKTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cdFx0Ly8gSWYgaW4gaW5wdXQgcmVnaW9uLCBzZWxlY3QgZnJvbSBzdGFydCBvZiBjdXJyZW50IHNlbGVjdGlvbiB0byBzdGFydCBvZiBpbnB1dCByZWdpb25cblx0XHRpZihlLmJyb3dzZXJFdmVudC5zaGlmdEtleSl7XG5cdFx0XHRsZXQge2xpbmVOdW1iZXIsIGNvbHVtbn0gPSB0aGlzLnN0YXJ0T2ZJbnB1dFBvc2l0aW9uO1xuXHRcdFx0bGV0IHNlbGVjdGlvbiA9IHRoaXMuZWRpdG9yLmdldFNlbGVjdGlvbigpO1xuXHRcdFx0aWYoc2VsZWN0aW9uLmdldERpcmVjdGlvbigpID09PSAwKXtcblx0XHRcdFx0c2VsZWN0aW9uID0gc2VsZWN0aW9uLnNldEVuZFBvc2l0aW9uKGxpbmVOdW1iZXIsIGNvbHVtbik7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRzZWxlY3Rpb24gPSBzZWxlY3Rpb24uc2V0U3RhcnRQb3NpdGlvbihsaW5lTnVtYmVyLCBjb2x1bW4pO1xuXHRcdFx0fVxuXHRcdFx0dGhpcy5lZGl0b3Iuc2V0U2VsZWN0aW9uKHNlbGVjdGlvbik7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHRoaXMuZWRpdG9yLnNldFBvc2l0aW9uKHRoaXMuc3RhcnRPZklucHV0UG9zaXRpb24pO1xuXHRcdH1cblx0XHR0aGlzLnJldmVhbFNlbGVjdGlvbigpO1xuXHRcdHRoaXMucHJldmVudEtleUV2ZW50KCk7XG5cdH1cblxuXHRfb25QYWdlVXAoZSl7XG5cdFx0aWYoZS5icm93c2VyRXZlbnQuYWx0S2V5KXtcblx0XHRcdC8vIGFsdCBrZXkgbWVhbnMgbW92ZSBzY3JlZW4gbm90IGN1cnNvci4gU28gZGVmYXVsdCBoYW5kbGluZyBpcyBhbHdheXMgZmluZS5cblx0XHRcdHJldHVybjtcblx0XHR9XG5cdFx0Ly8gSWYgd2UgYXJlIGluIHRoZSByZWFkIG9ubHkgcmVnaW9uXG5cdFx0aWYodGhpcy5kb2VzQ3VycmVudFNlbGVjdGlvbkludGVyc2VjdFJlYWRPbmx5UmVnaW9uKCkpe1xuXHRcdFx0Ly8gQW5kIHRoZSB1c2VyIGlzIGhvbGRpbmcgc2hpZnQsIGFsbG93IGRlZmF1bHQgYmVoYXZpb3Jcblx0XHRcdGlmKGUuYnJvd3NlckV2ZW50LnNoaWZ0S2V5KXtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXHRcdFx0Ly8gSWYgaW4gcmVhZCBvbmx5IHJlZ2lvbiBidXQgdXNlciBpcyBub3QgaG9sZGluZyBzaGlmdCwgbW92ZSB0byBzdGFydCBvZiBpbnB1dCByZWdpb25cblx0XHRcdHRoaXMuZWRpdG9yLnNldFBvc2l0aW9uKHRoaXMuc3RhcnRPZklucHV0UG9zaXRpb24pO1xuXHRcdFx0dGhpcy5yZXZlYWxTZWxlY3Rpb24oKTtcblx0XHRcdHRoaXMucHJldmVudEtleUV2ZW50KCk7XG5cdFx0XHRyZXR1cm47XHRcdFx0XHRcblx0XHR9XG5cdFx0Ly8gSWYgd2Ugd291bGQgcGFnZSB1cCBpbnRvIHJlYWQgb25seSByZWdpb24sIHNlbGVjdCBpbnB1dCByZWdpb24gdXAgdG8gYmVnaW5uaW5nLlxuXHRcdGxldCB0YXJnZXRMaW5lID0gdGhpcy5nZXRTY3JlZW5MaW5lT2ZQb3NpdGlvbih0aGlzLmVkaXRvci5nZXRQb3NpdGlvbigpKSAtIHRoaXMubGluZXNQZXJTY3JlZW4gKyAxO1xuXHRcdGlmKHRhcmdldExpbmUgPD0gdGhpcy5nZXRMYXN0U2NyZWVuTGluZU9mTW9kZWxMaW5lKHRoaXMucmVhZE9ubHlMaW5lcykpe1xuXHRcdFx0aWYoZS5icm93c2VyRXZlbnQuc2hpZnRLZXkpe1xuXHRcdFx0XHR0aGlzLmVkaXRvci5zZXRTZWxlY3Rpb24odGhpcy5lZGl0b3IuZ2V0U2VsZWN0aW9uKCkuc2V0RW5kUG9zaXRpb24odGhpcy5zdGFydE9mSW5wdXRQb3NpdGlvbikpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dGhpcy5lZGl0b3Iuc2V0UG9zaXRpb24odGhpcy5zdGFydE9mSW5wdXRQb3NpdGlvbik7XG5cdFx0XHR9XG5cdFx0XHR0aGlzLnJldmVhbFNlbGVjdGlvbigpO1xuXHRcdFx0dGhpcy5wcmV2ZW50S2V5RXZlbnQoKTtcblx0XHR9XG5cdFx0Ly8gT3RoZXJ3aXNlLCBhbGxvdyBkZWZhdWx0IHBhZ2UgdXAgYmVoYXZpb3Jcblx0fVxuXG5cdHNldFZhbHVlKHZhbHVlKXtcblx0XHR0aGlzLmVkaXRvci5nZXRNb2RlbCgpLnB1c2hFZGl0T3BlcmF0aW9ucyhcblx0XHRcdFt0aGlzLmVkaXRvci5nZXRTZWxlY3Rpb24oKV0sXG5cdFx0XHRbe1xuXHRcdFx0XHRyYW5nZSA6IHRoaXMuYWxsT2ZJbnB1dFNlbGVjdGlvbixcblx0XHRcdFx0dGV4dCA6IHZhbHVlXG5cdFx0XHR9XSxcblx0XHRcdCgpID0+IFt0aGlzLmVuZE9mSW5wdXRTZWxlY3Rpb25dXG5cdFx0KTtcblx0XHR0aGlzLmVkaXRvci5zZXRQb3NpdGlvbih0aGlzLmVuZE9mSW5wdXRQb3NpdGlvbik7XG5cdFx0dGhpcy5lZGl0b3IucHVzaFVuZG9TdG9wKCk7XG5cdH1cblxuXHQvKipcblx0ICogUHJvZ3JhbW1hdGljYWxseSBzdWJtaXQgY29tbWFuZCBpbnRvIHRoZSByZXBsLiBGb3IgZGVtb3MuXG5cdCAqL1xuXHRhc3luYyBzdWJtaXRQeXRob25Db21tYW5kKGNvbW1hbmQsIGFkZFRvSGlzdG9yeT1mYWxzZSl7XG5cdFx0dGhpcy5zZXRWYWx1ZShjb21tYW5kKTtcblx0XHRhd2FpdCB0aGlzLnN1Ym1pdChhZGRUb0hpc3RvcnkpO1xuXHR9XG5cblx0LyoqXG5cdCAqIFByb2dyYW1tYXRpY2FsbHkgc3VibWl0IHNlcXVlbmNlIG9mIGNvbW1hbmRzIGludG8gdGhlIHJlcGwuIEZvciBkZW1vcy5cblx0ICovXG5cdGFzeW5jIHN1Ym1pdFB5dGhvbkNvbW1hbmRzKGNvbW1hbmRzLCBhZGRUb0hpc3Rvcnk9ZmFsc2Upe1xuXHRcdGZvcihsZXQgY29tbWFuZCBvZiBjb21tYW5kcyl7XG5cdFx0XHRhd2FpdCB0aGlzLnN1Ym1pdFB5dGhvbkNvbW1hbmQoY29tbWFuZCwgYWRkVG9IaXN0b3J5KTtcblx0XHR9XG5cdH1cblxuXG4gICAgYXN5bmMgc3RlcEhpc3RvcnkoZGlkeCkge1xuXHRcdHRoaXMuaGlzdG9yeS5zZXRUZW1wb3JhcnlWYWx1ZSh0aGlzLnZhbHVlKTtcblx0XHRjb25zdCBjaGFuZ2VkID0gdGhpcy5oaXN0b3J5LnN0ZXAoZGlkeCk7XG5cdFx0aWYoIWNoYW5nZWQpe1xuXHRcdFx0cmV0dXJuXG5cdFx0fVxuXHRcdHRoaXMuaW1tZWRhdGVDbGVhclN5bnRheEVycm9yKCk7XG5cdFx0dGhpcy5lZGl0b3IucHVzaFVuZG9TdG9wKCk7XG5cdFx0Ly8gVXNlIGEgbXVsdGkgY3Vyc29yIGJlZm9yZSBhbmQgYWZ0ZXIgdGhlIGVkaXQgb3BlcmF0aW9uIHRvIGluZGljYXRlIHRoYXQgdGhpcyBpcyBhIGhpc3RvcnkgaXRlbVxuXHRcdC8vIGNoYW5nZS4gSW4gb25EaWRDaGFuZ2VDdXJzb3JTZWxlY3Rpb24gd2lsbCBjaGVjayBmb3IgYSBzZWNvbmRhcnkgc2VsZWN0aW9uIGFuZCB1c2UgdGhlIHByZXNlbmNlIFxuXHRcdC8vIG9mIGl0IHRvIGRlZHVjZSB0aGF0IGEgaGlzdG9yeSBzdGVwIG9jY3VycmVkLiBXZSB0aGVuIGltbWVkaWF0ZWx5IGNsZWFyIHRoZSBzZWNvbmRhcnkgc2VsZWN0aW9uXG5cdFx0Ly8gdG8gcHJldmVudCB0aGUgdXNlciBmcm9tIGV2ZXIgc2VlaW5nIGl0LlxuXHRcdHRoaXMuZWRpdG9yLmdldE1vZGVsKCkucHVzaEVkaXRPcGVyYXRpb25zKFxuXHRcdFx0W3RoaXMuZWRpdG9yLmdldFNlbGVjdGlvbigpLCBuZXcgbW9uYWNvLlNlbGVjdGlvbigxLCAxLCAxLCAxKV0sIFxuXHRcdFx0W3tcblx0XHRcdFx0cmFuZ2UgOiB0aGlzLmFsbE9mSW5wdXRTZWxlY3Rpb24sXG5cdFx0XHRcdHRleHQgOiAoYXdhaXQgdGhpcy5oaXN0b3J5LnZhbHVlKSB8fCBcIlwiXG5cdFx0XHR9XSxcblx0XHRcdCgpID0+IFt0aGlzLmVuZE9mSW5wdXRTZWxlY3Rpb24sIG5ldyBtb25hY28uU2VsZWN0aW9uKDEsIDEsIDEsIDEpXVxuXHRcdCk7XG5cdFx0dGhpcy5lZGl0b3IucHVzaFVuZG9TdG9wKCk7XG5cdFx0Ly8gRm9yIHNvbWUgcmVhc29uIHdlIGVuZCB1cCBzZWxlY3RpbmcgdGhlIGlucHV0LiBUaGlzIGlzIG1heWJlIGEgZ2xpdGNoIHdpdGggcHVzaEVkaXRPcGVyYXRpb25zP1xuXHRcdC8vIEl0IGRvZXNuJ3QgaGFwcGVuIHdpdGggdGhpcy5lZGl0b3IuZXhlY3V0ZUVkaXRzLCBidXQgdXNpbmcgZXhlY3V0ZUVkaXRzIGRvZXNuJ3Qgd29yayBiZWNhdXNlXG5cdFx0Ly8gZm9yIHNvbWUgcmVhc29uIHdlIGNhbid0IGNvbnZpbmNlIGl0IHRoYXQgdGhlIGJlZm9yZSBjdXJzb3Igc3RhdGUgaXMgYSBtdWx0aSBjdXJzb3IgbGlrZSB3ZSBuZWVkIFxuXHRcdC8vIGZvciB0aGlzIHN0cmF0ZWd5LlxuXHRcdHRoaXMuZWRpdG9yLnNldFBvc2l0aW9uKHRoaXMuZW5kT2ZJbnB1dFBvc2l0aW9uKTtcblx0XHR0aGlzLnJldmVhbFNlbGVjdGlvbigpO1xuXHRcdC8vIFJlY29yZCBob3cgbXVjaCB0aGUgaGlzdG9yeSBpbmRleCBjaGFuZ2VkIGZvciB1bmRvLlxuXHRcdHRoaXMuaGlzdG9yeUluZGV4UmVkb1N0YWNrID0gW107XG5cdFx0dGhpcy5oaXN0b3J5SW5kZXhVbmRvU3RhY2sucHVzaChkaWR4KTtcblx0XHR0aGlzLmp1c3RTdGVwcGVkSGlzdG9yeSA9IHRydWU7XG5cdFx0bGV0IHV1aWQgPSB1dWlkdjQoKTtcblx0XHR0aGlzLmhpc3RvcnlTdGVwVVVJRCA9IHV1aWQ7XG5cdFx0YXdhaXQgc2xlZXAoNTAwMCk7XG5cdFx0Ly8gQ2xlYXIgdGhlIHNwZWNpYWwgc3RhdGUgYWZ0ZXIgYW4gaW50ZXJsdWRlIHRvIGF2b2lkIHN1cnByaXNpbmcgd2VpcmQgc3RhdGUgaWYgdGhlIHVzZXJcblx0XHQvLyBjb21lcyBiYWNrIGFmdGVyIGRvaW5nIHNvbWV0aGluZyBlbHNlLlxuXHRcdGlmKHRoaXMuaGlzdG9yeVN0ZXBVVUlEID09PSB1dWlkKXtcblx0XHRcdHRoaXMuanVzdFN0ZXBwZWRIaXN0b3J5ID0gZmFsc2U7XG5cdFx0fVxuXHR9XG5cblx0XG5cdG1heWJlU3RlcEhpc3RvcnkoZXZlbnQpe1xuXHRcdGxldCByZXN1bHQgPSB0aGlzLnNob3VsZFN0ZXBIaXN0b3J5KGV2ZW50KTtcblx0XHRpZihyZXN1bHQpe1xuXHRcdFx0bGV0IGRpciA9IHtcIkFycm93VXBcIiA6IC0xLCBcIkFycm93RG93blwiIDogMSB9W2V2ZW50LmtleV07XG5cdFx0XHR0aGlzLnN0ZXBIaXN0b3J5KGRpcik7XG5cdFx0fVxuXHRcdHJldHVybiByZXN1bHQ7XG5cdH1cblxuICAgIHNob3VsZFN0ZXBIaXN0b3J5KGV2ZW50KXtcblx0XHRpZighW1wiQXJyb3dVcFwiLCBcIkFycm93RG93blwiXS5pbmNsdWRlcyhldmVudC5rZXkpKXtcblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9XG5cdFx0aWYodGhpcy5qdXN0U3RlcHBlZEhpc3Rvcnkpe1xuXHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0fVxuXHRcdGlmKCF0aGlzLmVkaXRvci5nZXRTZWxlY3Rpb24oKS5pc0VtcHR5KCkpe1xuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH1cblx0XHRsZXQgcG9zID0gdGhpcy5lZGl0b3IuZ2V0UG9zaXRpb24oKTtcbiAgICAgICAgaWYoZXZlbnQua2V5ID09PSBcIkFycm93VXBcIil7XG5cdFx0XHRyZXR1cm4gdGhpcy5nZXRTY3JlZW5MaW5lT2ZQb3NpdGlvbihwb3MpID09PSB0aGlzLmdldFNjcmVlbkxpbmVPZlBvc2l0aW9uKHRoaXMuc3RhcnRPZklucHV0UG9zaXRpb24pO1xuICAgICAgICB9XG4gICAgICAgIGlmKGV2ZW50LmtleSA9PT0gXCJBcnJvd0Rvd25cIil7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRTY3JlZW5MaW5lT2ZQb3NpdGlvbihwb3MpID09PSB0aGlzLmdldFNjcmVlbkxpbmVPZlBvc2l0aW9uKHRoaXMuZW5kT2ZJbnB1dFBvc2l0aW9uKTtcbiAgICAgICAgfVxuICAgICAgICB0aHJvdyBFcnJvcihcIlVucmVhY2hhYmxlXCIpO1xuXHR9XG5cblx0c2hvdWxkRW50ZXJTdWJtaXQoZXZlbnQpe1xuXHRcdGlmKGV2ZW50LnNoaWZ0S2V5KXtcblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9XG5cdFx0aWYoZXZlbnQuY3RybEtleSl7XG5cdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHR9XG5cdFx0aWYodGhpcy5lZGl0b3IuZ2V0UG9zaXRpb24oKS5saW5lTnVtYmVyICE9PSB0aGlzLmdldE1vZGVsTGluZUNvdW50KCkpe1xuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH1cblx0XHRpZih0aGlzLmdldExlbmd0aE9mTGFzdE1vZGVsTGluZSgpID09IDApe1xuXHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0fVxuXHRcdGlmKHRoaXMudmFsdWUuc2VhcmNoKFwiXFxuXCIpID49IDApe1xuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH1cblx0XHRpZigvKDp8XFxcXClcXHMqJC8udGVzdCh0aGlzLnZhbHVlKSl7XG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fVxuICAgICAgICByZXR1cm4gdHJ1ZTtcblx0fVxuXG5cdGFzeW5jIHN1Ym1pdChhZGRUb0hpc3Rvcnk9dHJ1ZSl7XG5cdFx0aWYodGhpcy5zeW50YXhFcnJvcldpZGdldCl7XG5cdFx0XHQvLyBEb24ndCBkbyBhbnl0aGluZyBpZiB0aGVyZSdzIGFscmVhZHkgYSBzeW50YXggZXJyb3IuLi5cblx0XHRcdHJldHVybjtcblx0XHR9XG5cdFx0Y29uc3QgY29kZSA9IHRoaXMudmFsdWU7XG5cdFx0aWYoIWNvZGUudHJpbSgpKXtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cdFx0Ly8gdGhpcy5lZGl0b3Iuc2V0VmFsdWUodGhpcy5lZGl0b3IuZ2V0VmFsdWUoKS50cmltRW5kKCkpO1xuXHRcdC8vIHRoaXMucHJpbnRUb0NvbnNvbGUoXCJcXG5cIik7XG5cdFx0Ly8gYXdhaXQgc2xlZXAoMCk7XG5cdFx0Ly8gZWRpdG9yLnNldFZhbHVlIHNlZW1zIHRvIHVuZG8gY2hhbmdlcyB0byB0aGUgY29uc29sZSBzbyByZWFkT25seSBoYXMgdG8gYmUgc2V0IHNlY29uZFxuXHRcdC8vIGFuZCB3ZSBuZWVkIHRvIHNsZWVwIGZpcnN0LlxuXHRcdHRoaXMucmVhZE9ubHkgPSB0cnVlOyBcblx0XHQvLyBleGVjdXRpb24gaXMgYSBoYW5kbGUgd2UgY2FuIHVzZSB0byBjYW5jZWwuXG5cdFx0Y29uc3QgZXhlY3V0aW9uID0gdGhpcy5leGVjdXRvci5leGVjdXRlKGNvZGUpO1xuXHRcdHRoaXMuY3VycmVudEV4ZWN1dGlvbiA9IGV4ZWN1dGlvbjtcblx0XHRleGVjdXRpb24ub25TdGRvdXQoKGRhdGEpID0+IHRoaXMucHJpbnRUb0NvbnNvbGUoZGF0YSkpO1xuXHRcdGV4ZWN1dGlvbi5vblN0ZGVycigoZGF0YSkgPT4gdGhpcy5wcmludFRvQ29uc29sZShkYXRhKSk7XG5cdFx0bGV0IHN5bnRheENoZWNrID0gYXdhaXQgZXhlY3V0aW9uLnZhbGlkYXRlX3N5bnRheChjb2RlKTtcblx0XHRpZighc3ludGF4Q2hlY2sudmFsaWQpe1xuXHRcdFx0YXdhaXQgc2xlZXAoMCk7XG5cdFx0XHR0aGlzLnNob3dTeW50YXhFcnJvcihzeW50YXhDaGVjay5lcnJvcnMpO1xuXHRcdFx0dGhpcy5jdXJyZW50RXhlY3V0aW9uID0gdW5kZWZpbmVkO1xuXHRcdFx0dGhpcy5yZWFkT25seSA9IGZhbHNlO1xuXHRcdFx0Ly8gYXdhaXQgc2xlZXAoMCk7XG5cdFx0XHQvLyB0aGlzLmVkaXRvci5zZXRQb3NpdGlvbih0aGlzLmVuZE9mSW5wdXRQb3NpdGlvbik7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0dGhpcy5lZGl0b3Iuc2V0VmFsdWUodGhpcy5lZGl0b3IuZ2V0VmFsdWUoKS50cmltRW5kKCkpO1xuXHRcdHRoaXMucHJpbnRUb0NvbnNvbGUoXCJcXG5cIik7XG5cdFx0YXdhaXQgc2xlZXAoMCk7XG5cdFx0aWYoYWRkVG9IaXN0b3J5KXtcblx0XHRcdHRoaXMuaGlzdG9yeS5wdXNoKGNvZGUpO1xuXHRcdH1cbiAgICAgICAgYXdhaXQgc2xlZXAoMCk7XG5cdFx0dGhpcy5oaXN0b3J5SWR4ID0gdGhpcy5oaXN0b3J5Lmxlbmd0aDtcblxuXHRcdGxldCByZXN1bHQ7XG5cdFx0dHJ5IHtcblx0XHRcdHJlc3VsdCA9IGF3YWl0IGV4ZWN1dGlvbi5yZXN1bHQoKTtcblx0XHRcdHRoaXMuYWRkT3V0cHV0KHJlc3VsdCk7XG5cdFx0fSBjYXRjaChlKSB7XG5cdFx0XHR0aGlzLmFkZE91dHB1dChlLnRyYWNlYmFjayk7XG5cdFx0fVxuXHRcdHRoaXMuY3VycmVudEV4ZWN1dGlvbiA9IHVuZGVmaW5lZDtcblx0XHR0aGlzLnByZXBhcmVJbnB1dCgpO1xuXHRcdGF3YWl0IHNsZWVwKDApO1xuXHRcdHRoaXMucmVhZE9ubHkgPSBmYWxzZTtcblx0fVxuXG5cdGFkZE91dHB1dCh2YWx1ZSl7XG5cdFx0Ly8gSWYgc29tZXRoaW5nIHByaW50ZWQgdG8gc3Rkb3V0IGJ1dCBkaWRuJ3QgZW5kIHRoZSBsaW5lLCB3ZSdsbCBoYXZlIGEgbm9uZW1wdHkgbGluZVxuXHRcdC8vIGF0IHRoZSBib3R0b20uIFdlIGRvbid0IHdhbnQgb3VyIG91dHB1dCBzaGFyaW5nIHdpdGggdGhhdCwgc28gaW5zZXJ0IGEgbmV3bGluZSBpbiBcblx0XHQvLyB0aGlzIGNhc2UuXG5cdFx0aWYodGhpcy5nZXRMZW5ndGhPZkxhc3RNb2RlbExpbmUoKSAhPT0gMCl7XG5cdFx0XHR0aGlzLnByaW50VG9Db25zb2xlKFwiXFxuXCIpO1xuXHRcdH1cblx0XHRpZih2YWx1ZSA9PT0gdW5kZWZpbmVkKXtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cdFx0dGhpcy5wcmludFRvQ29uc29sZShgJHt2YWx1ZX1cXG5gKTtcblx0fVxuXG4gICAgcHJpbnRUb0NvbnNvbGUodmFsdWUpe1xuXHRcdGNvbnN0IG9sZE51bVNjcmVlbkxpbmVzID0gdGhpcy5nZXRTY3JlZW5MaW5lQ291bnQoKTtcblx0XHRjb25zdCBvbGROdW1Nb2RlbExpbmVzID0gdGhpcy5nZXRNb2RlbExpbmVDb3VudCgpO1xuXHRcdHRoaXMuZWRpdG9yLnNldFZhbHVlKGAke3RoaXMuZWRpdG9yLmdldFZhbHVlKCl9JHt2YWx1ZX1gKTtcblx0XHRjb25zdCBuZXdOdW1TY3JlZW5MaW5lcyA9IHRoaXMuZ2V0U2NyZWVuTGluZUNvdW50KCk7XG5cdFx0Y29uc3QgbmV3TnVtTW9kZWxMaW5lcyA9IHRoaXMuZ2V0TW9kZWxMaW5lQ291bnQoKTtcblx0XHRmb3IobGV0IGN1ckxpbmUgPSBvbGROdW1Nb2RlbExpbmVzICsgMTsgY3VyTGluZSA8PSBuZXdOdW1Nb2RlbExpbmVzOyBjdXJMaW5lKyspe1xuXHRcdFx0dGhpcy5vdXRwdXRNb2RlbExpbmVzW2N1ckxpbmVdID0gdHJ1ZTtcblx0XHR9XG5cdFx0Zm9yKGxldCBjdXJMaW5lID0gb2xkTnVtU2NyZWVuTGluZXMgKyAxOyBjdXJMaW5lIDw9IG5ld051bVNjcmVlbkxpbmVzOyBjdXJMaW5lKyspe1xuXHRcdFx0dGhpcy5vdXRwdXRTY3JlZW5MaW5lc1tjdXJMaW5lXSA9IHRydWU7XG5cdFx0fVxuXHR9XG5cblx0cHJlcGFyZUlucHV0KCl7XG5cdFx0Y29uc3QgbnVtU2NyZWVuTGluZXMgPSB0aGlzLmdldFNjcmVlbkxpbmVDb3VudCgpO1xuXHRcdGxldCBudW1Nb2RlbExpbmVzID0gdGhpcy5nZXRNb2RlbExpbmVDb3VudCgpO1xuXHRcdGlmKHRoaXMuZ2V0TGVuZ3RoT2ZMYXN0TW9kZWxMaW5lKCkgPT09IDApe1xuXHRcdFx0Ly8gVXN1YWxseSB0aGVyZSBpcyBhbiBlbXB0eSBtb2RlbCBsaW5lIGF0IHRoZSBib3R0b20sIGl0IGhhcyBiZWVuIG1hcmtlZCBhcyBhbiBvdXRwdXQgbGluZVxuXHRcdFx0Ly8gc28gb25tYXJrIGl0LlxuXHRcdFx0ZGVsZXRlIHRoaXMub3V0cHV0TW9kZWxMaW5lc1tudW1Nb2RlbExpbmVzXTtcblx0XHRcdGRlbGV0ZSB0aGlzLm91dHB1dFNjcmVlbkxpbmVzW251bVNjcmVlbkxpbmVzXTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0Ly8gT2Nhc3Npb25hbGx5IHNvbWV0aGluZyBwcmludGVkIHN0dWZmIHRvIHN0ZG91dCBidXQgZGlkbid0IHRlcm1pbmF0ZSB0aGUgbGluZS5cblx0XHRcdC8vIFdlIHRlcm1pbmF0ZSBpdCBvdXJzZWx2ZXMgaW4gdGhhdCBjYXNlIHRvIHByZXZlbnQgd2VpcmRuZXNzLlxuXHRcdFx0dGhpcy5lZGl0b3Iuc2V0VmFsdWUodGhpcy5lZGl0b3IuZ2V0VmFsdWUoKSArIFwiXFxuXCIpO1xuXHRcdFx0bnVtTW9kZWxMaW5lcysrO1xuXHRcdH1cblx0XHR0aGlzLnJlYWRPbmx5TGluZXMgPSBudW1Nb2RlbExpbmVzIC0gMTtcblx0XHR0aGlzLmZpcnN0TGluZXNbbnVtTW9kZWxMaW5lc10gPSB0cnVlO1xuXHRcdC8vIHRoZSB2YWx1ZSBvZiBmaXJzdExpbmVzIHNpZ25hbHMgdGhhdCB0aGUgXCJsaW5lIG51bWJlclwiIHNob3VsZCBzaG93IGFzIGEgXCI+Pj5cIiBwcm9tcHQuXG5cdFx0Ly8gd2UgbmVlZCB0byByZWZyZXNoIHRoZSBlZGl0b3IgdG8gZ2V0IGl0IHRvIHNob3cgdXAgdGhvdWdoIHNvIHNldCB2YWx1ZSB0byBjdXJyZW50IHZhbHVlLlxuXHRcdHRoaXMuZWRpdG9yLnNldFZhbHVlKHRoaXMuZWRpdG9yLmdldFZhbHVlKCkpO1x0XHRcblx0XHRcblx0XHR0aGlzLmVkaXRvci5zZXRQb3NpdGlvbih0aGlzLmVuZE9mSW5wdXRQb3NpdGlvbik7XG5cdFx0dGhpcy5yZXZlYWxTZWxlY3Rpb24oKTtcblx0fVxuXG5cdHVwZGF0ZVN5bnRheEVycm9yRGVjb3JhdGlvbkF0dHJpYnV0ZXMoc3RhdGUpe1xuXHRcdGxldCBlbHRzID0gW1xuXHRcdFx0ZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5yZXBsLWVycm9yLWRlY29yYXRpb24taGlnaGxpZ2h0XCIpLFxuXHRcdFx0ZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5yZXBsLWVycm9yLWRlY29yYXRpb24tdGV4dFwiKSxcblx0XHRcdGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucmVwbC1lcnJvci1kZWNvcmF0aW9uLXVuZGVybGluZVwiKSxcblx0XHRcdGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucmVwbC1lcnJvci13aWRnZXRcIiksXG5cdFx0XTtcblx0XHQvLyBjb25zb2xlLmxvZyhcInVwZGF0ZVN5bnRheEVycm9yRGVjb3JhdGlvbkF0dHJpYnV0ZXMgc3RhdGU6XCIsIHN0YXRlLCBcImVsdHM6XCIsIGVsdHMpO1xuXHRcdGZvcihsZXQgZWx0IG9mIGVsdHMpe1xuXHRcdFx0aWYoIWVsdCl7XG5cdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0fVxuXHRcdFx0dGhpcy51cGRhdGVTeW50YXhFcnJvckRlY29yYXRpb25BdHRyaWJ1dGVzT25FbGVtZW50KGVsdCwgc3RhdGUpO1xuXHRcdH1cblx0fVx0XG5cblx0dXBkYXRlU3ludGF4RXJyb3JEZWNvcmF0aW9uQXR0cmlidXRlc09uRWxlbWVudChlbHQsIHN0YXRlKXtcblx0XHRmb3IobGV0IFtrLCB2XSBvZiBPYmplY3QuZW50cmllcyhzdGF0ZSkpe1xuXHRcdFx0aWYoKHYgPT09IGZhbHNlIHx8IHYgPT09IFwiZmFsc2VcIikpe1xuXHRcdFx0XHRlbHQucmVtb3ZlQXR0cmlidXRlKGspO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0ZWx0LnNldEF0dHJpYnV0ZShrLCB2KTtcblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHRpbW1lZGF0ZUNsZWFyU3ludGF4RXJyb3IoKXtcblx0XHRpZighdGhpcy5zeW50YXhFcnJvcldpZGdldCl7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVx0XHRcblx0XHR0aGlzLmVkaXRvci5yZW1vdmVDb250ZW50V2lkZ2V0KHRoaXMuc3ludGF4RXJyb3JXaWRnZXQpO1xuXHRcdHRoaXMuc3ludGF4RXJyb3JXaWRnZXQgPSB1bmRlZmluZWQ7XG5cdFx0dGhpcy5lZGl0b3IuZGVsdGFEZWNvcmF0aW9ucyh0aGlzLmRlY29yYXRpb25JZHMgfHwgW10sIFtdKTtcblx0XHR0aGlzLmRlY29yYXRpb25JZHMgPSBbXTtcblx0fVxuXG5cdGFzeW5jIGNsZWFyU3ludGF4RXJyb3IoKXtcblx0XHRpZighdGhpcy5zeW50YXhFcnJvcldpZGdldCl7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXHRcdGxldCBzeW50YXhFcnJvcldpZGdldCA9IHRoaXMuc3ludGF4RXJyb3JXaWRnZXQ7XG5cdFx0Zm9yKGxldCBpPTA7IGkgPCA0OyBpKyspe1xuXHRcdFx0Ly8gVGhpcyB3b3JrcyByYXRoZXIgaW5jb25zaXN0ZW50bHkuIEkgZG9uJ3QgdW5kZXJzdGFuZCB3aHkuXG5cdFx0XHQvLyBEb2luZyBpdCA0IHRpbWVzIHNlZW1zIHRvIHdvcmsgdGhvdWdoLi4uXG5cdFx0XHR0aGlzLnVwZGF0ZVN5bnRheEVycm9yRGVjb3JhdGlvbkF0dHJpYnV0ZXMoeyBcInRyYW5zaXRpb25cIiA6IFwiaGlkZVwiLCBcIm5vdC12aXNpYmxlXCIgOiB0cnVlIH0pO1xuXHRcdFx0YXdhaXQgc2xlZXAoMTApO1xuXHRcdH1cblx0XHRhd2FpdCBwcm9taXNlRnJvbURvbUV2ZW50KGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucmVwbC1lcnJvci13aWRnZXRcIiksIFwidHJhbnNpdGlvbmVuZFwiKTtcblx0XHR0aGlzLnVwZGF0ZVN5bnRheEVycm9yRGVjb3JhdGlvbkF0dHJpYnV0ZXMoeyBcInRyYW5zaXRpb25cIiA6IGZhbHNlIH0pO1xuXHRcdHRoaXMuZWRpdG9yLnJlbW92ZUNvbnRlbnRXaWRnZXQoc3ludGF4RXJyb3JXaWRnZXQpO1xuXHRcdHRoaXMuZWRpdG9yLmRlbHRhRGVjb3JhdGlvbnModGhpcy5kZWNvcmF0aW9uSWRzIHx8IFtdLCBbXSk7XG5cdFx0dGhpcy5kZWNvcmF0aW9uSWRzID0gW107XG5cdFx0dGhpcy5zeW50YXhFcnJvcldpZGdldCA9IHVuZGVmaW5lZDtcblx0fVxuXHRcblx0YXN5bmMgc2hvd1N5bnRheEVycm9yKGVycm9ycyl7XG5cdFx0Ly8gVE9ETzogbWF5YmUgaGFuZGxlIG11bHRpcGxlIHN5bnRheCBlcnJvcnMgY2FzZS4uLj8gUHJvYmFibHkgbm90IGltcG9ydGFudC4uLlxuXHRcdGxldCBlcnJvciA9IGVycm9yc1swXTtcblx0XHRsZXQgW3N0YXJ0X2xpbmUsIHN0YXJ0X2NvbF0gPSBlcnJvci5zdGFydF9wb3M7XG5cdFx0c3RhcnRfbGluZSArPSB0aGlzLnJlYWRPbmx5TGluZXM7XG5cdFx0bGV0IFtlbmRfbGluZSwgZW5kX2NvbF0gPSBlcnJvci5lbmRfcG9zO1xuXHRcdGVuZF9saW5lICs9IHRoaXMucmVhZE9ubHlMaW5lcztcdFx0XG5cdFx0bGV0IGRlY29yYXRpb25zID0gW3tcblx0XHRcdHJhbmdlOiBuZXcgbW9uYWNvLlJhbmdlKHN0YXJ0X2xpbmUsIDEsIGVuZF9saW5lLCAxKSxcblx0XHRcdG9wdGlvbnM6IHtcblx0XHRcdFx0aXNXaG9sZUxpbmU6IHRydWUsXG5cdFx0XHRcdGFmdGVyQ29udGVudENsYXNzTmFtZTogJ3JlcGwtZXJyb3IgcmVwbC1lcnJvci1mYWRlLWluIHJlcGwtZXJyb3ItZGVjb3JhdGlvbi11bmRlcmxpbmUnLFxuXHRcdFx0fVxuXHRcdH1dO1xuXHRcdC8vIGNvbnNvbGUubG9nKFtzdGFydF9saW5lLCBzdGFydF9jb2wsIGVuZF9saW5lLCBlbmRfY29sICsgMV0pO1xuXHRcdGlmKHN0YXJ0X2xpbmUgIT09IGVuZF9saW5lIHx8IHN0YXJ0X2NvbCAhPSBlbmRfY29sKXtcblx0XHRcdC8vIGxldCBlbmRDb2wgPSB0aGlzLmVkaXRvci5nZXRNb2RlbCgpLmdldExpbmVNYXhDb2x1bW4obGluZSk7XG5cdFx0XHRkZWNvcmF0aW9ucy5wdXNoKHtcblx0XHRcdFx0cmFuZ2U6IG5ldyBtb25hY28uUmFuZ2Uoc3RhcnRfbGluZSwgc3RhcnRfY29sLCBlbmRfbGluZSwgZW5kX2NvbCArIDEpLFxuXHRcdFx0XHRvcHRpb25zOiB7XG5cdFx0XHRcdFx0Ly8gaXNXaG9sZUxpbmU6IHRydWUsXG5cdFx0XHRcdFx0Y2xhc3NOYW1lOiAncmVwbC1lcnJvciByZXBsLWVycm9yLWZhZGUtaW4gcmVwbC1lcnJvci1kZWNvcmF0aW9uLWhpZ2hsaWdodCcsXG5cdFx0XHRcdFx0aW5saW5lQ2xhc3NOYW1lIDogJ3JlcGwtZXJyb3IgcmVwbC1lcnJvci1kZWNvcmF0aW9uLXRleHQnXG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdH1cblx0XHRhd2FpdCBzbGVlcCgwKTtcblx0XHR0aGlzLmVkaXRvci5kZWx0YURlY29yYXRpb25zKHRoaXMuZGVjb3JhdGlvbnNJZHMgfHwgW10sIFtdKTtcblx0XHRhd2FpdCBzbGVlcCgwKTtcblx0XHR0aGlzLmRlY29yYXRpb25zID0gZGVjb3JhdGlvbnM7XG5cdFx0dGhpcy5kZWNvcmF0aW9uSWRzID0gdGhpcy5lZGl0b3IuZGVsdGFEZWNvcmF0aW9ucyhbXSwgZGVjb3JhdGlvbnMpO1xuXHRcdC8vIHRoaXMuZWRpdG9yLm9uRGlkQ2hhbmdlTW9kZWxEZWNvcmF0aW9ucygoZSkgPT4ge1xuXHRcdC8vIFx0Y29uc29sZS5sb2coXCJkZWNzOlwiLCB0aGlzLmVkaXRvci5nZXRMaW5lRGVjb3JhdGlvbnModGhpcy5lZGl0b3IuZ2V0UG9zaXRpb24oKS5saW5lTnVtYmVyKSlcblx0XHQvLyB9KTtcblx0XHR0aGlzLnN5bnRheEVycm9yV2lkZ2V0ID0ge1xuXHRcdFx0ZG9tTm9kZTogbnVsbCxcblx0XHRcdGdldElkOiBmdW5jdGlvbigpIHtcblx0XHRcdFx0cmV0dXJuICdlcnJvci53aWRnZXQnO1xuXHRcdFx0fSxcblx0XHRcdGdldERvbU5vZGU6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRpZiAoIXRoaXMuZG9tTm9kZSkge1xuXHRcdFx0XHRcdHRoaXMuZG9tTm9kZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXHRcdFx0XHRcdHRoaXMuZG9tTm9kZS5pbm5lclRleHQgPSBgJHtlcnJvci5tc2d9YDsgLy9gJHtlcnJvci50eXBlfTogJHtlcnJvci5tc2d9YDtcblx0XHRcdFx0XHR0aGlzLmRvbU5vZGUuY2xhc3NMaXN0LmFkZChcInJlcGwtZXJyb3JcIik7XG5cdFx0XHRcdFx0dGhpcy5kb21Ob2RlLmNsYXNzTGlzdC5hZGQoXCJyZXBsLWVycm9yLWZhZGUtaW5cIik7XG5cdFx0XHRcdFx0dGhpcy5kb21Ob2RlLmNsYXNzTGlzdC5hZGQoXCJyZXBsLWVycm9yLXdpZGdldFwiKTtcblx0XHRcdFx0XHQvLyB0aGlzLmRvbU5vZGUuc2V0QXR0cmlidXRlKFwibm90LXZpc2libGVcIiwgXCJcIik7XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIHRoaXMuZG9tTm9kZTtcblx0XHRcdH0sXG5cdFx0XHRnZXRQb3NpdGlvbjogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHJldHVybiB7XG5cdFx0XHRcdFx0cG9zaXRpb246IHtcblx0XHRcdFx0XHRcdGxpbmVOdW1iZXI6IHN0YXJ0X2xpbmUsIC8vIElzIHRoaXMgdGhlIGJlc3QgbGluZSB0byBjaG9vc2U/XG5cdFx0XHRcdFx0XHRjb2x1bW46IDFcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdHByZWZlcmVuY2U6IFttb25hY28uZWRpdG9yLkNvbnRlbnRXaWRnZXRQb3NpdGlvblByZWZlcmVuY2UuQkVMT1ddXG5cdFx0XHRcdH07XG5cdFx0XHR9XG5cdFx0fTtcblx0XHR0aGlzLmVkaXRvci5hZGRDb250ZW50V2lkZ2V0KHRoaXMuc3ludGF4RXJyb3JXaWRnZXQpO1xuXHRcdGF3YWl0IHNsZWVwKDApO1xuXHRcdC8vIGNvbnNvbGUubG9nKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucmVwbC1lcnJvci13aWRnZXRcIikpO1xuXHRcdHRoaXMudXBkYXRlU3ludGF4RXJyb3JEZWNvcmF0aW9uQXR0cmlidXRlcyh7IFwibm90LXZpc2libGVcIiA6IFwiXCIsIFwidHJhbnNpdGlvblwiIDogXCJzaG93XCJ9KTtcblx0XHRhd2FpdCBzbGVlcCgzMCk7XG5cdFx0dGhpcy51cGRhdGVTeW50YXhFcnJvckRlY29yYXRpb25BdHRyaWJ1dGVzKHsgXCJub3QtdmlzaWJsZVwiIDogZmFsc2UsIFwidHJhbnNpdGlvblwiIDogXCJzaG93XCJ9KTtcblx0XHRhd2FpdCBwcm9taXNlRnJvbURvbUV2ZW50KGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucmVwbC1lcnJvci13aWRnZXRcIiksIFwidHJhbnNpdGlvbmVuZFwiKTtcblx0XHR0aGlzLnVwZGF0ZVN5bnRheEVycm9yRGVjb3JhdGlvbkF0dHJpYnV0ZXMoeyBcIm5vdC12aXNpYmxlXCIgOiBmYWxzZSwgXCJ0cmFuc2l0aW9uXCIgOiBmYWxzZX0pO1xuXHRcdHJldHVybjtcblx0fVxufVxuY3VzdG9tRWxlbWVudHMuZGVmaW5lKCdyZXBsLXRlcm1pbmFsJywgUmVwbEVsZW1lbnQpOyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/repl.js\n");

/***/ }),

/***/ "./src/utils.js":
/*!**********************!*\
  !*** ./src/utils.js ***!
  \**********************/
/*! exports provided: sleep, promiseFromDomEvent, animationFrame, throttle, uuidv4 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"sleep\", function() { return sleep; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"promiseFromDomEvent\", function() { return promiseFromDomEvent; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"animationFrame\", function() { return animationFrame; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"throttle\", function() { return throttle; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"uuidv4\", function() { return uuidv4; });\nfunction sleep(ms) {\r\n    return new Promise(resolve => setTimeout(resolve, ms));\r\n}\r\n\r\nfunction promiseFromDomEvent(eventTarget, eventName, filter){\r\n    return new Promise(resolve => {\r\n        eventTarget.addEventListener(eventName, function handler(e) {\r\n            if(filter === undefined || filter(e)) {\r\n                eventTarget.removeEventListener(eventName, handler);\r\n                resolve(e);\r\n            }\r\n        });\r\n    });\r\n}\r\n\r\nfunction animationFrame() {\r\n    return new Promise(resolve => window.requestAnimationFrame(resolve));\r\n}\r\n\r\n// Returns a function, that, when invoked, will only be triggered at most once\r\n// during a given window of time. Normally, the throttled function will run\r\n// as much as it can, without ever going more than once per `wait` duration;\r\n// but if you'd like to disable the execution on the leading edge, pass\r\n// `{leading: false}`. To disable execution on the trailing edge, ditto.\r\nfunction throttle(wait, options) {\r\n    return function helper(func){\r\n        let context, args, result;\r\n        let timeout = null;\r\n        let previous = 0;\r\n        options = options || {};\r\n        function later() {\r\n            previous = options.leading === false ? 0 : Date.now();\r\n            timeout = null;\r\n            result = func.apply(context, args);\r\n            if (!timeout){\r\n                context = args = null;\r\n                wrapper.resolve();\r\n            } \r\n        };\r\n        wrapper.stoppedPromise = new Promise(resolve => resolve());\r\n        function wrapper() {\r\n            let now = Date.now();\r\n            if(previous === 0){\r\n                wrapper.stoppedPromise = new Promise(resolve => wrapper.resolve = resolve);\r\n            }\r\n            if (previous === 0 && options.leading === false){\r\n                previous = now;\r\n            } \r\n            let remaining = wait - (now - previous);\r\n            context = this;\r\n            args = arguments;\r\n            if (remaining <= 0 || remaining > wait) {\r\n                if (timeout) {\r\n                    clearTimeout(timeout);\r\n                    timeout = null;\r\n                }\r\n                previous = now;\r\n                result = func.apply(context, args);\r\n                if (!timeout){\r\n                    context = args = null;\r\n                }\r\n            } else if(!timeout) {\r\n                if(options.trailing !== false){\r\n                    timeout = setTimeout(later, remaining);\r\n                } else {\r\n                    wrapper.resolve();\r\n                }\r\n            }\r\n            return result;\r\n        };\r\n        return wrapper;\r\n    }\r\n};\r\n\r\n\r\nfunction uuidv4() {\r\n    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\r\n      var r = Math.random() * 16 | 0, v = c == 'x' ? r : (r & 0x3 | 0x8);\r\n      return v.toString(16);\r\n    });\r\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvdXRpbHMuanM/MDI1ZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBTztBQUNQO0FBQ0E7O0FBRU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsS0FBSztBQUNMOztBQUVPO0FBQ1A7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUssZUFBZTtBQUNiO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUdPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMIiwiZmlsZSI6Ii4vc3JjL3V0aWxzLmpzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGZ1bmN0aW9uIHNsZWVwKG1zKSB7XHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIG1zKSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBwcm9taXNlRnJvbURvbUV2ZW50KGV2ZW50VGFyZ2V0LCBldmVudE5hbWUsIGZpbHRlcil7XHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XHJcbiAgICAgICAgZXZlbnRUYXJnZXQuYWRkRXZlbnRMaXN0ZW5lcihldmVudE5hbWUsIGZ1bmN0aW9uIGhhbmRsZXIoZSkge1xyXG4gICAgICAgICAgICBpZihmaWx0ZXIgPT09IHVuZGVmaW5lZCB8fCBmaWx0ZXIoZSkpIHtcclxuICAgICAgICAgICAgICAgIGV2ZW50VGFyZ2V0LnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZlbnROYW1lLCBoYW5kbGVyKTtcclxuICAgICAgICAgICAgICAgIHJlc29sdmUoZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gYW5pbWF0aW9uRnJhbWUoKSB7XHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKHJlc29sdmUpKTtcclxufVxyXG5cclxuLy8gUmV0dXJucyBhIGZ1bmN0aW9uLCB0aGF0LCB3aGVuIGludm9rZWQsIHdpbGwgb25seSBiZSB0cmlnZ2VyZWQgYXQgbW9zdCBvbmNlXHJcbi8vIGR1cmluZyBhIGdpdmVuIHdpbmRvdyBvZiB0aW1lLiBOb3JtYWxseSwgdGhlIHRocm90dGxlZCBmdW5jdGlvbiB3aWxsIHJ1blxyXG4vLyBhcyBtdWNoIGFzIGl0IGNhbiwgd2l0aG91dCBldmVyIGdvaW5nIG1vcmUgdGhhbiBvbmNlIHBlciBgd2FpdGAgZHVyYXRpb247XHJcbi8vIGJ1dCBpZiB5b3UnZCBsaWtlIHRvIGRpc2FibGUgdGhlIGV4ZWN1dGlvbiBvbiB0aGUgbGVhZGluZyBlZGdlLCBwYXNzXHJcbi8vIGB7bGVhZGluZzogZmFsc2V9YC4gVG8gZGlzYWJsZSBleGVjdXRpb24gb24gdGhlIHRyYWlsaW5nIGVkZ2UsIGRpdHRvLlxyXG5leHBvcnQgZnVuY3Rpb24gdGhyb3R0bGUod2FpdCwgb3B0aW9ucykge1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uIGhlbHBlcihmdW5jKXtcclxuICAgICAgICBsZXQgY29udGV4dCwgYXJncywgcmVzdWx0O1xyXG4gICAgICAgIGxldCB0aW1lb3V0ID0gbnVsbDtcclxuICAgICAgICBsZXQgcHJldmlvdXMgPSAwO1xyXG4gICAgICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xyXG4gICAgICAgIGZ1bmN0aW9uIGxhdGVyKCkge1xyXG4gICAgICAgICAgICBwcmV2aW91cyA9IG9wdGlvbnMubGVhZGluZyA9PT0gZmFsc2UgPyAwIDogRGF0ZS5ub3coKTtcclxuICAgICAgICAgICAgdGltZW91dCA9IG51bGw7XHJcbiAgICAgICAgICAgIHJlc3VsdCA9IGZ1bmMuYXBwbHkoY29udGV4dCwgYXJncyk7XHJcbiAgICAgICAgICAgIGlmICghdGltZW91dCl7XHJcbiAgICAgICAgICAgICAgICBjb250ZXh0ID0gYXJncyA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICB3cmFwcGVyLnJlc29sdmUoKTtcclxuICAgICAgICAgICAgfSBcclxuICAgICAgICB9O1xyXG4gICAgICAgIHdyYXBwZXIuc3RvcHBlZFByb21pc2UgPSBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHJlc29sdmUoKSk7XHJcbiAgICAgICAgZnVuY3Rpb24gd3JhcHBlcigpIHtcclxuICAgICAgICAgICAgbGV0IG5vdyA9IERhdGUubm93KCk7XHJcbiAgICAgICAgICAgIGlmKHByZXZpb3VzID09PSAwKXtcclxuICAgICAgICAgICAgICAgIHdyYXBwZXIuc3RvcHBlZFByb21pc2UgPSBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHdyYXBwZXIucmVzb2x2ZSA9IHJlc29sdmUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChwcmV2aW91cyA9PT0gMCAmJiBvcHRpb25zLmxlYWRpbmcgPT09IGZhbHNlKXtcclxuICAgICAgICAgICAgICAgIHByZXZpb3VzID0gbm93O1xyXG4gICAgICAgICAgICB9IFxyXG4gICAgICAgICAgICBsZXQgcmVtYWluaW5nID0gd2FpdCAtIChub3cgLSBwcmV2aW91cyk7XHJcbiAgICAgICAgICAgIGNvbnRleHQgPSB0aGlzO1xyXG4gICAgICAgICAgICBhcmdzID0gYXJndW1lbnRzO1xyXG4gICAgICAgICAgICBpZiAocmVtYWluaW5nIDw9IDAgfHwgcmVtYWluaW5nID4gd2FpdCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRpbWVvdXQpIHtcclxuICAgICAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQodGltZW91dCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGltZW91dCA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBwcmV2aW91cyA9IG5vdztcclxuICAgICAgICAgICAgICAgIHJlc3VsdCA9IGZ1bmMuYXBwbHkoY29udGV4dCwgYXJncyk7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXRpbWVvdXQpe1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRleHQgPSBhcmdzID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIGlmKCF0aW1lb3V0KSB7XHJcbiAgICAgICAgICAgICAgICBpZihvcHRpb25zLnRyYWlsaW5nICE9PSBmYWxzZSl7XHJcbiAgICAgICAgICAgICAgICAgICAgdGltZW91dCA9IHNldFRpbWVvdXQobGF0ZXIsIHJlbWFpbmluZyk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHdyYXBwZXIucmVzb2x2ZSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4gd3JhcHBlcjtcclxuICAgIH1cclxufTtcclxuXHJcblxyXG5leHBvcnQgZnVuY3Rpb24gdXVpZHY0KCkge1xyXG4gICAgcmV0dXJuICd4eHh4eHh4eC14eHh4LTR4eHgteXh4eC14eHh4eHh4eHh4eHgnLnJlcGxhY2UoL1t4eV0vZywgZnVuY3Rpb24oYykge1xyXG4gICAgICB2YXIgciA9IE1hdGgucmFuZG9tKCkgKiAxNiB8IDAsIHYgPSBjID09ICd4JyA/IHIgOiAociAmIDB4MyB8IDB4OCk7XHJcbiAgICAgIHJldHVybiB2LnRvU3RyaW5nKDE2KTtcclxuICAgIH0pO1xyXG59Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/utils.js\n");

/***/ }),

/***/ "dll-reference monaco":
/*!*************************!*\
  !*** external "monaco" ***!
  \*************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("module.exports = monaco;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJtb25hY29cIj81N2FmIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBIiwiZmlsZSI6ImRsbC1yZWZlcmVuY2UgbW9uYWNvLmpzIiwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPSBtb25hY287Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///dll-reference monaco\n");

/***/ })

/******/ });