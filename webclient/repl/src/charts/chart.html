<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Chart {{chart_name}}</title>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.10.2/dist/katex.css" integrity="sha384-+MsSfd29vjUzcyqYURxcmpWGtqoSHBy+QdEJNLEslXQftxojQv0k6BGDqUNp9GtA" crossorigin="anonymous">
<script src="index.bundle.js" type="text/javascript"></script>
</head>

<body>
    <sseq-ui tabindex="-1">
        <sseq-display id=display style="overflow: hidden; position: relative; flex-grow: 1;">
            <sseq-axes></sseq-axes>
            <sseq-grid></sseq-grid>
            <sseq-chart>
                <sseq-bidegree-highlighter></sseq-bidegree-highlighter>
                <sseq-class-highlighter></sseq-class-highlighter>
                <sseq-page-indicator style="position: absolute; left: 60px; top: 0px; font-family: Arial; font-size: 15px;"></sseq-page-indicator>
                <sseq-tooltip></sseq-tooltip>
            </sseq-chart>
        </sseq-display>
        <sseq-sidebar max-width=400 initial-width=280>
            <div id="names" tab="Names">
                <div content="bidegree"></div>
                <div content="classes"></div>
                <div content="names-products"></div>
                <div content="matrix"></div>
                <div style="flex-grow:1; min-height : 80px;"></div>
            </div>
            <div tab="Products">
                <div content="bidegree"></div>
                <div content="classes"></div>
                <div content="factorizations"></div>
                <div content="outgoing-products"></div>
            </div>
            <sseq-button slot="footer" class="help-btn" 
                style="
                    padding-left: 0.5rem; 
                    padding-right: 0.5rem; 
                    margin-bottom : 10px; 
                    align-self: center;
                ">
                Help
            </sseq-button>  
        </sseq-sidebar>
        <sseq-popup>
            <span slot="header"></span>
            <div slot="body"></div>
        </sseq-popup>
        <sseq-popup modal class="help">
            <span slot="header"><h4>Help</h4></span>
            <div slot="body">
            </div>
            <div slot="buttons">
                <sseq-button class="cancel">close</sseq-button>
            </div>
        </sseq-popup>
        <div class="status-indicator"></div>
    </sseq-ui>

    <script>
        let keybindings = [
            ["General", [
                ["<kbd>t</kbd>", "Take the console"],
                ["<kbd>h</kbd>", "Show this help window"],
                ["<kbd>z</kbd>", "Undo"],
                ["<kbd>Shift ⇧</kbd> + <kbd>z</kbd>", "Redo"],
            ]],
            ["Chart", [
                ["<kbd>w</kbd> <kbd>a</kbd> <kbd>s</kbd> <kbd>d</kbd>", "Pan chart content"],
                ["<kbd>+</kbd> <kbd>-</kbd>", "Zoom in and out"],
                ["<kbd>]</kbd> <kbd>[</kbd>", "Zoom x direction in and out"],
                ["<kbd>}</kbd> <kbd>{</kbd>", "Zoom y direction in and out"],
                ["<kbd>↑</kbd> <kbd>←</kbd> <kbd>↓</kbd> <kbd>→</kbd>", "Move selected bidegree"],
                ["<kbd>Home</kbd>", "Move to bidegree (0,0)"],
                ["<kbd>m</kbd>", "Select next bidegree that contains an element that is decomposable but not divisible by <katex-expr>h_i</katex-expr>"],
                ["<kbd>n</kbd>", "Select next bidegree containing an indecomposable element"],
            ]],
            ["Interface", [
                ["<kbd>Tab ↹</kbd>", "Move to next control"],
                ["<kbd>Shift ⇧</kbd> + <kbd>Tab ↹</kbd>", "Move to previous control"],
                ["<kbd>Space</kbd>", "Toggle"],
                ["<kbd>Enter ↵</kbd>", "Submit"],
                ["<kbd>Esc</kbd>", "Cancel"],
                ["<kbd>1</kbd> - <kbd>9</kbd>", "Focus sidebar group"],
                ["<kbd>0</kbd>", "Focus popup"],
            ]],
            ["Matrix Popup", [
                ["<kbd>↑</kbd> <kbd>←</kbd> <kbd>↓</kbd> <kbd>→</kbd>", "Move selected entry"],
                ["<kbd>0</kbd> <kbd>1</kbd>", "Update selected entry"],
                ["<kbd>Ctrl</kbd> + <kbd>↑</kbd>, <kbd>Ctrl</kbd> + <kbd>↓</kbd>", "Swap selected row up / down"],
                ["<kbd>Ctrl</kbd> + <kbd>C</kbd>, <kbd>Ctrl</kbd> + <kbd>V</kbd>", "Copy / paste selected row"]
            ]]   
        ]

        document.querySelector(".help [slot=body]").innerHTML =
            `<div>
                    ${keybindings.map(([group, controls]) => `
                    <div>
                        <h4>${group}</h4>  
                        <dl>
                        ${controls.map(([key, description]) => `
                            <dt>${key} :</dt>
                            <dd>${description}</dd>
                            <span style="display:block"></span>
                        `).join("\n")}
                        </dl>
                    </div>
                `).join("\n")}
            </div>`;
        
            

        window.chart_name = "{{chart_name}}";

        let replDisplayUI = new ReplDisplayUI(document.querySelector("sseq-ui"), chart_name);
        replDisplayUI.start();
    </script>
</body>
</html>